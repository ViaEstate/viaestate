var pR=Object.defineProperty;var R1=s=>{throw TypeError(s)};var mR=(s,e,t)=>e in s?pR(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ue=(s,e,t)=>mR(s,typeof e!="symbol"?e+"":e,t),Ky=(s,e,t)=>e.has(s)||R1("Cannot "+t);var u=(s,e,t)=>(Ky(s,e,"read from private field"),t?t.call(s):e.get(s)),E=(s,e,t)=>e.has(s)?R1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),A=(s,e,t,n)=>(Ky(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),C=(s,e,t)=>(Ky(s,e,"access private method"),t);var xs=(s,e,t,n)=>({set _(r){A(s,e,r,t)},get _(){return u(s,e,n)}});function gR(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var Wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pj(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function vR(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var mj={exports:{}},ny={},gj={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=Symbol.for("react.element"),yR=Symbol.for("react.portal"),xR=Symbol.for("react.fragment"),wR=Symbol.for("react.strict_mode"),bR=Symbol.for("react.profiler"),_R=Symbol.for("react.provider"),SR=Symbol.for("react.context"),AR=Symbol.for("react.forward_ref"),jR=Symbol.for("react.suspense"),ER=Symbol.for("react.memo"),CR=Symbol.for("react.lazy"),I1=Symbol.iterator;function NR(s){return s===null||typeof s!="object"?null:(s=I1&&s[I1]||s["@@iterator"],typeof s=="function"?s:null)}var vj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yj=Object.assign,xj={};function Uu(s,e,t){this.props=s,this.context=e,this.refs=xj,this.updater=t||vj}Uu.prototype.isReactComponent={};Uu.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};Uu.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function wj(){}wj.prototype=Uu.prototype;function Mb(s,e,t){this.props=s,this.context=e,this.refs=xj,this.updater=t||vj}var Lb=Mb.prototype=new wj;Lb.constructor=Mb;yj(Lb,Uu.prototype);Lb.isPureReactComponent=!0;var M1=Array.isArray,bj=Object.prototype.hasOwnProperty,Db={current:null},_j={key:!0,ref:!0,__self:!0,__source:!0};function Sj(s,e,t){var n,r={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)bj.call(e,n)&&!_j.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(s&&s.defaultProps)for(n in l=s.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:rm,type:s,key:i,ref:a,props:r,_owner:Db.current}}function kR(s,e){return{$$typeof:rm,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function Ob(s){return typeof s=="object"&&s!==null&&s.$$typeof===rm}function PR(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var L1=/\/+/g;function Xy(s,e){return typeof s=="object"&&s!==null&&s.key!=null?PR(""+s.key):e.toString(36)}function Qm(s,e,t,n,r){var i=typeof s;(i==="undefined"||i==="boolean")&&(s=null);var a=!1;if(s===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(s.$$typeof){case rm:case yR:a=!0}}if(a)return a=s,r=r(a),s=n===""?"."+Xy(a,0):n,M1(r)?(t="",s!=null&&(t=s.replace(L1,"$&/")+"/"),Qm(r,e,t,"",function(d){return d})):r!=null&&(Ob(r)&&(r=kR(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(L1,"$&/")+"/")+s)),e.push(r)),1;if(a=0,n=n===""?".":n+":",M1(s))for(var l=0;l<s.length;l++){i=s[l];var c=n+Xy(i,l);a+=Qm(i,e,t,c,r)}else if(c=NR(s),typeof c=="function")for(s=c.call(s),l=0;!(i=s.next()).done;)i=i.value,c=n+Xy(i,l++),a+=Qm(i,e,t,c,r);else if(i==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function xm(s,e,t){if(s==null)return s;var n=[],r=0;return Qm(s,n,"","",function(i){return e.call(t,i,r++)}),n}function TR(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(t){(s._status===0||s._status===-1)&&(s._status=1,s._result=t)},function(t){(s._status===0||s._status===-1)&&(s._status=2,s._result=t)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var Is={current:null},Jm={transition:null},RR={ReactCurrentDispatcher:Is,ReactCurrentBatchConfig:Jm,ReactCurrentOwner:Db};function Aj(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:xm,forEach:function(s,e,t){xm(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return xm(s,function(){e++}),e},toArray:function(s){return xm(s,function(e){return e})||[]},only:function(s){if(!Ob(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};ke.Component=Uu;ke.Fragment=xR;ke.Profiler=bR;ke.PureComponent=Mb;ke.StrictMode=wR;ke.Suspense=jR;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RR;ke.act=Aj;ke.cloneElement=function(s,e,t){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=yj({},s.props),r=s.key,i=s.ref,a=s._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Db.current),e.key!==void 0&&(r=""+e.key),s.type&&s.type.defaultProps)var l=s.type.defaultProps;for(c in e)bj.call(e,c)&&!_j.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:rm,type:s.type,key:r,ref:i,props:n,_owner:a}};ke.createContext=function(s){return s={$$typeof:SR,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:_R,_context:s},s.Consumer=s};ke.createElement=Sj;ke.createFactory=function(s){var e=Sj.bind(null,s);return e.type=s,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(s){return{$$typeof:AR,render:s}};ke.isValidElement=Ob;ke.lazy=function(s){return{$$typeof:CR,_payload:{_status:-1,_result:s},_init:TR}};ke.memo=function(s,e){return{$$typeof:ER,type:s,compare:e===void 0?null:e}};ke.startTransition=function(s){var e=Jm.transition;Jm.transition={};try{s()}finally{Jm.transition=e}};ke.unstable_act=Aj;ke.useCallback=function(s,e){return Is.current.useCallback(s,e)};ke.useContext=function(s){return Is.current.useContext(s)};ke.useDebugValue=function(){};ke.useDeferredValue=function(s){return Is.current.useDeferredValue(s)};ke.useEffect=function(s,e){return Is.current.useEffect(s,e)};ke.useId=function(){return Is.current.useId()};ke.useImperativeHandle=function(s,e,t){return Is.current.useImperativeHandle(s,e,t)};ke.useInsertionEffect=function(s,e){return Is.current.useInsertionEffect(s,e)};ke.useLayoutEffect=function(s,e){return Is.current.useLayoutEffect(s,e)};ke.useMemo=function(s,e){return Is.current.useMemo(s,e)};ke.useReducer=function(s,e,t){return Is.current.useReducer(s,e,t)};ke.useRef=function(s){return Is.current.useRef(s)};ke.useState=function(s){return Is.current.useState(s)};ke.useSyncExternalStore=function(s,e,t){return Is.current.useSyncExternalStore(s,e,t)};ke.useTransition=function(){return Is.current.useTransition()};ke.version="18.3.1";gj.exports=ke;var _=gj.exports;const va=pj(_),Fb=gR({__proto__:null,default:va},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR=_,MR=Symbol.for("react.element"),LR=Symbol.for("react.fragment"),DR=Object.prototype.hasOwnProperty,OR=IR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FR={key:!0,ref:!0,__self:!0,__source:!0};function jj(s,e,t){var n,r={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)DR.call(e,n)&&!FR.hasOwnProperty(n)&&(r[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:MR,type:s,key:i,ref:a,props:r,_owner:OR.current}}ny.Fragment=LR;ny.jsx=jj;ny.jsxs=jj;mj.exports=ny;var o=mj.exports,Ej={exports:{}},jn={},Cj={exports:{}},Nj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(D,R){var O=D.length;D.push(R);e:for(;0<O;){var H=O-1>>>1,Q=D[H];if(0<r(Q,R))D[H]=R,D[O]=Q,O=H;else break e}}function t(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var R=D[0],O=D.pop();if(O!==R){D[0]=O;e:for(var H=0,Q=D.length,ae=Q>>>1;H<ae;){var pe=2*(H+1)-1,Ie=D[pe],Ee=pe+1,G=D[Ee];if(0>r(Ie,O))Ee<Q&&0>r(G,Ie)?(D[H]=G,D[Ee]=O,H=Ee):(D[H]=Ie,D[pe]=O,H=pe);else if(Ee<Q&&0>r(G,O))D[H]=G,D[Ee]=O,H=Ee;else break e}}return R}function r(D,R){var O=D.sortIndex-R.sortIndex;return O!==0?O:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();s.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,p=3,m=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var R=t(d);R!==null;){if(R.callback===null)n(d);else if(R.startTime<=D)n(d),R.sortIndex=R.expirationTime,e(c,R);else break;R=t(d)}}function S(D){if(g=!1,x(D),!y)if(t(c)!==null)y=!0,F(j);else{var R=t(d);R!==null&&W(S,R.startTime-D)}}function j(D,R){y=!1,g&&(g=!1,v(P),P=-1),m=!0;var O=p;try{for(x(R),f=t(c);f!==null&&(!(f.expirationTime>R)||D&&!M());){var H=f.callback;if(typeof H=="function"){f.callback=null,p=f.priorityLevel;var Q=H(f.expirationTime<=R);R=s.unstable_now(),typeof Q=="function"?f.callback=Q:f===t(c)&&n(c),x(R)}else n(c);f=t(c)}if(f!==null)var ae=!0;else{var pe=t(d);pe!==null&&W(S,pe.startTime-R),ae=!1}return ae}finally{f=null,p=O,m=!1}}var N=!1,k=null,P=-1,I=5,T=-1;function M(){return!(s.unstable_now()-T<I)}function U(){if(k!==null){var D=s.unstable_now();T=D;var R=!0;try{R=k(!0,D)}finally{R?z():(N=!1,k=null)}}else N=!1}var z;if(typeof b=="function")z=function(){b(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,J=B.port2;B.port1.onmessage=U,z=function(){J.postMessage(null)}}else z=function(){w(U,0)};function F(D){k=D,N||(N=!0,z())}function W(D,R){P=w(function(){D(s.unstable_now())},R)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_continueExecution=function(){y||m||(y=!0,F(j))},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return p},s.unstable_getFirstCallbackNode=function(){return t(c)},s.unstable_next=function(D){switch(p){case 1:case 2:case 3:var R=3;break;default:R=p}var O=p;p=R;try{return D()}finally{p=O}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var O=p;p=D;try{return R()}finally{p=O}},s.unstable_scheduleCallback=function(D,R,O){var H=s.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?H+O:H):O=H,D){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=O+Q,D={id:h++,callback:R,priorityLevel:D,startTime:O,expirationTime:Q,sortIndex:-1},O>H?(D.sortIndex=O,e(d,D),t(c)===null&&D===t(d)&&(g?(v(P),P=-1):g=!0,W(S,O-H))):(D.sortIndex=Q,e(c,D),y||m||(y=!0,F(j))),D},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(D){var R=p;return function(){var O=p;p=R;try{return D.apply(this,arguments)}finally{p=O}}}})(Nj);Cj.exports=Nj;var $R=Cj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR=_,An=$R;function q(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kj=new Set,Zh={};function jc(s,e){Cu(s,e),Cu(s+"Capture",e)}function Cu(s,e){for(Zh[s]=e,s=0;s<e.length;s++)kj.add(e[s])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yx=Object.prototype.hasOwnProperty,BR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D1={},O1={};function zR(s){return Yx.call(O1,s)?!0:Yx.call(D1,s)?!1:BR.test(s)?O1[s]=!0:(D1[s]=!0,!1)}function HR(s,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function VR(s,e,t,n){if(e===null||typeof e>"u"||HR(s,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ms(s,e,t,n,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ss={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){ss[s]=new Ms(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];ss[e]=new Ms(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){ss[s]=new Ms(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){ss[s]=new Ms(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){ss[s]=new Ms(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){ss[s]=new Ms(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){ss[s]=new Ms(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){ss[s]=new Ms(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){ss[s]=new Ms(s,5,!1,s.toLowerCase(),null,!1,!1)});var $b=/[\-:]([a-z])/g;function Ub(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace($b,Ub);ss[e]=new Ms(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace($b,Ub);ss[e]=new Ms(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace($b,Ub);ss[e]=new Ms(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){ss[s]=new Ms(s,1,!1,s.toLowerCase(),null,!1,!1)});ss.xlinkHref=new Ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){ss[s]=new Ms(s,1,!1,s.toLowerCase(),null,!0,!0)});function Bb(s,e,t,n){var r=ss.hasOwnProperty(e)?ss[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VR(e,t,r,n)&&(t=null),n||r===null?zR(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):r.mustUseProperty?s[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?s.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?s.setAttributeNS(n,e,t):s.setAttribute(e,t))))}var la=UR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wm=Symbol.for("react.element"),Kc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),zb=Symbol.for("react.strict_mode"),Qx=Symbol.for("react.profiler"),Pj=Symbol.for("react.provider"),Tj=Symbol.for("react.context"),Hb=Symbol.for("react.forward_ref"),Jx=Symbol.for("react.suspense"),Zx=Symbol.for("react.suspense_list"),Vb=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),Rj=Symbol.for("react.offscreen"),F1=Symbol.iterator;function eh(s){return s===null||typeof s!="object"?null:(s=F1&&s[F1]||s["@@iterator"],typeof s=="function"?s:null)}var vt=Object.assign,Yy;function mh(s){if(Yy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Yy=e&&e[1]||""}return`
`+Yy+s}var Qy=!1;function Jy(s,e){if(!s||Qy)return"";Qy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(s,[],e)}else{try{e.call()}catch(d){n=d}s.call(e.prototype)}else{try{throw Error()}catch(d){n=d}s()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=a&&0<=l);break}}}finally{Qy=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?mh(s):""}function WR(s){switch(s.tag){case 5:return mh(s.type);case 16:return mh("Lazy");case 13:return mh("Suspense");case 19:return mh("SuspenseList");case 0:case 2:case 15:return s=Jy(s.type,!1),s;case 11:return s=Jy(s.type.render,!1),s;case 1:return s=Jy(s.type,!0),s;default:return""}}function ew(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Xc:return"Fragment";case Kc:return"Portal";case Qx:return"Profiler";case zb:return"StrictMode";case Jx:return"Suspense";case Zx:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Tj:return(s.displayName||"Context")+".Consumer";case Pj:return(s._context.displayName||"Context")+".Provider";case Hb:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Vb:return e=s.displayName||null,e!==null?e:ew(s.type)||"Memo";case ba:e=s._payload,s=s._init;try{return ew(s(e))}catch{}}return null}function qR(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ew(e);case 8:return e===zb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xo(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ij(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GR(s){var e=Ij(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),n=""+s[e];if(!s.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function bm(s){s._valueTracker||(s._valueTracker=GR(s))}function Mj(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return s&&(n=Ij(s)?s.checked?"true":"false":s.value),s=n,s!==t?(e.setValue(s),!0):!1}function Vg(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function tw(s,e){var t=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??s._wrapperState.initialChecked})}function $1(s,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=xo(e.value!=null?e.value:t),s._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lj(s,e){e=e.checked,e!=null&&Bb(s,"checked",e,!1)}function sw(s,e){Lj(s,e);var t=xo(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?nw(s,e.type,t):e.hasOwnProperty("defaultValue")&&nw(s,e.type,xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function U1(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function nw(s,e,t){(e!=="number"||Vg(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}var gh=Array.isArray;function ld(s,e,t,n){if(s=s.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<s.length;t++)r=e.hasOwnProperty("$"+s[t].value),s[t].selected!==r&&(s[t].selected=r),r&&n&&(s[t].defaultSelected=!0)}else{for(t=""+xo(t),e=null,r=0;r<s.length;r++){if(s[r].value===t){s[r].selected=!0,n&&(s[r].defaultSelected=!0);return}e!==null||s[r].disabled||(e=s[r])}e!==null&&(e.selected=!0)}}function rw(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function B1(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(q(92));if(gh(t)){if(1<t.length)throw Error(q(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:xo(t)}}function Dj(s,e){var t=xo(e.value),n=xo(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),n!=null&&(s.defaultValue=""+n)}function z1(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function Oj(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iw(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?Oj(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var _m,Fj=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return s(e,t,n,r)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(_m=_m||document.createElement("div"),_m.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_m.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ef(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var Oh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KR=["Webkit","ms","Moz","O"];Object.keys(Oh).forEach(function(s){KR.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),Oh[e]=Oh[s]})});function $j(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Oh.hasOwnProperty(s)&&Oh[s]?(""+e).trim():e+"px"}function Uj(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=$j(t,e[t],n);t==="float"&&(t="cssFloat"),n?s.setProperty(t,r):s[t]=r}}var XR=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aw(s,e){if(e){if(XR[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function ow(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lw=null;function Wb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var cw=null,cd=null,dd=null;function H1(s){if(s=om(s)){if(typeof cw!="function")throw Error(q(280));var e=s.stateNode;e&&(e=ly(e),cw(s.stateNode,s.type,e))}}function Bj(s){cd?dd?dd.push(s):dd=[s]:cd=s}function zj(){if(cd){var s=cd,e=dd;if(dd=cd=null,H1(s),e)for(s=0;s<e.length;s++)H1(e[s])}}function Hj(s,e){return s(e)}function Vj(){}var Zy=!1;function Wj(s,e,t){if(Zy)return s(e,t);Zy=!0;try{return Hj(s,e,t)}finally{Zy=!1,(cd!==null||dd!==null)&&(Vj(),zj())}}function tf(s,e){var t=s.stateNode;if(t===null)return null;var n=ly(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(q(231,e,typeof t));return t}var dw=!1;if(ea)try{var th={};Object.defineProperty(th,"passive",{get:function(){dw=!0}}),window.addEventListener("test",th,th),window.removeEventListener("test",th,th)}catch{dw=!1}function YR(s,e,t,n,r,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var Fh=!1,Wg=null,qg=!1,uw=null,QR={onError:function(s){Fh=!0,Wg=s}};function JR(s,e,t,n,r,i,a,l,c){Fh=!1,Wg=null,YR.apply(QR,arguments)}function ZR(s,e,t,n,r,i,a,l,c){if(JR.apply(this,arguments),Fh){if(Fh){var d=Wg;Fh=!1,Wg=null}else throw Error(q(198));qg||(qg=!0,uw=d)}}function Ec(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function qj(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function V1(s){if(Ec(s)!==s)throw Error(q(188))}function eI(s){var e=s.alternate;if(!e){if(e=Ec(s),e===null)throw Error(q(188));return e!==s?null:s}for(var t=s,n=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return V1(r),s;if(i===n)return V1(r),e;i=i.sibling}throw Error(q(188))}if(t.return!==n.return)t=r,n=i;else{for(var a=!1,l=r.child;l;){if(l===t){a=!0,t=r,n=i;break}if(l===n){a=!0,n=r,t=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===t){a=!0,t=i,n=r;break}if(l===n){a=!0,n=i,t=r;break}l=l.sibling}if(!a)throw Error(q(189))}}if(t.alternate!==n)throw Error(q(190))}if(t.tag!==3)throw Error(q(188));return t.stateNode.current===t?s:e}function Gj(s){return s=eI(s),s!==null?Kj(s):null}function Kj(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=Kj(s);if(e!==null)return e;s=s.sibling}return null}var Xj=An.unstable_scheduleCallback,W1=An.unstable_cancelCallback,tI=An.unstable_shouldYield,sI=An.unstable_requestPaint,St=An.unstable_now,nI=An.unstable_getCurrentPriorityLevel,qb=An.unstable_ImmediatePriority,Yj=An.unstable_UserBlockingPriority,Gg=An.unstable_NormalPriority,rI=An.unstable_LowPriority,Qj=An.unstable_IdlePriority,ry=null,ti=null;function iI(s){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(ry,s,void 0,(s.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:lI,aI=Math.log,oI=Math.LN2;function lI(s){return s>>>=0,s===0?32:31-(aI(s)/oI|0)|0}var Sm=64,Am=4194304;function vh(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Kg(s,e){var t=s.pendingLanes;if(t===0)return 0;var n=0,r=s.suspendedLanes,i=s.pingedLanes,a=t&268435455;if(a!==0){var l=a&~r;l!==0?n=vh(l):(i&=a,i!==0&&(n=vh(i)))}else a=t&~r,a!==0?n=vh(a):i!==0&&(n=vh(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=t&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=n;0<e;)t=31-yr(e),r=1<<t,n|=s[t],e&=~r;return n}function cI(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dI(s,e){for(var t=s.suspendedLanes,n=s.pingedLanes,r=s.expirationTimes,i=s.pendingLanes;0<i;){var a=31-yr(i),l=1<<a,c=r[a];c===-1?(!(l&t)||l&n)&&(r[a]=cI(l,e)):c<=e&&(s.expiredLanes|=l),i&=~l}}function hw(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Jj(){var s=Sm;return Sm<<=1,!(Sm&4194240)&&(Sm=64),s}function ex(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function im(s,e,t){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-yr(e),s[e]=t}function uI(s,e){var t=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<t;){var r=31-yr(t),i=1<<r;e[r]=0,n[r]=-1,s[r]=-1,t&=~i}}function Gb(s,e){var t=s.entangledLanes|=e;for(s=s.entanglements;t;){var n=31-yr(t),r=1<<n;r&e|s[n]&e&&(s[n]|=e),t&=~r}}var qe=0;function Zj(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var eE,Kb,tE,sE,nE,fw=!1,jm=[],ao=null,oo=null,lo=null,sf=new Map,nf=new Map,Sa=[],hI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q1(s,e){switch(s){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":sf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nf.delete(e.pointerId)}}function sh(s,e,t,n,r,i){return s===null||s.nativeEvent!==i?(s={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=om(e),e!==null&&Kb(e)),s):(s.eventSystemFlags|=n,e=s.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),s)}function fI(s,e,t,n,r){switch(e){case"focusin":return ao=sh(ao,s,e,t,n,r),!0;case"dragenter":return oo=sh(oo,s,e,t,n,r),!0;case"mouseover":return lo=sh(lo,s,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return sf.set(i,sh(sf.get(i)||null,s,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,nf.set(i,sh(nf.get(i)||null,s,e,t,n,r)),!0}return!1}function rE(s){var e=Zo(s.target);if(e!==null){var t=Ec(e);if(t!==null){if(e=t.tag,e===13){if(e=qj(t),e!==null){s.blockedOn=e,nE(s.priority,function(){tE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Zm(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=pw(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t===null){t=s.nativeEvent;var n=new t.constructor(t.type,t);lw=n,t.target.dispatchEvent(n),lw=null}else return e=om(t),e!==null&&Kb(e),s.blockedOn=t,!1;e.shift()}return!0}function G1(s,e,t){Zm(s)&&t.delete(e)}function pI(){fw=!1,ao!==null&&Zm(ao)&&(ao=null),oo!==null&&Zm(oo)&&(oo=null),lo!==null&&Zm(lo)&&(lo=null),sf.forEach(G1),nf.forEach(G1)}function nh(s,e){s.blockedOn===e&&(s.blockedOn=null,fw||(fw=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,pI)))}function rf(s){function e(r){return nh(r,s)}if(0<jm.length){nh(jm[0],s);for(var t=1;t<jm.length;t++){var n=jm[t];n.blockedOn===s&&(n.blockedOn=null)}}for(ao!==null&&nh(ao,s),oo!==null&&nh(oo,s),lo!==null&&nh(lo,s),sf.forEach(e),nf.forEach(e),t=0;t<Sa.length;t++)n=Sa[t],n.blockedOn===s&&(n.blockedOn=null);for(;0<Sa.length&&(t=Sa[0],t.blockedOn===null);)rE(t),t.blockedOn===null&&Sa.shift()}var ud=la.ReactCurrentBatchConfig,Xg=!0;function mI(s,e,t,n){var r=qe,i=ud.transition;ud.transition=null;try{qe=1,Xb(s,e,t,n)}finally{qe=r,ud.transition=i}}function gI(s,e,t,n){var r=qe,i=ud.transition;ud.transition=null;try{qe=4,Xb(s,e,t,n)}finally{qe=r,ud.transition=i}}function Xb(s,e,t,n){if(Xg){var r=pw(s,e,t,n);if(r===null)dx(s,e,n,Yg,t),q1(s,n);else if(fI(r,s,e,t,n))n.stopPropagation();else if(q1(s,n),e&4&&-1<hI.indexOf(s)){for(;r!==null;){var i=om(r);if(i!==null&&eE(i),i=pw(s,e,t,n),i===null&&dx(s,e,n,Yg,t),i===r)break;r=i}r!==null&&n.stopPropagation()}else dx(s,e,n,null,t)}}var Yg=null;function pw(s,e,t,n){if(Yg=null,s=Wb(n),s=Zo(s),s!==null)if(e=Ec(s),e===null)s=null;else if(t=e.tag,t===13){if(s=qj(e),s!==null)return s;s=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return Yg=s,null}function iE(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nI()){case qb:return 1;case Yj:return 4;case Gg:case rI:return 16;case Qj:return 536870912;default:return 16}default:return 16}}var no=null,Yb=null,eg=null;function aE(){if(eg)return eg;var s,e=Yb,t=e.length,n,r="value"in no?no.value:no.textContent,i=r.length;for(s=0;s<t&&e[s]===r[s];s++);var a=t-s;for(n=1;n<=a&&e[t-n]===r[i-n];n++);return eg=r.slice(s,1<n?1-n:void 0)}function tg(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function Em(){return!0}function K1(){return!1}function En(s){function e(t,n,r,i,a){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in s)s.hasOwnProperty(l)&&(t=s[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Em:K1,this.isPropagationStopped=K1,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Em)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Em)},persist:function(){},isPersistent:Em}),e}var Bu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qb=En(Bu),am=vt({},Bu,{view:0,detail:0}),vI=En(am),tx,sx,rh,iy=vt({},am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jb,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==rh&&(rh&&s.type==="mousemove"?(tx=s.screenX-rh.screenX,sx=s.screenY-rh.screenY):sx=tx=0,rh=s),tx)},movementY:function(s){return"movementY"in s?s.movementY:sx}}),X1=En(iy),yI=vt({},iy,{dataTransfer:0}),xI=En(yI),wI=vt({},am,{relatedTarget:0}),nx=En(wI),bI=vt({},Bu,{animationName:0,elapsedTime:0,pseudoElement:0}),_I=En(bI),SI=vt({},Bu,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),AI=En(SI),jI=vt({},Bu,{data:0}),Y1=En(jI),EI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kI(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=NI[s])?!!e[s]:!1}function Jb(){return kI}var PI=vt({},am,{key:function(s){if(s.key){var e=EI[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=tg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?CI[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jb,charCode:function(s){return s.type==="keypress"?tg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?tg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),TI=En(PI),RI=vt({},iy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q1=En(RI),II=vt({},am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jb}),MI=En(II),LI=vt({},Bu,{propertyName:0,elapsedTime:0,pseudoElement:0}),DI=En(LI),OI=vt({},iy,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),FI=En(OI),$I=[9,13,27,32],Zb=ea&&"CompositionEvent"in window,$h=null;ea&&"documentMode"in document&&($h=document.documentMode);var UI=ea&&"TextEvent"in window&&!$h,oE=ea&&(!Zb||$h&&8<$h&&11>=$h),J1=" ",Z1=!1;function lE(s,e){switch(s){case"keyup":return $I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cE(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Yc=!1;function BI(s,e){switch(s){case"compositionend":return cE(e);case"keypress":return e.which!==32?null:(Z1=!0,J1);case"textInput":return s=e.data,s===J1&&Z1?null:s;default:return null}}function zI(s,e){if(Yc)return s==="compositionend"||!Zb&&lE(s,e)?(s=aE(),eg=Yb=no=null,Yc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oE&&e.locale!=="ko"?null:e.data;default:return null}}var HI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eS(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!HI[s.type]:e==="textarea"}function dE(s,e,t,n){Bj(n),e=Qg(e,"onChange"),0<e.length&&(t=new Qb("onChange","change",null,t,n),s.push({event:t,listeners:e}))}var Uh=null,af=null;function VI(s){bE(s,0)}function ay(s){var e=Zc(s);if(Mj(e))return s}function WI(s,e){if(s==="change")return e}var uE=!1;if(ea){var rx;if(ea){var ix="oninput"in document;if(!ix){var tS=document.createElement("div");tS.setAttribute("oninput","return;"),ix=typeof tS.oninput=="function"}rx=ix}else rx=!1;uE=rx&&(!document.documentMode||9<document.documentMode)}function sS(){Uh&&(Uh.detachEvent("onpropertychange",hE),af=Uh=null)}function hE(s){if(s.propertyName==="value"&&ay(af)){var e=[];dE(e,af,s,Wb(s)),Wj(VI,e)}}function qI(s,e,t){s==="focusin"?(sS(),Uh=e,af=t,Uh.attachEvent("onpropertychange",hE)):s==="focusout"&&sS()}function GI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ay(af)}function KI(s,e){if(s==="click")return ay(e)}function XI(s,e){if(s==="input"||s==="change")return ay(e)}function YI(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var br=typeof Object.is=="function"?Object.is:YI;function of(s,e){if(br(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!Yx.call(e,r)||!br(s[r],e[r]))return!1}return!0}function nS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function rS(s,e){var t=nS(s);s=0;for(var n;t;){if(t.nodeType===3){if(n=s+t.textContent.length,s<=e&&n>=e)return{node:t,offset:e-s};s=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nS(t)}}function fE(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?fE(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function pE(){for(var s=window,e=Vg();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=Vg(s.document)}return e}function e_(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function QI(s){var e=pE(),t=s.focusedElem,n=s.selectionRange;if(e!==t&&t&&t.ownerDocument&&fE(t.ownerDocument.documentElement,t)){if(n!==null&&e_(t)){if(e=n.start,s=n.end,s===void 0&&(s=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(s,t.value.length);else if(s=(e=t.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var r=t.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!s.extend&&i>n&&(r=n,n=i,i=r),r=rS(t,i);var a=rS(t,n);r&&a&&(s.rangeCount!==1||s.anchorNode!==r.node||s.anchorOffset!==r.offset||s.focusNode!==a.node||s.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),s.removeAllRanges(),i>n?(s.addRange(e),s.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),s.addRange(e)))}}for(e=[],s=t;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)s=e[t],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var JI=ea&&"documentMode"in document&&11>=document.documentMode,Qc=null,mw=null,Bh=null,gw=!1;function iS(s,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;gw||Qc==null||Qc!==Vg(n)||(n=Qc,"selectionStart"in n&&e_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bh&&of(Bh,n)||(Bh=n,n=Qg(mw,"onSelect"),0<n.length&&(e=new Qb("onSelect","select",null,e,t),s.push({event:e,listeners:n}),e.target=Qc)))}function Cm(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var Jc={animationend:Cm("Animation","AnimationEnd"),animationiteration:Cm("Animation","AnimationIteration"),animationstart:Cm("Animation","AnimationStart"),transitionend:Cm("Transition","TransitionEnd")},ax={},mE={};ea&&(mE=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function oy(s){if(ax[s])return ax[s];if(!Jc[s])return s;var e=Jc[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in mE)return ax[s]=e[t];return s}var gE=oy("animationend"),vE=oy("animationiteration"),yE=oy("animationstart"),xE=oy("transitionend"),wE=new Map,aS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(s,e){wE.set(s,e),jc(e,[s])}for(var ox=0;ox<aS.length;ox++){var lx=aS[ox],ZI=lx.toLowerCase(),eM=lx[0].toUpperCase()+lx.slice(1);To(ZI,"on"+eM)}To(gE,"onAnimationEnd");To(vE,"onAnimationIteration");To(yE,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(xE,"onTransitionEnd");Cu("onMouseEnter",["mouseout","mouseover"]);Cu("onMouseLeave",["mouseout","mouseover"]);Cu("onPointerEnter",["pointerout","pointerover"]);Cu("onPointerLeave",["pointerout","pointerover"]);jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tM=new Set("cancel close invalid load scroll toggle".split(" ").concat(yh));function oS(s,e,t){var n=s.type||"unknown-event";s.currentTarget=t,ZR(n,e,void 0,s),s.currentTarget=null}function bE(s,e){e=(e&4)!==0;for(var t=0;t<s.length;t++){var n=s[t],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;oS(r,l,d),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;oS(r,l,d),i=c}}}if(qg)throw s=uw,qg=!1,uw=null,s}function rt(s,e){var t=e[bw];t===void 0&&(t=e[bw]=new Set);var n=s+"__bubble";t.has(n)||(_E(e,s,2,!1),t.add(n))}function cx(s,e,t){var n=0;e&&(n|=4),_E(t,s,n,e)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function lf(s){if(!s[Nm]){s[Nm]=!0,kj.forEach(function(t){t!=="selectionchange"&&(tM.has(t)||cx(t,!1,s),cx(t,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[Nm]||(e[Nm]=!0,cx("selectionchange",!1,e))}}function _E(s,e,t,n){switch(iE(e)){case 1:var r=mI;break;case 4:r=gI;break;default:r=Xb}t=r.bind(null,e,t,s),r=void 0,!dw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?s.addEventListener(e,t,{capture:!0,passive:r}):s.addEventListener(e,t,!0):r!==void 0?s.addEventListener(e,t,{passive:r}):s.addEventListener(e,t,!1)}function dx(s,e,t,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Zo(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Wj(function(){var d=i,h=Wb(t),f=[];e:{var p=wE.get(s);if(p!==void 0){var m=Qb,y=s;switch(s){case"keypress":if(tg(t)===0)break e;case"keydown":case"keyup":m=TI;break;case"focusin":y="focus",m=nx;break;case"focusout":y="blur",m=nx;break;case"beforeblur":case"afterblur":m=nx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=X1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=xI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=MI;break;case gE:case vE:case yE:m=_I;break;case xE:m=DI;break;case"scroll":m=vI;break;case"wheel":m=FI;break;case"copy":case"cut":case"paste":m=AI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Q1}var g=(e&4)!==0,w=!g&&s==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var b=d,x;b!==null;){x=b;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,v!==null&&(S=tf(b,v),S!=null&&g.push(cf(b,S,x)))),w)break;b=b.return}0<g.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=s==="mouseover"||s==="pointerover",m=s==="mouseout"||s==="pointerout",p&&t!==lw&&(y=t.relatedTarget||t.fromElement)&&(Zo(y)||y[ta]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=d,y=y?Zo(y):null,y!==null&&(w=Ec(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=d),m!==y)){if(g=X1,S="onMouseLeave",v="onMouseEnter",b="mouse",(s==="pointerout"||s==="pointerover")&&(g=Q1,S="onPointerLeave",v="onPointerEnter",b="pointer"),w=m==null?p:Zc(m),x=y==null?p:Zc(y),p=new g(S,b+"leave",m,t,h),p.target=w,p.relatedTarget=x,S=null,Zo(h)===d&&(g=new g(v,b+"enter",y,t,h),g.target=x,g.relatedTarget=w,S=g),w=S,m&&y)t:{for(g=m,v=y,b=0,x=g;x;x=Pc(x))b++;for(x=0,S=v;S;S=Pc(S))x++;for(;0<b-x;)g=Pc(g),b--;for(;0<x-b;)v=Pc(v),x--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Pc(g),v=Pc(v)}g=null}else g=null;m!==null&&lS(f,p,m,g,!1),y!==null&&w!==null&&lS(f,w,y,g,!0)}}e:{if(p=d?Zc(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=WI;else if(eS(p))if(uE)j=XI;else{j=GI;var N=qI}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=KI);if(j&&(j=j(s,d))){dE(f,j,t,h);break e}N&&N(s,p,d),s==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&nw(p,"number",p.value)}switch(N=d?Zc(d):window,s){case"focusin":(eS(N)||N.contentEditable==="true")&&(Qc=N,mw=d,Bh=null);break;case"focusout":Bh=mw=Qc=null;break;case"mousedown":gw=!0;break;case"contextmenu":case"mouseup":case"dragend":gw=!1,iS(f,t,h);break;case"selectionchange":if(JI)break;case"keydown":case"keyup":iS(f,t,h)}var k;if(Zb)e:{switch(s){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Yc?lE(s,t)&&(P="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(oE&&t.locale!=="ko"&&(Yc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Yc&&(k=aE()):(no=h,Yb="value"in no?no.value:no.textContent,Yc=!0)),N=Qg(d,P),0<N.length&&(P=new Y1(P,s,null,t,h),f.push({event:P,listeners:N}),k?P.data=k:(k=cE(t),k!==null&&(P.data=k)))),(k=UI?BI(s,t):zI(s,t))&&(d=Qg(d,"onBeforeInput"),0<d.length&&(h=new Y1("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=k))}bE(f,e)})}function cf(s,e,t){return{instance:s,listener:e,currentTarget:t}}function Qg(s,e){for(var t=e+"Capture",n=[];s!==null;){var r=s,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=tf(s,t),i!=null&&n.unshift(cf(s,i,r)),i=tf(s,e),i!=null&&n.push(cf(s,i,r))),s=s.return}return n}function Pc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function lS(s,e,t,n,r){for(var i=e._reactName,a=[];t!==null&&t!==n;){var l=t,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=tf(t,i),c!=null&&a.unshift(cf(t,c,l))):r||(c=tf(t,i),c!=null&&a.push(cf(t,c,l)))),t=t.return}a.length!==0&&s.push({event:e,listeners:a})}var sM=/\r\n?/g,nM=/\u0000|\uFFFD/g;function cS(s){return(typeof s=="string"?s:""+s).replace(sM,`
`).replace(nM,"")}function km(s,e,t){if(e=cS(e),cS(s)!==e&&t)throw Error(q(425))}function Jg(){}var vw=null,yw=null;function xw(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ww=typeof setTimeout=="function"?setTimeout:void 0,rM=typeof clearTimeout=="function"?clearTimeout:void 0,dS=typeof Promise=="function"?Promise:void 0,iM=typeof queueMicrotask=="function"?queueMicrotask:typeof dS<"u"?function(s){return dS.resolve(null).then(s).catch(aM)}:ww;function aM(s){setTimeout(function(){throw s})}function ux(s,e){var t=e,n=0;do{var r=t.nextSibling;if(s.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){s.removeChild(r),rf(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);rf(e)}function co(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function uS(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var zu=Math.random().toString(36).slice(2),Qr="__reactFiber$"+zu,df="__reactProps$"+zu,ta="__reactContainer$"+zu,bw="__reactEvents$"+zu,oM="__reactListeners$"+zu,lM="__reactHandles$"+zu;function Zo(s){var e=s[Qr];if(e)return e;for(var t=s.parentNode;t;){if(e=t[ta]||t[Qr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=uS(s);s!==null;){if(t=s[Qr])return t;s=uS(s)}return e}s=t,t=s.parentNode}return null}function om(s){return s=s[Qr]||s[ta],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Zc(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(q(33))}function ly(s){return s[df]||null}var _w=[],ed=-1;function Ro(s){return{current:s}}function at(s){0>ed||(s.current=_w[ed],_w[ed]=null,ed--)}function et(s,e){ed++,_w[ed]=s.current,s.current=e}var wo={},gs=Ro(wo),Ks=Ro(!1),cc=wo;function Nu(s,e){var t=s.type.contextTypes;if(!t)return wo;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=r),r}function Xs(s){return s=s.childContextTypes,s!=null}function Zg(){at(Ks),at(gs)}function hS(s,e,t){if(gs.current!==wo)throw Error(q(168));et(gs,e),et(Ks,t)}function SE(s,e,t){var n=s.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(q(108,qR(s)||"Unknown",r));return vt({},t,n)}function ev(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||wo,cc=gs.current,et(gs,s),et(Ks,Ks.current),!0}function fS(s,e,t){var n=s.stateNode;if(!n)throw Error(q(169));t?(s=SE(s,e,cc),n.__reactInternalMemoizedMergedChildContext=s,at(Ks),at(gs),et(gs,s)):at(Ks),et(Ks,t)}var xi=null,cy=!1,hx=!1;function AE(s){xi===null?xi=[s]:xi.push(s)}function cM(s){cy=!0,AE(s)}function Io(){if(!hx&&xi!==null){hx=!0;var s=0,e=qe;try{var t=xi;for(qe=1;s<t.length;s++){var n=t[s];do n=n(!0);while(n!==null)}xi=null,cy=!1}catch(r){throw xi!==null&&(xi=xi.slice(s+1)),Xj(qb,Io),r}finally{qe=e,hx=!1}}return null}var td=[],sd=0,tv=null,sv=0,Fn=[],$n=0,dc=null,qi=1,Gi="";function Vo(s,e){td[sd++]=sv,td[sd++]=tv,tv=s,sv=e}function jE(s,e,t){Fn[$n++]=qi,Fn[$n++]=Gi,Fn[$n++]=dc,dc=s;var n=qi;s=Gi;var r=32-yr(n)-1;n&=~(1<<r),t+=1;var i=32-yr(e)+r;if(30<i){var a=r-r%5;i=(n&(1<<a)-1).toString(32),n>>=a,r-=a,qi=1<<32-yr(e)+r|t<<r|n,Gi=i+s}else qi=1<<i|t<<r|n,Gi=s}function t_(s){s.return!==null&&(Vo(s,1),jE(s,1,0))}function s_(s){for(;s===tv;)tv=td[--sd],td[sd]=null,sv=td[--sd],td[sd]=null;for(;s===dc;)dc=Fn[--$n],Fn[$n]=null,Gi=Fn[--$n],Fn[$n]=null,qi=Fn[--$n],Fn[$n]=null}var xn=null,yn=null,dt=!1,gr=null;function EE(s,e){var t=zn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=s,e=s.deletions,e===null?(s.deletions=[t],s.flags|=16):e.push(t)}function pS(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,xn=s,yn=co(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,xn=s,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=dc!==null?{id:qi,overflow:Gi}:null,s.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=zn(18,null,null,0),t.stateNode=e,t.return=s,s.child=t,xn=s,yn=null,!0):!1;default:return!1}}function Sw(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Aw(s){if(dt){var e=yn;if(e){var t=e;if(!pS(s,e)){if(Sw(s))throw Error(q(418));e=co(t.nextSibling);var n=xn;e&&pS(s,e)?EE(n,t):(s.flags=s.flags&-4097|2,dt=!1,xn=s)}}else{if(Sw(s))throw Error(q(418));s.flags=s.flags&-4097|2,dt=!1,xn=s}}}function mS(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xn=s}function Pm(s){if(s!==xn)return!1;if(!dt)return mS(s),dt=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!xw(s.type,s.memoizedProps)),e&&(e=yn)){if(Sw(s))throw CE(),Error(q(418));for(;e;)EE(s,e),e=co(e.nextSibling)}if(mS(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){yn=co(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}yn=null}}else yn=xn?co(s.stateNode.nextSibling):null;return!0}function CE(){for(var s=yn;s;)s=co(s.nextSibling)}function ku(){yn=xn=null,dt=!1}function n_(s){gr===null?gr=[s]:gr.push(s)}var dM=la.ReactCurrentBatchConfig;function ih(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(q(309));var n=t.stateNode}if(!n)throw Error(q(147,s));var r=n,i=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof s!="string")throw Error(q(284));if(!t._owner)throw Error(q(290,s))}return s}function Tm(s,e){throw s=Object.prototype.toString.call(e),Error(q(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function gS(s){var e=s._init;return e(s._payload)}function NE(s){function e(v,b){if(s){var x=v.deletions;x===null?(v.deletions=[b],v.flags|=16):x.push(b)}}function t(v,b){if(!s)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(v,b){return v=po(v,b),v.index=0,v.sibling=null,v}function i(v,b,x){return v.index=x,s?(x=v.alternate,x!==null?(x=x.index,x<b?(v.flags|=2,b):x):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return s&&v.alternate===null&&(v.flags|=2),v}function l(v,b,x,S){return b===null||b.tag!==6?(b=xx(x,v.mode,S),b.return=v,b):(b=r(b,x),b.return=v,b)}function c(v,b,x,S){var j=x.type;return j===Xc?h(v,b,x.props.children,S,x.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ba&&gS(j)===b.type)?(S=r(b,x.props),S.ref=ih(v,b,x),S.return=v,S):(S=lg(x.type,x.key,x.props,null,v.mode,S),S.ref=ih(v,b,x),S.return=v,S)}function d(v,b,x,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=wx(x,v.mode,S),b.return=v,b):(b=r(b,x.children||[]),b.return=v,b)}function h(v,b,x,S,j){return b===null||b.tag!==7?(b=oc(x,v.mode,S,j),b.return=v,b):(b=r(b,x),b.return=v,b)}function f(v,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xx(""+b,v.mode,x),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wm:return x=lg(b.type,b.key,b.props,null,v.mode,x),x.ref=ih(v,null,b),x.return=v,x;case Kc:return b=wx(b,v.mode,x),b.return=v,b;case ba:var S=b._init;return f(v,S(b._payload),x)}if(gh(b)||eh(b))return b=oc(b,v.mode,x,null),b.return=v,b;Tm(v,b)}return null}function p(v,b,x,S){var j=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(v,b,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wm:return x.key===j?c(v,b,x,S):null;case Kc:return x.key===j?d(v,b,x,S):null;case ba:return j=x._init,p(v,b,j(x._payload),S)}if(gh(x)||eh(x))return j!==null?null:h(v,b,x,S,null);Tm(v,x)}return null}function m(v,b,x,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(x)||null,l(b,v,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wm:return v=v.get(S.key===null?x:S.key)||null,c(b,v,S,j);case Kc:return v=v.get(S.key===null?x:S.key)||null,d(b,v,S,j);case ba:var N=S._init;return m(v,b,x,N(S._payload),j)}if(gh(S)||eh(S))return v=v.get(x)||null,h(b,v,S,j,null);Tm(b,S)}return null}function y(v,b,x,S){for(var j=null,N=null,k=b,P=b=0,I=null;k!==null&&P<x.length;P++){k.index>P?(I=k,k=null):I=k.sibling;var T=p(v,k,x[P],S);if(T===null){k===null&&(k=I);break}s&&k&&T.alternate===null&&e(v,k),b=i(T,b,P),N===null?j=T:N.sibling=T,N=T,k=I}if(P===x.length)return t(v,k),dt&&Vo(v,P),j;if(k===null){for(;P<x.length;P++)k=f(v,x[P],S),k!==null&&(b=i(k,b,P),N===null?j=k:N.sibling=k,N=k);return dt&&Vo(v,P),j}for(k=n(v,k);P<x.length;P++)I=m(k,v,P,x[P],S),I!==null&&(s&&I.alternate!==null&&k.delete(I.key===null?P:I.key),b=i(I,b,P),N===null?j=I:N.sibling=I,N=I);return s&&k.forEach(function(M){return e(v,M)}),dt&&Vo(v,P),j}function g(v,b,x,S){var j=eh(x);if(typeof j!="function")throw Error(q(150));if(x=j.call(x),x==null)throw Error(q(151));for(var N=j=null,k=b,P=b=0,I=null,T=x.next();k!==null&&!T.done;P++,T=x.next()){k.index>P?(I=k,k=null):I=k.sibling;var M=p(v,k,T.value,S);if(M===null){k===null&&(k=I);break}s&&k&&M.alternate===null&&e(v,k),b=i(M,b,P),N===null?j=M:N.sibling=M,N=M,k=I}if(T.done)return t(v,k),dt&&Vo(v,P),j;if(k===null){for(;!T.done;P++,T=x.next())T=f(v,T.value,S),T!==null&&(b=i(T,b,P),N===null?j=T:N.sibling=T,N=T);return dt&&Vo(v,P),j}for(k=n(v,k);!T.done;P++,T=x.next())T=m(k,v,P,T.value,S),T!==null&&(s&&T.alternate!==null&&k.delete(T.key===null?P:T.key),b=i(T,b,P),N===null?j=T:N.sibling=T,N=T);return s&&k.forEach(function(U){return e(v,U)}),dt&&Vo(v,P),j}function w(v,b,x,S){if(typeof x=="object"&&x!==null&&x.type===Xc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case wm:e:{for(var j=x.key,N=b;N!==null;){if(N.key===j){if(j=x.type,j===Xc){if(N.tag===7){t(v,N.sibling),b=r(N,x.props.children),b.return=v,v=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ba&&gS(j)===N.type){t(v,N.sibling),b=r(N,x.props),b.ref=ih(v,N,x),b.return=v,v=b;break e}t(v,N);break}else e(v,N);N=N.sibling}x.type===Xc?(b=oc(x.props.children,v.mode,S,x.key),b.return=v,v=b):(S=lg(x.type,x.key,x.props,null,v.mode,S),S.ref=ih(v,b,x),S.return=v,v=S)}return a(v);case Kc:e:{for(N=x.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){t(v,b.sibling),b=r(b,x.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=wx(x,v.mode,S),b.return=v,v=b}return a(v);case ba:return N=x._init,w(v,b,N(x._payload),S)}if(gh(x))return y(v,b,x,S);if(eh(x))return g(v,b,x,S);Tm(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(t(v,b.sibling),b=r(b,x),b.return=v,v=b):(t(v,b),b=xx(x,v.mode,S),b.return=v,v=b),a(v)):t(v,b)}return w}var Pu=NE(!0),kE=NE(!1),nv=Ro(null),rv=null,nd=null,r_=null;function i_(){r_=nd=rv=null}function a_(s){var e=nv.current;at(nv),s._currentValue=e}function jw(s,e,t){for(;s!==null;){var n=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),s===t)break;s=s.return}}function hd(s,e){rv=s,r_=nd=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(Gs=!0),s.firstContext=null)}function qn(s){var e=s._currentValue;if(r_!==s)if(s={context:s,memoizedValue:e,next:null},nd===null){if(rv===null)throw Error(q(308));nd=s,rv.dependencies={lanes:0,firstContext:s}}else nd=nd.next=s;return e}var el=null;function o_(s){el===null?el=[s]:el.push(s)}function PE(s,e,t,n){var r=e.interleaved;return r===null?(t.next=t,o_(e)):(t.next=r.next,r.next=t),e.interleaved=t,sa(s,n)}function sa(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}var _a=!1;function l_(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TE(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ki(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(s,e,t){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,Me&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,sa(s,t)}return r=n.interleaved,r===null?(e.next=e,o_(n)):(e.next=r.next,r.next=e),n.interleaved=e,sa(s,t)}function sg(s,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,Gb(s,t)}}function vS(s,e){var t=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function iv(s,e,t,n){var r=s.updateQueue;_a=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=s.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;a=0,h=d=c=null,l=i;do{var p=l.lane,m=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=s,g=l;switch(p=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=vt({},f,p);break e;case 2:_a=!0}}l.callback!==null&&l.lane!==0&&(s.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=m,c=f):h=h.next=m,a|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);hc|=a,s.lanes=a,s.memoizedState=f}}function yS(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var n=s[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(q(191,r));r.call(n)}}}var lm={},si=Ro(lm),uf=Ro(lm),hf=Ro(lm);function tl(s){if(s===lm)throw Error(q(174));return s}function c_(s,e){switch(et(hf,e),et(uf,s),et(si,lm),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iw(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=iw(e,s)}at(si),et(si,e)}function Tu(){at(si),at(uf),at(hf)}function RE(s){tl(hf.current);var e=tl(si.current),t=iw(e,s.type);e!==t&&(et(uf,s),et(si,t))}function d_(s){uf.current===s&&(at(si),at(uf))}var ft=Ro(0);function av(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fx=[];function u_(){for(var s=0;s<fx.length;s++)fx[s]._workInProgressVersionPrimary=null;fx.length=0}var ng=la.ReactCurrentDispatcher,px=la.ReactCurrentBatchConfig,uc=0,mt=null,Lt=null,Wt=null,ov=!1,zh=!1,ff=0,uM=0;function rs(){throw Error(q(321))}function h_(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!br(s[t],e[t]))return!1;return!0}function f_(s,e,t,n,r,i){if(uc=i,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ng.current=s===null||s.memoizedState===null?mM:gM,s=t(n,r),zh){i=0;do{if(zh=!1,ff=0,25<=i)throw Error(q(301));i+=1,Wt=Lt=null,e.updateQueue=null,ng.current=vM,s=t(n,r)}while(zh)}if(ng.current=lv,e=Lt!==null&&Lt.next!==null,uc=0,Wt=Lt=mt=null,ov=!1,e)throw Error(q(300));return s}function p_(){var s=ff!==0;return ff=0,s}function Rr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?mt.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function Gn(){if(Lt===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var e=Wt===null?mt.memoizedState:Wt.next;if(e!==null)Wt=e,Lt=s;else{if(s===null)throw Error(q(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Wt===null?mt.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function pf(s,e){return typeof e=="function"?e(s):e}function mx(s){var e=Gn(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=s;var n=Lt,r=n.baseQueue,i=t.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}n.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((uc&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:s(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,mt.lanes|=h,hc|=h}d=d.next}while(d!==null&&d!==i);c===null?a=n:c.next=l,br(n,e.memoizedState)||(Gs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,t.lastRenderedState=n}if(s=t.interleaved,s!==null){r=s;do i=r.lane,mt.lanes|=i,hc|=i,r=r.next;while(r!==s)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gx(s){var e=Gn(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=s;var n=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do i=s(i,a.action),a=a.next;while(a!==r);br(i,e.memoizedState)||(Gs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function IE(){}function ME(s,e){var t=mt,n=Gn(),r=e(),i=!br(n.memoizedState,r);if(i&&(n.memoizedState=r,Gs=!0),n=n.queue,m_(OE.bind(null,t,n,s),[s]),n.getSnapshot!==e||i||Wt!==null&&Wt.memoizedState.tag&1){if(t.flags|=2048,mf(9,DE.bind(null,t,n,r,e),void 0,null),qt===null)throw Error(q(349));uc&30||LE(t,e,r)}return r}function LE(s,e,t){s.flags|=16384,s={getSnapshot:e,value:t},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[s]):(t=e.stores,t===null?e.stores=[s]:t.push(s))}function DE(s,e,t,n){e.value=t,e.getSnapshot=n,FE(e)&&$E(s)}function OE(s,e,t){return t(function(){FE(e)&&$E(s)})}function FE(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!br(s,t)}catch{return!0}}function $E(s){var e=sa(s,1);e!==null&&xr(e,s,1,-1)}function xS(s){var e=Rr();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pf,lastRenderedState:s},e.queue=s,s=s.dispatch=pM.bind(null,mt,s),[e.memoizedState,s]}function mf(s,e,t,n){return s={tag:s,create:e,destroy:t,deps:n,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(n=t.next,t.next=s,s.next=n,e.lastEffect=s)),s}function UE(){return Gn().memoizedState}function rg(s,e,t,n){var r=Rr();mt.flags|=s,r.memoizedState=mf(1|e,t,void 0,n===void 0?null:n)}function dy(s,e,t,n){var r=Gn();n=n===void 0?null:n;var i=void 0;if(Lt!==null){var a=Lt.memoizedState;if(i=a.destroy,n!==null&&h_(n,a.deps)){r.memoizedState=mf(e,t,i,n);return}}mt.flags|=s,r.memoizedState=mf(1|e,t,i,n)}function wS(s,e){return rg(8390656,8,s,e)}function m_(s,e){return dy(2048,8,s,e)}function BE(s,e){return dy(4,2,s,e)}function zE(s,e){return dy(4,4,s,e)}function HE(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function VE(s,e,t){return t=t!=null?t.concat([s]):null,dy(4,4,HE.bind(null,e,s),t)}function g_(){}function WE(s,e){var t=Gn();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&h_(e,n[1])?n[0]:(t.memoizedState=[s,e],s)}function qE(s,e){var t=Gn();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&h_(e,n[1])?n[0]:(s=s(),t.memoizedState=[s,e],s)}function GE(s,e,t){return uc&21?(br(t,e)||(t=Jj(),mt.lanes|=t,hc|=t,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,Gs=!0),s.memoizedState=t)}function hM(s,e){var t=qe;qe=t!==0&&4>t?t:4,s(!0);var n=px.transition;px.transition={};try{s(!1),e()}finally{qe=t,px.transition=n}}function KE(){return Gn().memoizedState}function fM(s,e,t){var n=fo(s);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},XE(s))YE(e,t);else if(t=PE(s,e,t,n),t!==null){var r=ks();xr(t,s,n,r),QE(t,e,n)}}function pM(s,e,t){var n=fo(s),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(XE(s))YE(e,r);else{var i=s.alternate;if(s.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,t);if(r.hasEagerState=!0,r.eagerState=l,br(l,a)){var c=e.interleaved;c===null?(r.next=r,o_(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=PE(s,e,r,n),t!==null&&(r=ks(),xr(t,s,n,r),QE(t,e,n))}}function XE(s){var e=s.alternate;return s===mt||e!==null&&e===mt}function YE(s,e){zh=ov=!0;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}function QE(s,e,t){if(t&4194240){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,Gb(s,t)}}var lv={readContext:qn,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useInsertionEffect:rs,useLayoutEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useMutableSource:rs,useSyncExternalStore:rs,useId:rs,unstable_isNewReconciler:!1},mM={readContext:qn,useCallback:function(s,e){return Rr().memoizedState=[s,e===void 0?null:e],s},useContext:qn,useEffect:wS,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,rg(4194308,4,HE.bind(null,e,s),t)},useLayoutEffect:function(s,e){return rg(4194308,4,s,e)},useInsertionEffect:function(s,e){return rg(4,2,s,e)},useMemo:function(s,e){var t=Rr();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var n=Rr();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},n.queue=s,s=s.dispatch=fM.bind(null,mt,s),[n.memoizedState,s]},useRef:function(s){var e=Rr();return s={current:s},e.memoizedState=s},useState:xS,useDebugValue:g_,useDeferredValue:function(s){return Rr().memoizedState=s},useTransition:function(){var s=xS(!1),e=s[0];return s=hM.bind(null,s[1]),Rr().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,t){var n=mt,r=Rr();if(dt){if(t===void 0)throw Error(q(407));t=t()}else{if(t=e(),qt===null)throw Error(q(349));uc&30||LE(n,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,wS(OE.bind(null,n,i,s),[s]),n.flags|=2048,mf(9,DE.bind(null,n,i,t,e),void 0,null),t},useId:function(){var s=Rr(),e=qt.identifierPrefix;if(dt){var t=Gi,n=qi;t=(n&~(1<<32-yr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=ff++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=uM++,e=":"+e+"r"+t.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},gM={readContext:qn,useCallback:WE,useContext:qn,useEffect:m_,useImperativeHandle:VE,useInsertionEffect:BE,useLayoutEffect:zE,useMemo:qE,useReducer:mx,useRef:UE,useState:function(){return mx(pf)},useDebugValue:g_,useDeferredValue:function(s){var e=Gn();return GE(e,Lt.memoizedState,s)},useTransition:function(){var s=mx(pf)[0],e=Gn().memoizedState;return[s,e]},useMutableSource:IE,useSyncExternalStore:ME,useId:KE,unstable_isNewReconciler:!1},vM={readContext:qn,useCallback:WE,useContext:qn,useEffect:m_,useImperativeHandle:VE,useInsertionEffect:BE,useLayoutEffect:zE,useMemo:qE,useReducer:gx,useRef:UE,useState:function(){return gx(pf)},useDebugValue:g_,useDeferredValue:function(s){var e=Gn();return Lt===null?e.memoizedState=s:GE(e,Lt.memoizedState,s)},useTransition:function(){var s=gx(pf)[0],e=Gn().memoizedState;return[s,e]},useMutableSource:IE,useSyncExternalStore:ME,useId:KE,unstable_isNewReconciler:!1};function er(s,e){if(s&&s.defaultProps){e=vt({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}function Ew(s,e,t,n){e=s.memoizedState,t=t(n,e),t=t==null?e:vt({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var uy={isMounted:function(s){return(s=s._reactInternals)?Ec(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var n=ks(),r=fo(s),i=Ki(n,r);i.payload=e,t!=null&&(i.callback=t),e=uo(s,i,r),e!==null&&(xr(e,s,r,n),sg(e,s,r))},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var n=ks(),r=fo(s),i=Ki(n,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=uo(s,i,r),e!==null&&(xr(e,s,r,n),sg(e,s,r))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=ks(),n=fo(s),r=Ki(t,n);r.tag=2,e!=null&&(r.callback=e),e=uo(s,r,n),e!==null&&(xr(e,s,n,t),sg(e,s,n))}};function bS(s,e,t,n,r,i,a){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!of(t,n)||!of(r,i):!0}function JE(s,e,t){var n=!1,r=wo,i=e.contextType;return typeof i=="object"&&i!==null?i=qn(i):(r=Xs(e)?cc:gs.current,n=e.contextTypes,i=(n=n!=null)?Nu(s,r):wo),e=new e(t,i),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uy,s.stateNode=e,e._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=i),e}function _S(s,e,t,n){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==s&&uy.enqueueReplaceState(e,e.state,null)}function Cw(s,e,t,n){var r=s.stateNode;r.props=t,r.state=s.memoizedState,r.refs={},l_(s);var i=e.contextType;typeof i=="object"&&i!==null?r.context=qn(i):(i=Xs(e)?cc:gs.current,r.context=Nu(s,i)),r.state=s.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ew(s,e,i,t),r.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&uy.enqueueReplaceState(r,r.state,null),iv(s,t,r,n),r.state=s.memoizedState),typeof r.componentDidMount=="function"&&(s.flags|=4194308)}function Ru(s,e){try{var t="",n=e;do t+=WR(n),n=n.return;while(n);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:s,source:e,stack:r,digest:null}}function vx(s,e,t){return{value:s,source:null,stack:t??null,digest:e??null}}function Nw(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var yM=typeof WeakMap=="function"?WeakMap:Map;function ZE(s,e,t){t=Ki(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){dv||(dv=!0,Fw=n),Nw(s,e)},t}function eC(s,e,t){t=Ki(-1,t),t.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){Nw(s,e)}}var i=s.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Nw(s,e),typeof n!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function SS(s,e,t){var n=s.pingCache;if(n===null){n=s.pingCache=new yM;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),s=RM.bind(null,s,e,t),e.then(s,s))}function AS(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function jS(s,e,t,n,r){return s.mode&1?(s.flags|=65536,s.lanes=r,s):(s===e?s.flags|=65536:(s.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ki(-1,1),e.tag=2,uo(t,e,1))),t.lanes|=1),s)}var xM=la.ReactCurrentOwner,Gs=!1;function Es(s,e,t,n){e.child=s===null?kE(e,null,t,n):Pu(e,s.child,t,n)}function ES(s,e,t,n,r){t=t.render;var i=e.ref;return hd(e,r),n=f_(s,e,t,n,i,r),t=p_(),s!==null&&!Gs?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,na(s,e,r)):(dt&&t&&t_(e),e.flags|=1,Es(s,e,n,r),e.child)}function CS(s,e,t,n,r){if(s===null){var i=t.type;return typeof i=="function"&&!A_(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,tC(s,e,i,n,r)):(s=lg(t.type,null,n,e,e.mode,r),s.ref=e.ref,s.return=e,e.child=s)}if(i=s.child,!(s.lanes&r)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:of,t(a,n)&&s.ref===e.ref)return na(s,e,r)}return e.flags|=1,s=po(i,n),s.ref=e.ref,s.return=e,e.child=s}function tC(s,e,t,n,r){if(s!==null){var i=s.memoizedProps;if(of(i,n)&&s.ref===e.ref)if(Gs=!1,e.pendingProps=n=i,(s.lanes&r)!==0)s.flags&131072&&(Gs=!0);else return e.lanes=s.lanes,na(s,e,r)}return kw(s,e,t,n,r)}function sC(s,e,t){var n=e.pendingProps,r=n.children,i=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(id,pn),pn|=t;else{if(!(t&1073741824))return s=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,et(id,pn),pn|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,et(id,pn),pn|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,et(id,pn),pn|=n;return Es(s,e,r,t),e.child}function nC(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function kw(s,e,t,n,r){var i=Xs(t)?cc:gs.current;return i=Nu(e,i),hd(e,r),t=f_(s,e,t,n,i,r),n=p_(),s!==null&&!Gs?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,na(s,e,r)):(dt&&n&&t_(e),e.flags|=1,Es(s,e,t,r),e.child)}function NS(s,e,t,n,r){if(Xs(t)){var i=!0;ev(e)}else i=!1;if(hd(e,r),e.stateNode===null)ig(s,e),JE(e,t,n),Cw(e,t,n,r),n=!0;else if(s===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=qn(d):(d=Xs(t)?cc:gs.current,d=Nu(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==d)&&_S(e,a,n,d),_a=!1;var p=e.memoizedState;a.state=p,iv(e,n,a,r),c=e.memoizedState,l!==n||p!==c||Ks.current||_a?(typeof h=="function"&&(Ew(e,t,h,n),c=e.memoizedState),(l=_a||bS(e,t,l,n,p,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,TE(s,e),l=e.memoizedProps,d=e.type===e.elementType?l:er(e.type,l),a.props=d,f=e.pendingProps,p=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=qn(c):(c=Xs(t)?cc:gs.current,c=Nu(e,c));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&_S(e,a,n,c),_a=!1,p=e.memoizedState,a.state=p,iv(e,n,a,r);var y=e.memoizedState;l!==f||p!==y||Ks.current||_a?(typeof m=="function"&&(Ew(e,t,m,n),y=e.memoizedState),(d=_a||bS(e,t,d,n,p,y,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===s.memoizedProps&&p===s.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&p===s.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=c,n=d):(typeof a.componentDidUpdate!="function"||l===s.memoizedProps&&p===s.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&p===s.memoizedState||(e.flags|=1024),n=!1)}return Pw(s,e,t,n,i,r)}function Pw(s,e,t,n,r,i){nC(s,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&fS(e,t,!1),na(s,e,i);n=e.stateNode,xM.current=e;var l=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,s!==null&&a?(e.child=Pu(e,s.child,null,i),e.child=Pu(e,null,l,i)):Es(s,e,l,i),e.memoizedState=n.state,r&&fS(e,t,!0),e.child}function rC(s){var e=s.stateNode;e.pendingContext?hS(s,e.pendingContext,e.pendingContext!==e.context):e.context&&hS(s,e.context,!1),c_(s,e.containerInfo)}function kS(s,e,t,n,r){return ku(),n_(r),e.flags|=256,Es(s,e,t,n),e.child}var Tw={dehydrated:null,treeContext:null,retryLane:0};function Rw(s){return{baseLanes:s,cachePool:null,transitions:null}}function iC(s,e,t){var n=e.pendingProps,r=ft.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=s!==null&&s.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(r|=1),et(ft,r&1),s===null)return Aw(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,s=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=py(a,n,0,null),s=oc(s,n,t,null),i.return=e,s.return=e,i.sibling=s,e.child=i,e.child.memoizedState=Rw(t),e.memoizedState=Tw,s):v_(e,a));if(r=s.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return wM(s,e,a,n,l,r,t);if(i){i=n.fallback,a=e.mode,r=s.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=po(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=po(l,i):(i=oc(i,a,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=s.child.memoizedState,a=a===null?Rw(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=s.childLanes&~t,e.memoizedState=Tw,n}return i=s.child,s=i.sibling,n=po(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,s!==null&&(t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)),e.child=n,e.memoizedState=null,n}function v_(s,e){return e=py({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function Rm(s,e,t,n){return n!==null&&n_(n),Pu(e,s.child,null,t),s=v_(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function wM(s,e,t,n,r,i,a){if(t)return e.flags&256?(e.flags&=-257,n=vx(Error(q(422))),Rm(s,e,a,n)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=py({mode:"visible",children:n.children},r,0,null),i=oc(i,r,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Pu(e,s.child,null,a),e.child.memoizedState=Rw(a),e.memoizedState=Tw,i);if(!(e.mode&1))return Rm(s,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(q(419)),n=vx(i,n,void 0),Rm(s,e,a,n)}if(l=(a&s.childLanes)!==0,Gs||l){if(n=qt,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,sa(s,r),xr(n,s,r,-1))}return S_(),n=vx(Error(q(421))),Rm(s,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=s.child,e=IM.bind(null,s),r._reactRetry=e,null):(s=i.treeContext,yn=co(r.nextSibling),xn=e,dt=!0,gr=null,s!==null&&(Fn[$n++]=qi,Fn[$n++]=Gi,Fn[$n++]=dc,qi=s.id,Gi=s.overflow,dc=e),e=v_(e,n.children),e.flags|=4096,e)}function PS(s,e,t){s.lanes|=e;var n=s.alternate;n!==null&&(n.lanes|=e),jw(s.return,e,t)}function yx(s,e,t,n,r){var i=s.memoizedState;i===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=r)}function aC(s,e,t){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(Es(s,e,n.children,t),n=ft.current,n&2)n=n&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&PS(s,t,e);else if(s.tag===19)PS(s,t,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(et(ft,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)s=t.alternate,s!==null&&av(s)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),yx(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(s=r.alternate,s!==null&&av(s)===null){e.child=r;break}s=r.sibling,r.sibling=t,t=r,r=s}yx(e,!0,t,null,i);break;case"together":yx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ig(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function na(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),hc|=e.lanes,!(t&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(q(153));if(e.child!==null){for(s=e.child,t=po(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=po(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}function bM(s,e,t){switch(e.tag){case 3:rC(e),ku();break;case 5:RE(e);break;case 1:Xs(e.type)&&ev(e);break;case 4:c_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;et(nv,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(et(ft,ft.current&1),e.flags|=128,null):t&e.child.childLanes?iC(s,e,t):(et(ft,ft.current&1),s=na(s,e,t),s!==null?s.sibling:null);et(ft,ft.current&1);break;case 19:if(n=(t&e.childLanes)!==0,s.flags&128){if(n)return aC(s,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),et(ft,ft.current),n)break;return null;case 22:case 23:return e.lanes=0,sC(s,e,t)}return na(s,e,t)}var oC,Iw,lC,cC;oC=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Iw=function(){};lC=function(s,e,t,n){var r=s.memoizedProps;if(r!==n){s=e.stateNode,tl(si.current);var i=null;switch(t){case"input":r=tw(s,r),n=tw(s,n),i=[];break;case"select":r=vt({},r,{value:void 0}),n=vt({},n,{value:void 0}),i=[];break;case"textarea":r=rw(s,r),n=rw(s,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=Jg)}aw(t,n);var a;t=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Zh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(i||(i=[]),i.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Zh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&rt("scroll",s),i||l===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};cC=function(s,e,t,n){t!==n&&(e.flags|=4)};function ah(s,e){if(!dt)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function is(s){var e=s.alternate!==null&&s.alternate.child===s.child,t=0,n=0;if(e)for(var r=s.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=s,r=r.sibling;else for(r=s.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=s,r=r.sibling;return s.subtreeFlags|=n,s.childLanes=t,e}function _M(s,e,t){var n=e.pendingProps;switch(s_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(e),null;case 1:return Xs(e.type)&&Zg(),is(e),null;case 3:return n=e.stateNode,Tu(),at(Ks),at(gs),u_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(Pm(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(Bw(gr),gr=null))),Iw(s,e),is(e),null;case 5:d_(e);var r=tl(hf.current);if(t=e.type,s!==null&&e.stateNode!=null)lC(s,e,t,n,r),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(q(166));return is(e),null}if(s=tl(si.current),Pm(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[Qr]=e,n[df]=i,s=(e.mode&1)!==0,t){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(r=0;r<yh.length;r++)rt(yh[r],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":$1(n,i),rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},rt("invalid",n);break;case"textarea":B1(n,i),rt("invalid",n)}aw(t,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&km(n.textContent,l,s),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&km(n.textContent,l,s),r=["children",""+l]):Zh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&rt("scroll",n)}switch(t){case"input":bm(n),U1(n,i,!0);break;case"textarea":bm(n),z1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Jg)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Oj(t)),s==="http://www.w3.org/1999/xhtml"?t==="script"?(s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=a.createElement(t,{is:n.is}):(s=a.createElement(t),t==="select"&&(a=s,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):s=a.createElementNS(s,t),s[Qr]=e,s[df]=n,oC(s,e,!1,!1),e.stateNode=s;e:{switch(a=ow(t,n),t){case"dialog":rt("cancel",s),rt("close",s),r=n;break;case"iframe":case"object":case"embed":rt("load",s),r=n;break;case"video":case"audio":for(r=0;r<yh.length;r++)rt(yh[r],s);r=n;break;case"source":rt("error",s),r=n;break;case"img":case"image":case"link":rt("error",s),rt("load",s),r=n;break;case"details":rt("toggle",s),r=n;break;case"input":$1(s,n),r=tw(s,n),rt("invalid",s);break;case"option":r=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},r=vt({},n,{value:void 0}),rt("invalid",s);break;case"textarea":B1(s,n),r=rw(s,n),rt("invalid",s);break;default:r=n}aw(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Uj(s,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fj(s,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&ef(s,c):typeof c=="number"&&ef(s,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rt("scroll",s):c!=null&&Bb(s,i,c,a))}switch(t){case"input":bm(s),U1(s,n,!1);break;case"textarea":bm(s),z1(s);break;case"option":n.value!=null&&s.setAttribute("value",""+xo(n.value));break;case"select":s.multiple=!!n.multiple,i=n.value,i!=null?ld(s,!!n.multiple,i,!1):n.defaultValue!=null&&ld(s,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(s.onclick=Jg)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return is(e),null;case 6:if(s&&e.stateNode!=null)cC(s,e,s.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(q(166));if(t=tl(hf.current),tl(si.current),Pm(e)){if(n=e.stateNode,t=e.memoizedProps,n[Qr]=e,(i=n.nodeValue!==t)&&(s=xn,s!==null))switch(s.tag){case 3:km(n.nodeValue,t,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&km(n.nodeValue,t,(s.mode&1)!==0)}i&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Qr]=e,e.stateNode=n}return is(e),null;case 13:if(at(ft),n=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(dt&&yn!==null&&e.mode&1&&!(e.flags&128))CE(),ku(),e.flags|=98560,i=!1;else if(i=Pm(e),n!==null&&n.dehydrated!==null){if(s===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Qr]=e}else ku(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;is(e),i=!1}else gr!==null&&(Bw(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(s===null||ft.current&1?Dt===0&&(Dt=3):S_())),e.updateQueue!==null&&(e.flags|=4),is(e),null);case 4:return Tu(),Iw(s,e),s===null&&lf(e.stateNode.containerInfo),is(e),null;case 10:return a_(e.type._context),is(e),null;case 17:return Xs(e.type)&&Zg(),is(e),null;case 19:if(at(ft),i=e.memoizedState,i===null)return is(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)ah(i,!1);else{if(Dt!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(a=av(s),a!==null){for(e.flags|=128,ah(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,s=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return et(ft,ft.current&1|2),e.child}s=s.sibling}i.tail!==null&&St()>Iu&&(e.flags|=128,n=!0,ah(i,!1),e.lanes=4194304)}else{if(!n)if(s=av(a),s!==null){if(e.flags|=128,n=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ah(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!dt)return is(e),null}else 2*St()-i.renderingStartTime>Iu&&t!==1073741824&&(e.flags|=128,n=!0,ah(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=St(),e.sibling=null,t=ft.current,et(ft,n?t&1|2:t&1),e):(is(e),null);case 22:case 23:return __(),n=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pn&1073741824&&(is(e),e.subtreeFlags&6&&(e.flags|=8192)):is(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function SM(s,e){switch(s_(e),e.tag){case 1:return Xs(e.type)&&Zg(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return Tu(),at(Ks),at(gs),u_(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return d_(e),null;case 13:if(at(ft),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ku()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return at(ft),null;case 4:return Tu(),null;case 10:return a_(e.type._context),null;case 22:case 23:return __(),null;case 24:return null;default:return null}}var Im=!1,ps=!1,AM=typeof WeakSet=="function"?WeakSet:Set,ne=null;function rd(s,e){var t=s.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){wt(s,e,n)}else t.current=null}function Mw(s,e,t){try{t()}catch(n){wt(s,e,n)}}var TS=!1;function jM(s,e){if(vw=Xg,s=pE(),e_(s)){if("selectionStart"in s)var t={start:s.selectionStart,end:s.selectionEnd};else e:{t=(t=s.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=s,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(l=a+r),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===s)break t;if(p===t&&++d===r&&(l=a),p===i&&++h===n&&(c=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(yw={focusedElem:s,selectionRange:t},Xg=!1,ne=e;ne!==null;)if(e=ne,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,ne=s;else for(;ne!==null;){e=ne;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:er(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(S){wt(e,e.return,S)}if(s=e.sibling,s!==null){s.return=e.return,ne=s;break}ne=e.return}return y=TS,TS=!1,y}function Hh(s,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&s)===s){var i=r.destroy;r.destroy=void 0,i!==void 0&&Mw(e,t,i)}r=r.next}while(r!==n)}}function hy(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&s)===s){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function Lw(s){var e=s.ref;if(e!==null){var t=s.stateNode;switch(s.tag){case 5:s=t;break;default:s=t}typeof e=="function"?e(s):e.current=s}}function dC(s){var e=s.alternate;e!==null&&(s.alternate=null,dC(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Qr],delete e[df],delete e[bw],delete e[oM],delete e[lM])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function uC(s){return s.tag===5||s.tag===3||s.tag===4}function RS(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||uC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Dw(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Jg));else if(n!==4&&(s=s.child,s!==null))for(Dw(s,e,t),s=s.sibling;s!==null;)Dw(s,e,t),s=s.sibling}function Ow(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.insertBefore(s,e):t.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(Ow(s,e,t),s=s.sibling;s!==null;)Ow(s,e,t),s=s.sibling}var Jt=null,pr=!1;function fa(s,e,t){for(t=t.child;t!==null;)hC(s,e,t),t=t.sibling}function hC(s,e,t){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(ry,t)}catch{}switch(t.tag){case 5:ps||rd(t,e);case 6:var n=Jt,r=pr;Jt=null,fa(s,e,t),Jt=n,pr=r,Jt!==null&&(pr?(s=Jt,t=t.stateNode,s.nodeType===8?s.parentNode.removeChild(t):s.removeChild(t)):Jt.removeChild(t.stateNode));break;case 18:Jt!==null&&(pr?(s=Jt,t=t.stateNode,s.nodeType===8?ux(s.parentNode,t):s.nodeType===1&&ux(s,t),rf(s)):ux(Jt,t.stateNode));break;case 4:n=Jt,r=pr,Jt=t.stateNode.containerInfo,pr=!0,fa(s,e,t),Jt=n,pr=r;break;case 0:case 11:case 14:case 15:if(!ps&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Mw(t,e,a),r=r.next}while(r!==n)}fa(s,e,t);break;case 1:if(!ps&&(rd(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(l){wt(t,e,l)}fa(s,e,t);break;case 21:fa(s,e,t);break;case 22:t.mode&1?(ps=(n=ps)||t.memoizedState!==null,fa(s,e,t),ps=n):fa(s,e,t);break;default:fa(s,e,t)}}function IS(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new AM),e.forEach(function(n){var r=MM.bind(null,s,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Yn(s,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var i=s,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Jt=l.stateNode,pr=!1;break e;case 3:Jt=l.stateNode.containerInfo,pr=!0;break e;case 4:Jt=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(Jt===null)throw Error(q(160));hC(i,a,r),Jt=null,pr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){wt(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fC(e,s),e=e.sibling}function fC(s,e){var t=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Yn(e,s),Cr(s),n&4){try{Hh(3,s,s.return),hy(3,s)}catch(g){wt(s,s.return,g)}try{Hh(5,s,s.return)}catch(g){wt(s,s.return,g)}}break;case 1:Yn(e,s),Cr(s),n&512&&t!==null&&rd(t,t.return);break;case 5:if(Yn(e,s),Cr(s),n&512&&t!==null&&rd(t,t.return),s.flags&32){var r=s.stateNode;try{ef(r,"")}catch(g){wt(s,s.return,g)}}if(n&4&&(r=s.stateNode,r!=null)){var i=s.memoizedProps,a=t!==null?t.memoizedProps:i,l=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Lj(r,i),ow(l,a);var d=ow(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?Uj(r,f):h==="dangerouslySetInnerHTML"?Fj(r,f):h==="children"?ef(r,f):Bb(r,h,f,d)}switch(l){case"input":sw(r,i);break;case"textarea":Dj(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ld(r,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?ld(r,!!i.multiple,i.defaultValue,!0):ld(r,!!i.multiple,i.multiple?[]:"",!1))}r[df]=i}catch(g){wt(s,s.return,g)}}break;case 6:if(Yn(e,s),Cr(s),n&4){if(s.stateNode===null)throw Error(q(162));r=s.stateNode,i=s.memoizedProps;try{r.nodeValue=i}catch(g){wt(s,s.return,g)}}break;case 3:if(Yn(e,s),Cr(s),n&4&&t!==null&&t.memoizedState.isDehydrated)try{rf(e.containerInfo)}catch(g){wt(s,s.return,g)}break;case 4:Yn(e,s),Cr(s);break;case 13:Yn(e,s),Cr(s),r=s.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(w_=St())),n&4&&IS(s);break;case 22:if(h=t!==null&&t.memoizedState!==null,s.mode&1?(ps=(d=ps)||h,Yn(e,s),ps=d):Yn(e,s),Cr(s),n&8192){if(d=s.memoizedState!==null,(s.stateNode.isHidden=d)&&!h&&s.mode&1)for(ne=s,h=s.child;h!==null;){for(f=ne=h;ne!==null;){switch(p=ne,m=p.child,p.tag){case 0:case 11:case 14:case 15:Hh(4,p,p.return);break;case 1:rd(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,t=p.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){wt(n,t,g)}}break;case 5:rd(p,p.return);break;case 22:if(p.memoizedState!==null){LS(f);continue}}m!==null?(m.return=p,ne=m):LS(f)}h=h.sibling}e:for(h=null,f=s;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$j("display",a))}catch(g){wt(s,s.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){wt(s,s.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===s)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yn(e,s),Cr(s),n&4&&IS(s);break;case 21:break;default:Yn(e,s),Cr(s)}}function Cr(s){var e=s.flags;if(e&2){try{e:{for(var t=s.return;t!==null;){if(uC(t)){var n=t;break e}t=t.return}throw Error(q(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(ef(r,""),n.flags&=-33);var i=RS(s);Ow(s,i,r);break;case 3:case 4:var a=n.stateNode.containerInfo,l=RS(s);Dw(s,l,a);break;default:throw Error(q(161))}}catch(c){wt(s,s.return,c)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function EM(s,e,t){ne=s,pC(s)}function pC(s,e,t){for(var n=(s.mode&1)!==0;ne!==null;){var r=ne,i=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||Im;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||ps;l=Im;var d=ps;if(Im=a,(ps=c)&&!d)for(ne=r;ne!==null;)a=ne,c=a.child,a.tag===22&&a.memoizedState!==null?DS(r):c!==null?(c.return=a,ne=c):DS(r);for(;i!==null;)ne=i,pC(i),i=i.sibling;ne=r,Im=l,ps=d}MS(s)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ne=i):MS(s)}}function MS(s){for(;ne!==null;){var e=ne;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ps||hy(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ps)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:er(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yS(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}yS(e,a,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&rf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ps||e.flags&512&&Lw(e)}catch(p){wt(e,e.return,p)}}if(e===s){ne=null;break}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}}function LS(s){for(;ne!==null;){var e=ne;if(e===s){ne=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ne=t;break}ne=e.return}}function DS(s){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hy(4,e)}catch(c){wt(e,t,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){wt(e,r,c)}}var i=e.return;try{Lw(e)}catch(c){wt(e,i,c)}break;case 5:var a=e.return;try{Lw(e)}catch(c){wt(e,a,c)}}}catch(c){wt(e,e.return,c)}if(e===s){ne=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ne=l;break}ne=e.return}}var CM=Math.ceil,cv=la.ReactCurrentDispatcher,y_=la.ReactCurrentOwner,Hn=la.ReactCurrentBatchConfig,Me=0,qt=null,Et=null,ts=0,pn=0,id=Ro(0),Dt=0,gf=null,hc=0,fy=0,x_=0,Vh=null,Hs=null,w_=0,Iu=1/0,mi=null,dv=!1,Fw=null,ho=null,Mm=!1,ro=null,uv=0,Wh=0,$w=null,ag=-1,og=0;function ks(){return Me&6?St():ag!==-1?ag:ag=St()}function fo(s){return s.mode&1?Me&2&&ts!==0?ts&-ts:dM.transition!==null?(og===0&&(og=Jj()),og):(s=qe,s!==0||(s=window.event,s=s===void 0?16:iE(s.type)),s):1}function xr(s,e,t,n){if(50<Wh)throw Wh=0,$w=null,Error(q(185));im(s,t,n),(!(Me&2)||s!==qt)&&(s===qt&&(!(Me&2)&&(fy|=t),Dt===4&&Aa(s,ts)),Ys(s,n),t===1&&Me===0&&!(e.mode&1)&&(Iu=St()+500,cy&&Io()))}function Ys(s,e){var t=s.callbackNode;dI(s,e);var n=Kg(s,s===qt?ts:0);if(n===0)t!==null&&W1(t),s.callbackNode=null,s.callbackPriority=0;else if(e=n&-n,s.callbackPriority!==e){if(t!=null&&W1(t),e===1)s.tag===0?cM(OS.bind(null,s)):AE(OS.bind(null,s)),iM(function(){!(Me&6)&&Io()}),t=null;else{switch(Zj(n)){case 1:t=qb;break;case 4:t=Yj;break;case 16:t=Gg;break;case 536870912:t=Qj;break;default:t=Gg}t=_C(t,mC.bind(null,s))}s.callbackPriority=e,s.callbackNode=t}}function mC(s,e){if(ag=-1,og=0,Me&6)throw Error(q(327));var t=s.callbackNode;if(fd()&&s.callbackNode!==t)return null;var n=Kg(s,s===qt?ts:0);if(n===0)return null;if(n&30||n&s.expiredLanes||e)e=hv(s,n);else{e=n;var r=Me;Me|=2;var i=vC();(qt!==s||ts!==e)&&(mi=null,Iu=St()+500,ac(s,e));do try{PM();break}catch(l){gC(s,l)}while(!0);i_(),cv.current=i,Me=r,Et!==null?e=0:(qt=null,ts=0,e=Dt)}if(e!==0){if(e===2&&(r=hw(s),r!==0&&(n=r,e=Uw(s,r))),e===1)throw t=gf,ac(s,0),Aa(s,n),Ys(s,St()),t;if(e===6)Aa(s,n);else{if(r=s.current.alternate,!(n&30)&&!NM(r)&&(e=hv(s,n),e===2&&(i=hw(s),i!==0&&(n=i,e=Uw(s,i))),e===1))throw t=gf,ac(s,0),Aa(s,n),Ys(s,St()),t;switch(s.finishedWork=r,s.finishedLanes=n,e){case 0:case 1:throw Error(q(345));case 2:Wo(s,Hs,mi);break;case 3:if(Aa(s,n),(n&130023424)===n&&(e=w_+500-St(),10<e)){if(Kg(s,0)!==0)break;if(r=s.suspendedLanes,(r&n)!==n){ks(),s.pingedLanes|=s.suspendedLanes&r;break}s.timeoutHandle=ww(Wo.bind(null,s,Hs,mi),e);break}Wo(s,Hs,mi);break;case 4:if(Aa(s,n),(n&4194240)===n)break;for(e=s.eventTimes,r=-1;0<n;){var a=31-yr(n);i=1<<a,a=e[a],a>r&&(r=a),n&=~i}if(n=r,n=St()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CM(n/1960))-n,10<n){s.timeoutHandle=ww(Wo.bind(null,s,Hs,mi),n);break}Wo(s,Hs,mi);break;case 5:Wo(s,Hs,mi);break;default:throw Error(q(329))}}}return Ys(s,St()),s.callbackNode===t?mC.bind(null,s):null}function Uw(s,e){var t=Vh;return s.current.memoizedState.isDehydrated&&(ac(s,e).flags|=256),s=hv(s,e),s!==2&&(e=Hs,Hs=t,e!==null&&Bw(e)),s}function Bw(s){Hs===null?Hs=s:Hs.push.apply(Hs,s)}function NM(s){for(var e=s;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],i=r.getSnapshot;r=r.value;try{if(!br(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Aa(s,e){for(e&=~x_,e&=~fy,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-yr(e),n=1<<t;s[t]=-1,e&=~n}}function OS(s){if(Me&6)throw Error(q(327));fd();var e=Kg(s,0);if(!(e&1))return Ys(s,St()),null;var t=hv(s,e);if(s.tag!==0&&t===2){var n=hw(s);n!==0&&(e=n,t=Uw(s,n))}if(t===1)throw t=gf,ac(s,0),Aa(s,e),Ys(s,St()),t;if(t===6)throw Error(q(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Wo(s,Hs,mi),Ys(s,St()),null}function b_(s,e){var t=Me;Me|=1;try{return s(e)}finally{Me=t,Me===0&&(Iu=St()+500,cy&&Io())}}function fc(s){ro!==null&&ro.tag===0&&!(Me&6)&&fd();var e=Me;Me|=1;var t=Hn.transition,n=qe;try{if(Hn.transition=null,qe=1,s)return s()}finally{qe=n,Hn.transition=t,Me=e,!(Me&6)&&Io()}}function __(){pn=id.current,at(id)}function ac(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,rM(t)),Et!==null)for(t=Et.return;t!==null;){var n=t;switch(s_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zg();break;case 3:Tu(),at(Ks),at(gs),u_();break;case 5:d_(n);break;case 4:Tu();break;case 13:at(ft);break;case 19:at(ft);break;case 10:a_(n.type._context);break;case 22:case 23:__()}t=t.return}if(qt=s,Et=s=po(s.current,null),ts=pn=e,Dt=0,gf=null,x_=fy=hc=0,Hs=Vh=null,el!==null){for(e=0;e<el.length;e++)if(t=el[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,i=t.pending;if(i!==null){var a=i.next;i.next=r,n.next=a}t.pending=n}el=null}return s}function gC(s,e){do{var t=Et;try{if(i_(),ng.current=lv,ov){for(var n=mt.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ov=!1}if(uc=0,Wt=Lt=mt=null,zh=!1,ff=0,y_.current=null,t===null||t.return===null){Dt=1,gf=e,Et=null;break}e:{var i=s,a=t.return,l=t,c=e;if(e=ts,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=AS(a);if(m!==null){m.flags&=-257,jS(m,a,l,i,e),m.mode&1&&SS(i,d,e),e=m,c=d;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){SS(i,d,e),S_();break e}c=Error(q(426))}}else if(dt&&l.mode&1){var w=AS(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jS(w,a,l,i,e),n_(Ru(c,l));break e}}i=c=Ru(c,l),Dt!==4&&(Dt=2),Vh===null?Vh=[i]:Vh.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=ZE(i,c,e);vS(i,v);break e;case 1:l=c;var b=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ho===null||!ho.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=eC(i,l,e);vS(i,S);break e}}i=i.return}while(i!==null)}xC(t)}catch(j){e=j,Et===t&&t!==null&&(Et=t=t.return);continue}break}while(!0)}function vC(){var s=cv.current;return cv.current=lv,s===null?lv:s}function S_(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),qt===null||!(hc&268435455)&&!(fy&268435455)||Aa(qt,ts)}function hv(s,e){var t=Me;Me|=2;var n=vC();(qt!==s||ts!==e)&&(mi=null,ac(s,e));do try{kM();break}catch(r){gC(s,r)}while(!0);if(i_(),Me=t,cv.current=n,Et!==null)throw Error(q(261));return qt=null,ts=0,Dt}function kM(){for(;Et!==null;)yC(Et)}function PM(){for(;Et!==null&&!tI();)yC(Et)}function yC(s){var e=bC(s.alternate,s,pn);s.memoizedProps=s.pendingProps,e===null?xC(s):Et=e,y_.current=null}function xC(s){var e=s;do{var t=e.alternate;if(s=e.return,e.flags&32768){if(t=SM(t,e),t!==null){t.flags&=32767,Et=t;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Dt=6,Et=null;return}}else if(t=_M(t,e,pn),t!==null){Et=t;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=s}while(e!==null);Dt===0&&(Dt=5)}function Wo(s,e,t){var n=qe,r=Hn.transition;try{Hn.transition=null,qe=1,TM(s,e,t,n)}finally{Hn.transition=r,qe=n}return null}function TM(s,e,t,n){do fd();while(ro!==null);if(Me&6)throw Error(q(327));t=s.finishedWork;var r=s.finishedLanes;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(q(177));s.callbackNode=null,s.callbackPriority=0;var i=t.lanes|t.childLanes;if(uI(s,i),s===qt&&(Et=qt=null,ts=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Mm||(Mm=!0,_C(Gg,function(){return fd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Hn.transition,Hn.transition=null;var a=qe;qe=1;var l=Me;Me|=4,y_.current=null,jM(s,t),fC(t,s),QI(yw),Xg=!!vw,yw=vw=null,s.current=t,EM(t),sI(),Me=l,qe=a,Hn.transition=i}else s.current=t;if(Mm&&(Mm=!1,ro=s,uv=r),i=s.pendingLanes,i===0&&(ho=null),iI(t.stateNode),Ys(s,St()),e!==null)for(n=s.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(dv)throw dv=!1,s=Fw,Fw=null,s;return uv&1&&s.tag!==0&&fd(),i=s.pendingLanes,i&1?s===$w?Wh++:(Wh=0,$w=s):Wh=0,Io(),null}function fd(){if(ro!==null){var s=Zj(uv),e=Hn.transition,t=qe;try{if(Hn.transition=null,qe=16>s?16:s,ro===null)var n=!1;else{if(s=ro,ro=null,uv=0,Me&6)throw Error(q(331));var r=Me;for(Me|=4,ne=s.current;ne!==null;){var i=ne,a=i.child;if(ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ne=d;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Hh(8,h,i)}var f=h.child;if(f!==null)f.return=h,ne=f;else for(;ne!==null;){h=ne;var p=h.sibling,m=h.return;if(dC(h),h===d){ne=null;break}if(p!==null){p.return=m,ne=p;break}ne=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ne=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ne=a;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hh(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ne=v;break e}ne=i.return}}var b=s.current;for(ne=b;ne!==null;){a=ne;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ne=x;else e:for(a=b;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hy(9,l)}}catch(j){wt(l,l.return,j)}if(l===a){ne=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ne=S;break e}ne=l.return}}if(Me=r,Io(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(ry,s)}catch{}n=!0}return n}finally{qe=t,Hn.transition=e}}return!1}function FS(s,e,t){e=Ru(t,e),e=ZE(s,e,1),s=uo(s,e,1),e=ks(),s!==null&&(im(s,1,e),Ys(s,e))}function wt(s,e,t){if(s.tag===3)FS(s,s,t);else for(;e!==null;){if(e.tag===3){FS(e,s,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ho===null||!ho.has(n))){s=Ru(t,s),s=eC(e,s,1),e=uo(e,s,1),s=ks(),e!==null&&(im(e,1,s),Ys(e,s));break}}e=e.return}}function RM(s,e,t){var n=s.pingCache;n!==null&&n.delete(e),e=ks(),s.pingedLanes|=s.suspendedLanes&t,qt===s&&(ts&t)===t&&(Dt===4||Dt===3&&(ts&130023424)===ts&&500>St()-w_?ac(s,0):x_|=t),Ys(s,e)}function wC(s,e){e===0&&(s.mode&1?(e=Am,Am<<=1,!(Am&130023424)&&(Am=4194304)):e=1);var t=ks();s=sa(s,e),s!==null&&(im(s,e,t),Ys(s,t))}function IM(s){var e=s.memoizedState,t=0;e!==null&&(t=e.retryLane),wC(s,t)}function MM(s,e){var t=0;switch(s.tag){case 13:var n=s.stateNode,r=s.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(e),wC(s,t)}var bC;bC=function(s,e,t){if(s!==null)if(s.memoizedProps!==e.pendingProps||Ks.current)Gs=!0;else{if(!(s.lanes&t)&&!(e.flags&128))return Gs=!1,bM(s,e,t);Gs=!!(s.flags&131072)}else Gs=!1,dt&&e.flags&1048576&&jE(e,sv,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ig(s,e),s=e.pendingProps;var r=Nu(e,gs.current);hd(e,t),r=f_(null,e,n,s,r,t);var i=p_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xs(n)?(i=!0,ev(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,l_(e),r.updater=uy,e.stateNode=r,r._reactInternals=e,Cw(e,n,s,t),e=Pw(null,e,n,!0,i,t)):(e.tag=0,dt&&i&&t_(e),Es(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(ig(s,e),s=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=DM(n),s=er(n,s),r){case 0:e=kw(null,e,n,s,t);break e;case 1:e=NS(null,e,n,s,t);break e;case 11:e=ES(null,e,n,s,t);break e;case 14:e=CS(null,e,n,er(n.type,s),t);break e}throw Error(q(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:er(n,r),kw(s,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:er(n,r),NS(s,e,n,r,t);case 3:e:{if(rC(e),s===null)throw Error(q(387));n=e.pendingProps,i=e.memoizedState,r=i.element,TE(s,e),iv(e,n,null,t);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ru(Error(q(423)),e),e=kS(s,e,n,t,r);break e}else if(n!==r){r=Ru(Error(q(424)),e),e=kS(s,e,n,t,r);break e}else for(yn=co(e.stateNode.containerInfo.firstChild),xn=e,dt=!0,gr=null,t=kE(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ku(),n===r){e=na(s,e,t);break e}Es(s,e,n,t)}e=e.child}return e;case 5:return RE(e),s===null&&Aw(e),n=e.type,r=e.pendingProps,i=s!==null?s.memoizedProps:null,a=r.children,xw(n,r)?a=null:i!==null&&xw(n,i)&&(e.flags|=32),nC(s,e),Es(s,e,a,t),e.child;case 6:return s===null&&Aw(e),null;case 13:return iC(s,e,t);case 4:return c_(e,e.stateNode.containerInfo),n=e.pendingProps,s===null?e.child=Pu(e,null,n,t):Es(s,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:er(n,r),ES(s,e,n,r,t);case 7:return Es(s,e,e.pendingProps,t),e.child;case 8:return Es(s,e,e.pendingProps.children,t),e.child;case 12:return Es(s,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,et(nv,n._currentValue),n._currentValue=a,i!==null)if(br(i.value,a)){if(i.children===r.children&&!Ks.current){e=na(s,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ki(-1,t&-t),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),jw(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),jw(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Es(s,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,hd(e,t),r=qn(r),n=n(r),e.flags|=1,Es(s,e,n,t),e.child;case 14:return n=e.type,r=er(n,e.pendingProps),r=er(n.type,r),CS(s,e,n,r,t);case 15:return tC(s,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:er(n,r),ig(s,e),e.tag=1,Xs(n)?(s=!0,ev(e)):s=!1,hd(e,t),JE(e,n,r),Cw(e,n,r,t),Pw(null,e,n,!0,s,t);case 19:return aC(s,e,t);case 22:return sC(s,e,t)}throw Error(q(156,e.tag))};function _C(s,e){return Xj(s,e)}function LM(s,e,t,n){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(s,e,t,n){return new LM(s,e,t,n)}function A_(s){return s=s.prototype,!(!s||!s.isReactComponent)}function DM(s){if(typeof s=="function")return A_(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Hb)return 11;if(s===Vb)return 14}return 2}function po(s,e){var t=s.alternate;return t===null?(t=zn(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=s.flags&14680064,t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function lg(s,e,t,n,r,i){var a=2;if(n=s,typeof s=="function")A_(s)&&(a=1);else if(typeof s=="string")a=5;else e:switch(s){case Xc:return oc(t.children,r,i,e);case zb:a=8,r|=8;break;case Qx:return s=zn(12,t,e,r|2),s.elementType=Qx,s.lanes=i,s;case Jx:return s=zn(13,t,e,r),s.elementType=Jx,s.lanes=i,s;case Zx:return s=zn(19,t,e,r),s.elementType=Zx,s.lanes=i,s;case Rj:return py(t,r,i,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Pj:a=10;break e;case Tj:a=9;break e;case Hb:a=11;break e;case Vb:a=14;break e;case ba:a=16,n=null;break e}throw Error(q(130,s==null?s:typeof s,""))}return e=zn(a,t,e,r),e.elementType=s,e.type=n,e.lanes=i,e}function oc(s,e,t,n){return s=zn(7,s,n,e),s.lanes=t,s}function py(s,e,t,n){return s=zn(22,s,n,e),s.elementType=Rj,s.lanes=t,s.stateNode={isHidden:!1},s}function xx(s,e,t){return s=zn(6,s,null,e),s.lanes=t,s}function wx(s,e,t){return e=zn(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function OM(s,e,t,n,r){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ex(0),this.expirationTimes=ex(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ex(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function j_(s,e,t,n,r,i,a,l,c){return s=new OM(s,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zn(3,null,null,e),s.current=i,i.stateNode=s,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},l_(i),s}function FM(s,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kc,key:n==null?null:""+n,children:s,containerInfo:e,implementation:t}}function SC(s){if(!s)return wo;s=s._reactInternals;e:{if(Ec(s)!==s||s.tag!==1)throw Error(q(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(s.tag===1){var t=s.type;if(Xs(t))return SE(s,t,e)}return e}function AC(s,e,t,n,r,i,a,l,c){return s=j_(t,n,!0,s,r,i,a,l,c),s.context=SC(null),t=s.current,n=ks(),r=fo(t),i=Ki(n,r),i.callback=e??null,uo(t,i,r),s.current.lanes=r,im(s,r,n),Ys(s,n),s}function my(s,e,t,n){var r=e.current,i=ks(),a=fo(r);return t=SC(t),e.context===null?e.context=t:e.pendingContext=t,e=Ki(i,a),e.payload={element:s},n=n===void 0?null:n,n!==null&&(e.callback=n),s=uo(r,e,a),s!==null&&(xr(s,r,a,i),sg(s,r,a)),a}function fv(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function $S(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function E_(s,e){$S(s,e),(s=s.alternate)&&$S(s,e)}function $M(){return null}var jC=typeof reportError=="function"?reportError:function(s){console.error(s)};function C_(s){this._internalRoot=s}gy.prototype.render=C_.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(q(409));my(s,e,null,null)};gy.prototype.unmount=C_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;fc(function(){my(null,s,null,null)}),e[ta]=null}};function gy(s){this._internalRoot=s}gy.prototype.unstable_scheduleHydration=function(s){if(s){var e=sE();s={blockedOn:null,target:s,priority:e};for(var t=0;t<Sa.length&&e!==0&&e<Sa[t].priority;t++);Sa.splice(t,0,s),t===0&&rE(s)}};function N_(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function vy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function US(){}function UM(s,e,t,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=fv(a);i.call(d)}}var a=AC(e,n,s,0,null,!1,!1,"",US);return s._reactRootContainer=a,s[ta]=a.current,lf(s.nodeType===8?s.parentNode:s),fc(),a}for(;r=s.lastChild;)s.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=fv(c);l.call(d)}}var c=j_(s,0,!1,null,null,!1,!1,"",US);return s._reactRootContainer=c,s[ta]=c.current,lf(s.nodeType===8?s.parentNode:s),fc(function(){my(e,c,t,n)}),c}function yy(s,e,t,n,r){var i=t._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=fv(a);l.call(c)}}my(e,a,s,r)}else a=UM(t,e,s,r,n);return fv(a)}eE=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var t=vh(e.pendingLanes);t!==0&&(Gb(e,t|1),Ys(e,St()),!(Me&6)&&(Iu=St()+500,Io()))}break;case 13:fc(function(){var n=sa(s,1);if(n!==null){var r=ks();xr(n,s,1,r)}}),E_(s,1)}};Kb=function(s){if(s.tag===13){var e=sa(s,134217728);if(e!==null){var t=ks();xr(e,s,134217728,t)}E_(s,134217728)}};tE=function(s){if(s.tag===13){var e=fo(s),t=sa(s,e);if(t!==null){var n=ks();xr(t,s,e,n)}E_(s,e)}};sE=function(){return qe};nE=function(s,e){var t=qe;try{return qe=s,e()}finally{qe=t}};cw=function(s,e,t){switch(e){case"input":if(sw(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==s&&n.form===s.form){var r=ly(n);if(!r)throw Error(q(90));Mj(n),sw(n,r)}}}break;case"textarea":Dj(s,t);break;case"select":e=t.value,e!=null&&ld(s,!!t.multiple,e,!1)}};Hj=b_;Vj=fc;var BM={usingClientEntryPoint:!1,Events:[om,Zc,ly,Bj,zj,b_]},oh={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zM={bundleType:oh.bundleType,version:oh.version,rendererPackageName:oh.rendererPackageName,rendererConfig:oh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:la.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Gj(s),s===null?null:s.stateNode},findFiberByHostInstance:oh.findFiberByHostInstance||$M,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{ry=Lm.inject(zM),ti=Lm}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BM;jn.createPortal=function(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N_(e))throw Error(q(200));return FM(s,e,null,t)};jn.createRoot=function(s,e){if(!N_(s))throw Error(q(299));var t=!1,n="",r=jC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=j_(s,1,!1,null,null,t,!1,n,r),s[ta]=e.current,lf(s.nodeType===8?s.parentNode:s),new C_(e)};jn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(q(188)):(s=Object.keys(s).join(","),Error(q(268,s)));return s=Gj(e),s=s===null?null:s.stateNode,s};jn.flushSync=function(s){return fc(s)};jn.hydrate=function(s,e,t){if(!vy(e))throw Error(q(200));return yy(null,s,e,!0,t)};jn.hydrateRoot=function(s,e,t){if(!N_(s))throw Error(q(405));var n=t!=null&&t.hydratedSources||null,r=!1,i="",a=jC;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=AC(e,null,s,1,t??null,r,!1,i,a),s[ta]=e.current,lf(s),n)for(s=0;s<n.length;s++)t=n[s],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new gy(e)};jn.render=function(s,e,t){if(!vy(e))throw Error(q(200));return yy(null,s,e,!1,t)};jn.unmountComponentAtNode=function(s){if(!vy(s))throw Error(q(40));return s._reactRootContainer?(fc(function(){yy(null,null,s,!1,function(){s._reactRootContainer=null,s[ta]=null})}),!0):!1};jn.unstable_batchedUpdates=b_;jn.unstable_renderSubtreeIntoContainer=function(s,e,t,n){if(!vy(t))throw Error(q(200));if(s==null||s._reactInternals===void 0)throw Error(q(38));return yy(s,e,t,!1,n)};jn.version="18.3.1-next-f1338f8080-20240426";function EC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EC)}catch(s){console.error(s)}}EC(),Ej.exports=jn;var Hu=Ej.exports;const HM=pj(Hu);var CC,BS=Hu;CC=BS.createRoot,BS.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vf(){return vf=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},vf.apply(this,arguments)}var io;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(io||(io={}));const zS="popstate";function VM(s){s===void 0&&(s={});function e(n,r){let{pathname:i,search:a,hash:l}=n.location;return zw("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:pv(r)}return qM(e,t,null,s)}function gt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function NC(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WM(){return Math.random().toString(36).substr(2,8)}function HS(s,e){return{usr:s.state,key:s.key,idx:e}}function zw(s,e,t,n){return t===void 0&&(t=null),vf({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Vu(e):e,{state:t,key:e&&e.key||n||WM()})}function pv(s){let{pathname:e="/",search:t="",hash:n=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vu(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substr(n),s=s.substr(0,n)),s&&(e.pathname=s)}return e}function qM(s,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,a=r.history,l=io.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(vf({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=io.Pop;let w=h(),v=w==null?null:w-d;d=w,c&&c({action:l,location:g.location,delta:v})}function p(w,v){l=io.Push;let b=zw(g.location,w,v);d=h()+1;let x=HS(b,d),S=g.createHref(b);try{a.pushState(x,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function m(w,v){l=io.Replace;let b=zw(g.location,w,v);d=h();let x=HS(b,d),S=g.createHref(b);a.replaceState(x,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function y(w){let v=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof w=="string"?w:pv(w);return b=b.replace(/ $/,"%20"),gt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return l},get location(){return s(r,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(zS,f),c=w,()=>{r.removeEventListener(zS,f),c=null}},createHref(w){return e(r,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(w){return a.go(w)}};return g}var VS;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(VS||(VS={}));function GM(s,e,t){return t===void 0&&(t="/"),KM(s,e,t,!1)}function KM(s,e,t,n){let r=typeof e=="string"?Vu(e):e,i=Mu(r.pathname||"/",t);if(i==null)return null;let a=kC(s);XM(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=aL(i);l=rL(a[c],d,n)}return l}function kC(s,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(gt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=mo([n,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(gt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),kC(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:sL(d,i.index),routesMeta:h})};return s.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of PC(i.path))r(i,a,c)}),e}function PC(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let a=PC(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function XM(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:nL(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const YM=/^:[\w-]+$/,QM=3,JM=2,ZM=1,eL=10,tL=-2,WS=s=>s==="*";function sL(s,e){let t=s.split("/"),n=t.length;return t.some(WS)&&(n+=tL),e&&(n+=JM),t.filter(r=>!WS(r)).reduce((r,i)=>r+(YM.test(i)?QM:i===""?ZM:eL),n)}function nL(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function rL(s,e,t){let{routesMeta:n}=s,r={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f&&d&&t&&!n[n.length-1].route.index&&(f=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:mo([i,f.pathname]),pathnameBase:dL(mo([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=mo([i,f.pathnameBase]))}return a}function mv(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=iL(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let g=l[f]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[f];return m&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:s}}function iL(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),NC(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function aL(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return NC(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function Mu(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function oL(s,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?Vu(s):s;return{pathname:t?t.startsWith("/")?t:lL(t,e):e,search:uL(n),hash:hL(r)}}function lL(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function bx(s,e,t,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cL(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function k_(s,e){let t=cL(s);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function P_(s,e,t,n){n===void 0&&(n=!1);let r;typeof s=="string"?r=Vu(s):(r=vf({},s),gt(!r.pathname||!r.pathname.includes("?"),bx("?","pathname","search",r)),gt(!r.pathname||!r.pathname.includes("#"),bx("#","pathname","hash",r)),gt(!r.search||!r.search.includes("#"),bx("#","search","hash",r)));let i=s===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=t;else{let f=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=oL(r,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const mo=s=>s.join("/").replace(/\/\/+/g,"/"),dL=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),uL=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hL=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function fL(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const TC=["post","put","patch","delete"];new Set(TC);const pL=["get",...TC];new Set(pL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yf(){return yf=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},yf.apply(this,arguments)}const xy=_.createContext(null),RC=_.createContext(null),ca=_.createContext(null),wy=_.createContext(null),da=_.createContext({outlet:null,matches:[],isDataRoute:!1}),IC=_.createContext(null);function mL(s,e){let{relative:t}=e===void 0?{}:e;Wu()||gt(!1);let{basename:n,navigator:r}=_.useContext(ca),{hash:i,pathname:a,search:l}=_y(s,{relative:t}),c=a;return n!=="/"&&(c=a==="/"?n:mo([n,a])),r.createHref({pathname:c,search:l,hash:i})}function Wu(){return _.useContext(wy)!=null}function oi(){return Wu()||gt(!1),_.useContext(wy).location}function MC(s){_.useContext(ca).static||_.useLayoutEffect(s)}function ns(){let{isDataRoute:s}=_.useContext(da);return s?NL():gL()}function gL(){Wu()||gt(!1);let s=_.useContext(xy),{basename:e,future:t,navigator:n}=_.useContext(ca),{matches:r}=_.useContext(da),{pathname:i}=oi(),a=JSON.stringify(k_(r,t.v7_relativeSplatPath)),l=_.useRef(!1);return MC(()=>{l.current=!0}),_.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=P_(d,JSON.parse(a),i,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:mo([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,a,i,s])}function by(){let{matches:s}=_.useContext(da),e=s[s.length-1];return e?e.params:{}}function _y(s,e){let{relative:t}=e===void 0?{}:e,{future:n}=_.useContext(ca),{matches:r}=_.useContext(da),{pathname:i}=oi(),a=JSON.stringify(k_(r,n.v7_relativeSplatPath));return _.useMemo(()=>P_(s,JSON.parse(a),i,t==="path"),[s,a,i,t])}function vL(s,e){return yL(s,e)}function yL(s,e,t,n){Wu()||gt(!1);let{navigator:r}=_.useContext(ca),{matches:i}=_.useContext(da),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=oi(),h;if(e){var f;let w=typeof e=="string"?Vu(e):e;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||gt(!1),h=w}else h=d;let p=h.pathname||"/",m=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=GM(s,{pathname:m}),g=SL(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:mo([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:mo([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,n);return e&&g?_.createElement(wy.Provider,{value:{location:yf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:io.Pop}},g):g}function xL(){let s=CL(),e=fL(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:r},t):null,null)}const wL=_.createElement(xL,null);class bL extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(da.Provider,{value:this.props.routeContext},_.createElement(IC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _L(s){let{routeContext:e,match:t,children:n}=s,r=_.useContext(xy);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(da.Provider,{value:e},n)}function SL(s,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),s==null){var i;if(!t)return null;if(t.errors)s=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=(r=t)==null?void 0:r.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||gt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let m,y=!1,g=null,w=null;t&&(m=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||wL,c&&(d<0&&p===0?(y=!0,w=null):d===p&&(y=!0,w=f.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,p+1)),b=()=>{let x;return m?x=g:y?x=w:f.route.Component?x=_.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,_.createElement(_L,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:x})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?_.createElement(bL,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var LC=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(LC||{}),gv=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(gv||{});function AL(s){let e=_.useContext(xy);return e||gt(!1),e}function jL(s){let e=_.useContext(RC);return e||gt(!1),e}function EL(s){let e=_.useContext(da);return e||gt(!1),e}function DC(s){let e=EL(),t=e.matches[e.matches.length-1];return t.route.id||gt(!1),t.route.id}function CL(){var s;let e=_.useContext(IC),t=jL(gv.UseRouteError),n=DC(gv.UseRouteError);return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function NL(){let{router:s}=AL(LC.UseNavigateStable),e=DC(gv.UseNavigateStable),t=_.useRef(!1);return MC(()=>{t.current=!0}),_.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?s.navigate(r):s.navigate(r,yf({fromRouteId:e},i)))},[s,e])}function kL(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function qS(s){let{to:e,replace:t,state:n,relative:r}=s;Wu()||gt(!1);let{future:i,static:a}=_.useContext(ca),{matches:l}=_.useContext(da),{pathname:c}=oi(),d=ns(),h=P_(e,k_(l,i.v7_relativeSplatPath),c,r==="path"),f=JSON.stringify(h);return _.useEffect(()=>d(JSON.parse(f),{replace:t,state:n,relative:r}),[d,f,r,t,n]),null}function yt(s){gt(!1)}function PL(s){let{basename:e="/",children:t=null,location:n,navigationType:r=io.Pop,navigator:i,static:a=!1,future:l}=s;Wu()&&gt(!1);let c=e.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:c,navigator:i,static:a,future:yf({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Vu(n));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=n,g=_.useMemo(()=>{let w=Mu(h,c);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:y},navigationType:r}},[c,h,f,p,m,y,r]);return g==null?null:_.createElement(ca.Provider,{value:d},_.createElement(wy.Provider,{children:t,value:g}))}function TL(s){let{children:e,location:t}=s;return vL(Hw(e),t)}new Promise(()=>{});function Hw(s,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(s,(n,r)=>{if(!_.isValidElement(n))return;let i=[...e,r];if(n.type===_.Fragment){t.push.apply(t,Hw(n.props.children,i));return}n.type!==yt&&gt(!1),!n.props.index||!n.props.children||gt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Hw(n.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vv(){return vv=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},vv.apply(this,arguments)}function OC(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function RL(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function IL(s,e){return s.button===0&&(!e||e==="_self")&&!RL(s)}function Vw(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let n=s[t];return e.concat(Array.isArray(n)?n.map(r=>[t,r]):[[t,n]])},[]))}function ML(s,e){let t=Vw(s);return e&&e.forEach((n,r)=>{t.has(r)||e.getAll(r).forEach(i=>{t.append(r,i)})}),t}const LL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],OL="6";try{window.__reactRouterVersion=OL}catch{}const FL=_.createContext({isTransitioning:!1}),$L="startTransition",GS=Fb[$L];function UL(s){let{basename:e,children:t,future:n,window:r}=s,i=_.useRef();i.current==null&&(i.current=VM({window:r,v5Compat:!0}));let a=i.current,[l,c]=_.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},h=_.useCallback(f=>{d&&GS?GS(()=>c(f)):c(f)},[c,d]);return _.useLayoutEffect(()=>a.listen(h),[a,h]),_.useEffect(()=>kL(n),[n]),_.createElement(PL,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:n})}const BL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ns=_.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=OC(e,LL),{basename:m}=_.useContext(ca),y,g=!1;if(typeof d=="string"&&zL.test(d)&&(y=d,BL))try{let x=new URL(window.location.href),S=d.startsWith("//")?new URL(x.protocol+d):new URL(d),j=Mu(S.pathname,m);S.origin===x.origin&&j!=null?d=j+S.search+S.hash:g=!0}catch{}let w=mL(d,{relative:r}),v=VL(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function b(x){n&&n(x),x.defaultPrevented||v(x)}return _.createElement("a",vv({},p,{href:y||w,onClick:g||i?n:b,ref:t,target:c}))}),Bo=_.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:h}=e,f=OC(e,DL),p=_y(c,{relative:f.relative}),m=oi(),y=_.useContext(RC),{navigator:g,basename:w}=_.useContext(ca),v=y!=null&&WL(p)&&d===!0,b=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,x=m.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(x=x.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&w&&(S=Mu(S,w)||S);const j=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let N=x===b||!a&&x.startsWith(b)&&x.charAt(j)==="/",k=S!=null&&(S===b||!a&&S.startsWith(b)&&S.charAt(b.length)==="/"),P={isActive:N,isPending:k,isTransitioning:v},I=N?n:void 0,T;typeof i=="function"?T=i(P):T=[i,N?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(P):l;return _.createElement(Ns,vv({},f,{"aria-current":I,className:T,ref:t,style:M,to:c,viewTransition:d}),typeof h=="function"?h(P):h)});var Ww;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Ww||(Ww={}));var KS;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(KS||(KS={}));function HL(s){let e=_.useContext(xy);return e||gt(!1),e}function VL(s,e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=ns(),d=oi(),h=_y(s,{relative:a});return _.useCallback(f=>{if(IL(f,t)){f.preventDefault();let p=n!==void 0?n:pv(d)===pv(h);c(s,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,n,r,t,s,i,a,l])}function T_(s){let e=_.useRef(Vw(s)),t=_.useRef(!1),n=oi(),r=_.useMemo(()=>ML(n.search,t.current?null:e.current),[n.search]),i=ns(),a=_.useCallback((l,c)=>{const d=Vw(typeof l=="function"?l(r):l);t.current=!0,i("?"+d,c)},[i,r]);return[r,a]}function WL(s,e){e===void 0&&(e={});let t=_.useContext(FL);t==null&&gt(!1);let{basename:n}=HL(Ww.useViewTransitionState),r=_y(s,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Mu(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Mu(t.nextLocation.pathname,n)||t.nextLocation.pathname;return mv(r.pathname,a)!=null||mv(r.pathname,i)!=null}const qL="modulepreload",GL=function(s){return"/"+s},XS={},cm=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=GL(c),c in XS)return;XS[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":qL,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},KL=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>cm(async()=>{const{default:n}=await Promise.resolve().then(()=>qu);return{default:n}},[]).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class R_ extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class XL extends R_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class YS extends R_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class QS extends R_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qw;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(qw||(qw={}));var YL=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class QL{constructor(e,{headers:t={},customFetch:n,region:r=qw.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=KL(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return YL(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h}).catch(g=>{throw new XL(g)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new YS(f);if(!f.ok)throw new QS(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield f.json():m==="application/octet-stream"?y=yield f.blob():m==="text/event-stream"?y=f:m==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof QS||r instanceof YS?r.context:void 0}}})}}var Vs={},I_={},Sy={},dm={},Ay={},jy={},JL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lu=JL();const ZL=Lu.fetch,FC=Lu.fetch.bind(Lu),$C=Lu.Headers,eD=Lu.Request,tD=Lu.Response,qu=Object.freeze(Object.defineProperty({__proto__:null,Headers:$C,Request:eD,Response:tD,default:FC,fetch:ZL},Symbol.toStringTag,{value:"Module"})),sD=vR(qu);var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});let nD=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ey.default=nD;var UC=Wn&&Wn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(jy,"__esModule",{value:!0});const rD=UC(sD),iD=UC(Ey);let aD=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=rD.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,d;let h=null,f=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=b:f=JSON.parse(b))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{h=JSON.parse(w),Array.isArray(h)&&i.status===404&&(f=[],h=null,m=200,y="OK")}catch{i.status===404&&w===""?(m=204,y="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,m=200,y="OK"),h&&this.shouldThrowOnError)throw new iD.default(h)}return{error:h,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};jy.default=aD;var oD=Wn&&Wn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ay,"__esModule",{value:!0});const lD=oD(jy);let cD=class extends lD.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ay.default=cD;var dD=Wn&&Wn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dm,"__esModule",{value:!0});const uD=dD(Ay);let hD=class extends uD.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};dm.default=hD;var fD=Wn&&Wn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Sy,"__esModule",{value:!0});const lh=fD(dm);let pD=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new lh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new lh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new lh.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new lh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new lh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Sy.default=pD;var BC=Wn&&Wn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(I_,"__esModule",{value:!0});const mD=BC(Sy),gD=BC(dm);let vD=class zC{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new mD.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new zC(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;n||r?(l=n?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(l="POST",d=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new gD.default({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};I_.default=vD;var Gu=Wn&&Wn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.PostgrestError=Vs.PostgrestBuilder=Vs.PostgrestTransformBuilder=Vs.PostgrestFilterBuilder=Vs.PostgrestQueryBuilder=Vs.PostgrestClient=void 0;const HC=Gu(I_);Vs.PostgrestClient=HC.default;const VC=Gu(Sy);Vs.PostgrestQueryBuilder=VC.default;const WC=Gu(dm);Vs.PostgrestFilterBuilder=WC.default;const qC=Gu(Ay);Vs.PostgrestTransformBuilder=qC.default;const GC=Gu(jy);Vs.PostgrestBuilder=GC.default;const KC=Gu(Ey);Vs.PostgrestError=KC.default;var yD=Vs.default={PostgrestClient:HC.default,PostgrestQueryBuilder:VC.default,PostgrestFilterBuilder:WC.default,PostgrestTransformBuilder:qC.default,PostgrestBuilder:GC.default,PostgrestError:KC.default};const{PostgrestClient:xD,PostgrestQueryBuilder:r5,PostgrestFilterBuilder:i5,PostgrestTransformBuilder:a5,PostgrestBuilder:o5,PostgrestError:l5}=yD;class wD{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,r=parseInt(n.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bD="2.15.5",_D=`realtime-js/${bD}`,SD="1.0.0",Gw=1e4,AD=1e3,jD=100;var qh;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(qh||(qh={}));var Pt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Pt||(Pt={}));var mr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(mr||(mr={}));var Kw;(function(s){s.websocket="websocket"})(Kw||(Kw={}));var Yo;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Yo||(Yo={}));class ED{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+r));a=a+r;const c=n.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class XC{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Je||(Je={}));const JS=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=CD(a,s,e,r),i),{})},CD=(s,e,t,n)=>{const r=e.find(l=>l.name===s),i=r==null?void 0:r.type,a=t[s];return i&&!n.includes(i)?YC(i,a):Xw(a)},YC=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return TD(e,t)}switch(s){case Je.bool:return ND(e);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return kD(e);case Je.json:case Je.jsonb:return PD(e);case Je.timestamp:return RD(e);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return Xw(e);default:return Xw(e)}},Xw=s=>s,ND=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},kD=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},PD=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},TD=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const a=s.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>YC(e,l))}return s},RD=s=>typeof s=="string"?s.replace(" ","T"):s,QC=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class _x{constructor(e,t,n={},r=Gw){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ZS;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(ZS||(ZS={}));class Gh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gh.syncState(this.state,r,i,a),this.pendingDiffs.forEach(c=>{this.state=Gh.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Gh.syncDiff(this.state,r,i,a),l())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(i,(d,h)=>{a[d]||(c[d]=h)}),this.map(a,(d,h)=>{const f=i[d];if(f){const p=h.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),y=h.filter(w=>m.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);y.length>0&&(l[d]=y),g.length>0&&(c[d]=g)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const f=e[l].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);e[l].unshift(...p)}n(l,h,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var eA;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(eA||(eA={}));var Kh;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Kh||(Kh={}));var gi;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(gi||(gi={}));class M_{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new _x(this,mr.join,this.params,this.timeout),this.rejoinTimer=new XC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Gh(this),this.broadcastEndpointURL=QC(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,d=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&r!==void 0?r:[],h=!!this.bindings[Kh.PRESENCE]&&this.bindings[Kh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(gi.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(gi.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(gi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let b=0;b<w;b++){const x=g[b],{filter:{event:S,schema:j,table:N,filter:k}}=x,P=m&&m[b];if(P&&P.event===S&&P.schema===j&&P.table===N&&P.filter===k)v.push(Object.assign(Object.assign({},x),{id:P.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(gi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(gi.SUBSCRIBED);return}}).receive("error",m=>{this.state=Pt.errored,e==null||e(gi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Pt.joined&&e===Kh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new _x(this,mr.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new _x(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>jD){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=mr;if(n&&[l,c,d,h].indexOf(a)>=0&&n!==this._joinRef())return;let p=this._onMessage(a,t,n);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var y,g,w;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(p,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,g,w,v,b,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const S=m.id,j=(y=m.filter)===null||y===void 0?void 0:y.event;return S&&((g=t.ids)===null||g===void 0?void 0:g.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(b=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:w,commit_timestamp:v,type:b,errors:x}=y;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(y))}m.callback(p,n)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&M_.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mr.close,{},e)}_onError(e){this._on(mr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=JS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=JS(e.columns,e.old_record)),t}}const Sx=()=>{},Dm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ID=[1e3,2e3,5e3,1e4],MD=1e4,LD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DD{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gw,this.transport=null,this.heartbeatIntervalMs=Dm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sx,this.ref=0,this.reconnectTimer=null,this.logger=Sx,this.conn=null,this.sendBuffer=[],this.serializer=new ED,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...a)=>cm(async()=>{const{default:l}=await Promise.resolve().then(()=>qu);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Kw.websocket}`,this.httpEndpoint=QC(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:SD}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case qh.connecting:return Yo.Connecting;case qh.open:return Yo.Open;case qh.closing:return Yo.Closing;default:return Yo.Closed}}isConnected(){return this.connectionState()===Yo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new M_(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(AD,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Dm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:i,ref:a}=t,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${r} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(r,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(mr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([LD],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const r={access_token:t,version:_D};t&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(mr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new XC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Dm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,a,l,c,d,h;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Gw,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Dm.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Sx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>ID[f-1]||MD,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(f,p)=>p(JSON.stringify(f)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class L_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class OD extends L_{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yw extends L_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var FD=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const JC=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>cm(async()=>{const{default:n}=await Promise.resolve().then(()=>qu);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},$D=()=>FD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cm(()=>Promise.resolve().then(()=>qu),void 0)).Response:Response}),Qw=s=>{if(Array.isArray(s))return s.map(t=>Qw(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Qw(n)}),e},UD=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var Cc=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const Ax=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),BD=(s,e,t)=>Cc(void 0,void 0,void 0,function*(){const n=yield $D();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{const i=s.status||500,a=(r==null?void 0:r.statusCode)||i+"";e(new OD(Ax(r),i,a))}).catch(r=>{e(new Yw(Ax(r),r))}):e(new Yw(Ax(s),s))}),zD=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!n?r:(UD(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function um(s,e,t,n,r,i){return Cc(this,void 0,void 0,function*(){return new Promise((a,l)=>{s(t,zD(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>BD(c,l,n))})})}function yv(s,e,t,n){return Cc(this,void 0,void 0,function*(){return um(s,"GET",e,t,n)})}function Ir(s,e,t,n,r){return Cc(this,void 0,void 0,function*(){return um(s,"POST",e,n,r,t)})}function Jw(s,e,t,n,r){return Cc(this,void 0,void 0,function*(){return um(s,"PUT",e,n,r,t)})}function HD(s,e,t,n){return Cc(this,void 0,void 0,function*(){return um(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function ZC(s,e,t,n,r){return Cc(this,void 0,void 0,function*(){return um(s,"DELETE",e,n,r,t)})}var ws=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const VD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WD{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=JC(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return ws(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},tA),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),f=yield(e=="PUT"?Jw:Ir)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mt(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ws(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:tA.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield Jw(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ws(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Ir(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new L_("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}update(e,t,n){return ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ws(this,void 0,void 0,function*(){try{return{data:yield Ir(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}copy(e,t,n){return ws(this,void 0,void 0,function*(){try{return{data:{path:(yield Ir(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return ws(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Ir(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return ws(this,void 0,void 0,function*(){try{const r=yield Ir(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}download(e,t){return ws(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield yv(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}info(e){return ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield yv(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Qw(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}exists(e){return ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield HD(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n)&&n instanceof Yw){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return ws(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}list(e,t,n){return ws(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},VD),t),{prefix:e||""});return{data:yield Ir(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mt(r))return{data:null,error:r};throw r}})}listV2(e,t){return ws(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ir(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const qD="2.12.1",GD={"X-Client-Info":`storage-js/${qD}`};var Tc=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class KD{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},GD),t),this.fetch=JC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Tc(this,void 0,void 0,function*(){try{return{data:yield yv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Tc(this,void 0,void 0,function*(){try{return{data:yield yv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Tc(this,void 0,void 0,function*(){try{return{data:yield Ir(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Tc(this,void 0,void 0,function*(){try{return{data:yield Jw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Tc(this,void 0,void 0,function*(){try{return{data:yield Ir(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Tc(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}class XD extends KD{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new WD(this.url,this.headers,e,this.fetch)}}const YD="2.57.4";let xh="";typeof Deno<"u"?xh="deno":typeof document<"u"?xh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xh="react-native":xh="node";const QD={"X-Client-Info":`supabase-js-${xh}/${YD}`},JD={headers:QD},ZD={schema:"public"},eO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tO={};var sO=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const nO=s=>{let e;return s?e=s:typeof fetch>"u"?e=FC:e=fetch,(...t)=>e(...t)},rO=()=>typeof Headers>"u"?$C:Headers,iO=(s,e,t)=>{const n=nO(t),r=rO();return(i,a)=>sO(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:s;let d=new r(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:d}))})};var aO=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};function oO(s){return s.endsWith("/")?s:s+"/"}function lO(s,e){var t,n;const{db:r,auth:i,realtime:a,global:l}=s,{db:c,auth:d,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>aO(this,void 0,void 0,function*(){return""})};return s.accessToken?p.accessToken=s.accessToken:delete p.accessToken,p}function cO(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(oO(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const eN="2.71.1",$c=30*1e3,Zw=3,jx=Zw*$c,dO="http://localhost:9999",uO="supabase.auth.token",hO={"X-Client-Info":`gotrue-js/${eN}`},e0="X-Supabase-Api-Version",tN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pO=10*60*1e3;class D_ extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ge(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class mO extends D_{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function gO(s){return ge(s)&&s.name==="AuthApiError"}class sN extends D_{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Mo extends D_{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class ya extends Mo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vO(s){return ge(s)&&s.name==="AuthSessionMissingError"}class Om extends Mo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fm extends Mo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $m extends Mo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yO(s){return ge(s)&&s.name==="AuthImplicitGrantRedirectError"}class sA extends Mo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class t0 extends Mo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ex(s){return ge(s)&&s.name==="AuthRetryableFetchError"}class nA extends Mo{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class s0 extends Mo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rA=` 	
\r=`.split(""),xO=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<rA.length;e+=1)s[rA[e].charCodeAt(0)]=-2;for(let e=0;e<xv.length;e+=1)s[xv[e].charCodeAt(0)]=e;return s})();function iA(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(xv[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(xv[n]),e.queuedBits-=6}}function nN(s,e,t){const n=xO[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function aA(s){const e=[],t=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=a=>{_O(a,n,t)};for(let a=0;a<s.length;a+=1)nN(s.charCodeAt(a),r,i);return e.join("")}function wO(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function bO(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}wO(n,e)}}function _O(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function SO(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<s.length;r+=1)nN(s.charCodeAt(r),t,n);return new Uint8Array(e)}function AO(s){const e=[];return bO(s,t=>e.push(t)),new Uint8Array(e)}function jO(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};return s.forEach(r=>iA(r,t,n)),iA(null,t,n),e.join("")}function EO(s){return Math.round(Date.now()/1e3)+s}function CO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Qn=()=>typeof window<"u"&&typeof document<"u",zo={tested:!1,writable:!1},rN=()=>{if(!Qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zo.tested)return zo.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),zo.tested=!0,zo.writable=!0}catch{zo.tested=!0,zo.writable=!1}return zo.writable};function NO(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const iN=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>cm(async()=>{const{default:n}=await Promise.resolve().then(()=>qu);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},kO=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Uc=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Ho=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pa=async(s,e)=>{await s.removeItem(e)};class Cy{constructor(){this.promise=new Cy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Cy.promiseConstructor=Promise;function Cx(s){const e=s.split(".");if(e.length!==3)throw new s0("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!fO.test(e[n]))throw new s0("JWT not in base64url format");return{header:JSON.parse(aA(e[0])),payload:JSON.parse(aA(e[1])),signature:SO(e[2]),raw:{header:e[0],payload:e[1]}}}async function PO(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function TO(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await s(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function RO(s){return("0"+s.toString(16)).substr(-2)}function IO(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,RO).join("")}async function MO(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function LO(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await MO(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rc(s,e,t=!1){const n=IO();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await Uc(s,`${e}-code-verifier`,r);const i=await LO(n);return[i,n===i?"plain":"s256"]}const DO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OO(s){const e=s.headers.get(e0);if(!e||!e.match(DO))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function FO(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function $O(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ic(s){if(!UO.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nx(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oA(s){return JSON.parse(JSON.stringify(s))}var BO=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const qo=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),zO=[502,503,504];async function lA(s){var e;if(!kO(s))throw new t0(qo(s),0);if(zO.includes(s.status))throw new t0(qo(s),s.status);let t;try{t=await s.json()}catch(i){throw new sN(qo(i),i)}let n;const r=OO(s);if(r&&r.getTime()>=tN["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new nA(qo(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ya}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new nA(qo(t),s.status,t.weak_password.reasons);throw new mO(qo(t),s.status||500,n)}const HO=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function Ce(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[e0]||(i[e0]=tN["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await VO(s,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function VO(s,e,t,n,r,i){const a=HO(e,n,r,i);let l;try{l=await s(t,Object.assign({},a))}catch(c){throw console.error(c),new t0(qo(c),0)}if(l.ok||await lA(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await lA(c)}}function ui(s){var e;let t=null;KO(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=EO(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function cA(s){const e=ui(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function ja(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function WO(s){return{data:s,error:null}}function qO(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,a=BO(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function GO(s){return s}function KO(s){return s.access_token&&s.refresh_token&&s.expires_in}const kx=["global","local","others"];var XO=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class YO{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=iN(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=kx[0]){if(kx.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kx.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ja})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=XO(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:qO,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ge(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ja})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:GO});if(h.error)throw h.error;const f=await h.json(),p=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(ge(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ic(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ja})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ic(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ja})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Ic(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ja})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ic(e.userId);try{const{data:t,error:n}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ic(e.userId),Ic(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}}function dA(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function QO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Mc={debug:!!(globalThis&&rN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class aN extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JO extends aN{}async function ZO(s,e,t){Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw Mc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new JO(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Mc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}QO();const eF={url:dO,storageKey:uO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uA(s,e,t){return await t()}const Lc={};class xf{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xf.nextInstanceID,xf.nextInstanceID+=1,this.instanceID>0&&Qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},eF),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new YO({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=iN(r.fetch),this.lock=r.lock||uA,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Qn()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ZO:this.lock=uA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:rN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dA(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=dA(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Lc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Lc[this.storageKey]=Object.assign(Object.assign({},Lc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Lc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Lc[this.storageKey]=Object.assign(Object.assign({},Lc[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${eN}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=NO(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Qn()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),yO(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ge(t)?{error:t}:{error:new sN("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ui}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Rc(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:ui})}else if("phone"in e){const{phone:h,password:f,options:p}=e;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(r=p==null?void 0:p.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ui})}else throw new Fm("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cA})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:cA})}else throw new Fm("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Om}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,a,l,c,d,h,f,p,m;let y,g;if("message"in e)y=e.message,g=e.signature;else{const{chain:w,wallet:v,statement:b,options:x}=e;let S;if(Qn())if(typeof v=="object")S=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const j=new URL((t=x==null?void 0:x.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(r=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:w,error:v}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:jO(g)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ui});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Om}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(ge(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await Ho(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:a}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ui});if(await pa(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Om}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(ge(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:a}=e,l=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ui}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Om}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Rc(this.storage,this.storageKey));const{error:f}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new Fm("You must provide either an email or phone number.")}catch(l){if(ge(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ui});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(ge(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Rc(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:WO})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ya;const{error:r}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ge(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:l}=await Ce(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Fm("You must provide either an email or phone number and a type")}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<jx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Ho(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Nx()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ja}):await this._useSession(async t=>{var n,r,i;const{data:a,error:l}=t;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ya}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:ja})})}catch(t){if(ge(t))return vO(t)&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new ya;const a=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Rc(this.storage,this.storageKey));const{data:d,error:h}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:ja});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ya;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:a}=Cx(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ge(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ya;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ge(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Qn())throw new $m("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $m(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new sA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $m("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sA("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!a||!d)throw new $m("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let p=h+f;c&&(p=parseInt(c));const m=p-h;m*1e3<=$c&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:p,refresh_token:a,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(ge(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(gO(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=CO(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Rc(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ge(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var a,l,c,d,h;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return Qn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ge(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)throw a;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await TO(async r=>(r>0&&await PO(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ui})),(r,i)=>{const a=200*Math.pow(2,r);return i&&Ex(i)&&Date.now()+a-n<$c})}catch(n){if(this._debug(t,"error",n),ge(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Qn()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Ho(this.storage,this.storageKey);if(r&&this.userStorage){let a=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await Uc(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Nx()}else if(r&&!r.user&&!r.user){const a=await Ho(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await pa(this.storage,this.storageKey+"-user"),await Uc(this.storage,this.storageKey,r)):r.user=Nx()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jx;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${jx}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Ex(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(r.access_token);!l&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ya;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Cy;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new ya;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ge(i)){const a={session:null,error:i};return Ex(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Uc(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=oA(r);await Uc(this.storage,this.storageKey,i)}else{const r=oA(t);await Uc(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await pa(this.storage,this.storageKey),await pa(this.storage,this.storageKey+"-code-verifier"),await pa(this.storage,this.storageKey+"-user"),this.userStorage&&await pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$c);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/$c);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${$c}ms, refresh threshold is ${Zw} ticks`),r<=Zw&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof aN)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Rc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(ge(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(ge(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Cx(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+pO>r)return n;const{data:i,error:a}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};n=m.session.access_token}const{header:r,payload:i,signature:a,raw:{header:l,payload:c}}=Cx(n);t!=null&&t.allowExpired||FO(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:a},error:null}}const h=$O(r.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,a,AO(`${l}.${c}`)))throw new s0("Invalid JWT signature");return{data:{claims:i,header:r,signature:a},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}}xf.nextInstanceID=0;const tF=xf;class sF extends tF{constructor(e){super(e)}}var nF=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(n.next(h))}catch(f){a(f)}}function c(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class rF{constructor(e,t,n){var r,i,a;this.supabaseUrl=e,this.supabaseKey=t;const l=cO(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:ZD,realtime:tO,auth:Object.assign(Object.assign({},eO),{storageKey:c}),global:JD},h=lO(n??{},d);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=iO(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new xD(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new XD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new QL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return nF(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:a,flowType:l,lock:c,debug:d},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sF({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:c,debug:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new DD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iF=(s,e,t)=>new rF(s,e,t);function aF(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}aF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const oN="https://mjtotgylgnmlpgyzxadj.supabase.co",lN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qdG90Z3lsZ25tbHBneXp4YWRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NzA3NDEsImV4cCI6MjA3NTM0Njc0MX0.prKdkDoUKqct6Uxv4mlFCRS4YNxmy8r98WKj27q66U0";if(!oN.startsWith("https://"))throw new Error("Invalid Supabase URL format. Must start with https://");if(lN.length<20)throw new Error("Invalid Supabase anonymous key format.");const V=iF(oN,lN,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token",storage:window.localStorage}}),cN=_.createContext(void 0),Cn=()=>{const s=_.useContext(cN);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},oF=({children:s})=>{const[e,t]=_.useState(null),[n,r]=_.useState(null),[i,a]=_.useState(!0),l=_.useRef({}),c=_.useRef(!1),d=_.useRef(!1),h=async w=>{if(l.current[w]){r(l.current[w]);return}if(!c.current){c.current=!0;try{const{data:v,error:b}=await V.from("profiles").select("*").eq("id",w).maybeSingle();if(b){r(null);return}v?(l.current[w]=v,r(v)):r(null)}catch{r(null)}finally{c.current=!1}}};_.useEffect(()=>{if(d.current)return;d.current=!0;let w=!0;(async()=>{try{const{data:{session:x},error:S}=await V.auth.getSession();if(!w)return;if(S){a(!1);return}x!=null&&x.user&&(await V.auth.refreshSession(),t(x.user),await h(x.user.id))}catch{}finally{w&&a(!1)}})();const{data:{subscription:b}}=V.auth.onAuthStateChange(async(x,S)=>{if(w)switch(x){case"SIGNED_IN":t((S==null?void 0:S.user)??null),S!=null&&S.user&&await h(S.user.id);break;case"SIGNED_OUT":try{const{data:{session:j},error:N}=await V.auth.refreshSession();if(j!=null&&j.user&&!N){t(j.user),(!n||n.id!==j.user.id)&&await h(j.user.id);break}}catch{}t(null),r(null),l.current={};break;case"TOKEN_REFRESHED":t((S==null?void 0:S.user)??null);break;case"USER_UPDATED":t((S==null?void 0:S.user)??null),S!=null&&S.user&&(delete l.current[S.user.id],await h(S.user.id));break}});return()=>{w=!1,b.unsubscribe()}},[]),_.useEffect(()=>{if(!e)return;const w=setInterval(async()=>{try{await V.auth.refreshSession()}catch{}},5*60*1e3);return()=>clearInterval(w)},[e]);const f=async(w,v)=>{const{error:b}=await V.auth.signInWithPassword({email:w,password:v});if(b)throw b},p=async()=>{const{error:w}=await V.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(w)throw w},m=async(w,v,b,x)=>{const{data:S,error:j}=await V.auth.signUp({email:w,password:v,options:{data:{full_name:b,role:x}}});if(j)throw j;S.user&&await V.from("profiles").insert({id:S.user.id,email:w,full_name:b,role:x,status:"pending"})},y=async()=>{try{await V.auth.signOut(),t(null),r(null),l.current={}}catch{t(null),r(null),l.current={}}},g=async w=>{const{error:v}=await V.auth.resetPasswordForEmail(w,{redirectTo:`${window.location.origin}/reset-password`});if(v)throw v};return o.jsx(cN.Provider,{value:{user:e,profile:n,loading:i,signIn:f,signInWithGoogle:p,signUp:m,signOut:y,resetPassword:g},children:s})},Nr=({children:s,allowedRoles:e,redirectTo:t="/login"})=>{const{user:n,profile:r,loading:i}=Cn(),a=oi();return i&&!n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):n?e&&r&&!e.includes(r.role)?(console.warn("Access denied - user role:",r.role),o.jsx(qS,{to:"/",replace:!0})):o.jsx(o.Fragment,{children:s}):o.jsx(qS,{to:t,state:{from:a},replace:!0})};function hA(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function dN(...s){return e=>{let t=!1;const n=s.map(r=>{const i=hA(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<n.length;r++){const i=n[r];typeof i=="function"?i():hA(s[r],null)}}}}function tt(...s){return _.useCallback(dN(...s),s)}function Du(s){const e=cF(s),t=_.forwardRef((n,r)=>{const{children:i,...a}=n,l=_.Children.toArray(i),c=l.find(uF);if(c){const d=c.props.children,h=l.map(f=>f===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:r,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:r,children:i})});return t.displayName=`${s}.Slot`,t}var lF=Du("Slot");function cF(s){const e=_.forwardRef((t,n)=>{const{children:r,...i}=t;if(_.isValidElement(r)){const a=fF(r),l=hF(i,r.props);return r.type!==_.Fragment&&(l.ref=n?dN(n,a):a),_.cloneElement(r,l)}return _.Children.count(r)>1?_.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var uN=Symbol("radix.slottable");function dF(s){const e=({children:t})=>o.jsx(o.Fragment,{children:t});return e.displayName=`${s}.Slottable`,e.__radixId=uN,e}function uF(s){return _.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===uN}function hF(s,e){const t={...e};for(const n in e){const r=s[n],i=e[n];/^on[A-Z]/.test(n)?r&&i?t[n]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(t[n]=r):n==="style"?t[n]={...r,...i}:n==="className"&&(t[n]=[r,i].filter(Boolean).join(" "))}return{...s,...t}}function fF(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function hN(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(e=0;e<r;e++)s[e]&&(t=hN(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function fN(){for(var s,e,t=0,n="",r=arguments.length;t<r;t++)(s=arguments[t])&&(e=hN(s))&&(n&&(n+=" "),n+=e);return n}const fA=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,pA=fN,O_=(s,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return pA(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,a=Object.keys(r).map(d=>{const h=t==null?void 0:t[d],f=i==null?void 0:i[d];if(h===null)return null;const p=fA(h)||fA(f);return r[d][p]}),l=t&&Object.entries(t).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...i,...l}[g]):{...i,...l}[g]===w})?[...d,f,p]:d},[]);return pA(s,a,c,t==null?void 0:t.class,t==null?void 0:t.className)},F_="-",pF=s=>{const e=gF(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:a=>{const l=a.split(F_);return l[0]===""&&l.length!==1&&l.shift(),pN(l,e)||mF(a)},getConflictingClassGroupIds:(a,l)=>{const c=t[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},pN=(s,e)=>{var a;if(s.length===0)return e.classGroupId;const t=s[0],n=e.nextPart.get(t),r=n?pN(s.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const i=s.join(F_);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},mA=/^\[(.+)\]$/,mF=s=>{if(mA.test(s)){const e=mA.exec(s)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},gF=s=>{const{theme:e,prefix:t}=s,n={nextPart:new Map,validators:[]};return yF(Object.entries(s.classGroups),t).forEach(([i,a])=>{n0(a,n,i,e)}),n},n0=(s,e,t,n)=>{s.forEach(r=>{if(typeof r=="string"){const i=r===""?e:gA(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(vF(r)){n0(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,a])=>{n0(a,gA(e,i),t,n)})})},gA=(s,e)=>{let t=s;return e.split(F_).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},vF=s=>s.isThemeGetter,yF=(s,e)=>e?s.map(([t,n])=>{const r=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[t,r]}):s,xF=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(i,a)=>{t.set(i,a),e++,e>s&&(e=0,n=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return r(i,a),a},set(i,a){t.has(i)?t.set(i,a):r(i,a)}}},mN="!",wF=s=>{const{separator:e,experimentalParseClassName:t}=s,n=e.length===1,r=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let w=0;w<l.length;w++){let v=l[w];if(d===0){if(v===r&&(n||l.slice(w,w+i)===e)){c.push(l.slice(h,w)),h=w+i;continue}if(v==="/"){f=w;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?l:l.substring(h),m=p.startsWith(mN),y=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return t?l=>t({className:l,parseClassName:a}):a},bF=s=>{if(s.length<=1)return s;const e=[];let t=[];return s.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},_F=s=>({cache:xF(s.cacheSize),parseClassName:wF(s),...pF(s)}),SF=/\s+/,AF=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r}=e,i=[],a=s.trim().split(SF);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(d);let y=!!m,g=n(y?p.substring(0,m):p);if(!g){if(!y){l=d+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=d+(l.length>0?" "+l:l);continue}y=!1}const w=bF(h).join(":"),v=f?w+mN:w,b=v+g;if(i.includes(b))continue;i.push(b);const x=r(g,y);for(let S=0;S<x.length;++S){const j=x[S];i.push(v+j)}l=d+(l.length>0?" "+l:l)}return l};function jF(){let s=0,e,t,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=gN(e))&&(n&&(n+=" "),n+=t);return n}const gN=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=gN(s[n]))&&(t&&(t+=" "),t+=e);return t};function EF(s,...e){let t,n,r,i=a;function a(c){const d=e.reduce((h,f)=>f(h),s());return t=_F(d),n=t.cache.get,r=t.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=AF(c,t);return r(c,h),h}return function(){return i(jF.apply(null,arguments))}}const nt=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},vN=/^\[(?:([a-z-]+):)?(.+)\]$/i,CF=/^\d+\/\d+$/,NF=new Set(["px","full","screen"]),kF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,di=s=>pd(s)||NF.has(s)||CF.test(s),ma=s=>Ku(s,"length",BF),pd=s=>!!s&&!Number.isNaN(Number(s)),Px=s=>Ku(s,"number",pd),ch=s=>!!s&&Number.isInteger(Number(s)),MF=s=>s.endsWith("%")&&pd(s.slice(0,-1)),ye=s=>vN.test(s),ga=s=>kF.test(s),LF=new Set(["length","size","percentage"]),DF=s=>Ku(s,LF,yN),OF=s=>Ku(s,"position",yN),FF=new Set(["image","url"]),$F=s=>Ku(s,FF,HF),UF=s=>Ku(s,"",zF),dh=()=>!0,Ku=(s,e,t)=>{const n=vN.exec(s);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},BF=s=>PF.test(s)&&!TF.test(s),yN=()=>!1,zF=s=>RF.test(s),HF=s=>IF.test(s),VF=()=>{const s=nt("colors"),e=nt("spacing"),t=nt("blur"),n=nt("brightness"),r=nt("borderColor"),i=nt("borderRadius"),a=nt("borderSpacing"),l=nt("borderWidth"),c=nt("contrast"),d=nt("grayscale"),h=nt("hueRotate"),f=nt("invert"),p=nt("gap"),m=nt("gradientColorStops"),y=nt("gradientColorStopPositions"),g=nt("inset"),w=nt("margin"),v=nt("opacity"),b=nt("padding"),x=nt("saturate"),S=nt("scale"),j=nt("sepia"),N=nt("skew"),k=nt("space"),P=nt("translate"),I=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",ye,e],U=()=>[ye,e],z=()=>["",di,ma],B=()=>["auto",pd,ye],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",ye],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[pd,ye];return{cacheSize:500,separator:":",theme:{colors:[dh],spacing:[di,ma],blur:["none","",ga,ye],brightness:H(),borderColor:[s],borderRadius:["none","","full",ga,ye],borderSpacing:U(),borderWidth:z(),contrast:H(),grayscale:R(),hueRotate:H(),invert:R(),gap:U(),gradientColorStops:[s],gradientColorStopPositions:[MF,ma],inset:M(),margin:M(),opacity:H(),padding:U(),saturate:H(),scale:H(),sepia:R(),skew:H(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[ga]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),ye]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ch,ye]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",ch,ye]}],"grid-cols":[{"grid-cols":[dh]}],"col-start-end":[{col:["auto",{span:["full",ch,ye]},ye]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[dh]}],"row-start-end":[{row:["auto",{span:[ch,ye]},ye]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[ga]},ga]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ga,ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Px]}],"font-family":[{font:[dh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",pd,Px]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",di,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",di,ma]}],"underline-offset":[{"underline-offset":["auto",di,ye]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),OF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$F]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[di,ye]}],"outline-w":[{outline:[di,ma]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[di,ma]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ga,UF]}],"shadow-color":[{shadow:[dh]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ga,ye]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[ch,ye]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[di,ma,Px]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WF=EF(VF);function Se(...s){return WF(fN(s))}const $_=O_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-primary text-primary-foreground hover:shadow-elegant hover:scale-[1.02] transition-smooth font-semibold",luxury:"bg-gradient-hero text-primary-foreground hover:shadow-luxury hover:scale-[1.02] transition-smooth font-bold"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$=_.forwardRef(({className:s,variant:e,size:t,asChild:n=!1,...r},i)=>{const a=n?lF:"button";return o.jsx(a,{className:Se($_({variant:e,size:t,className:s})),ref:i,...r})});$.displayName="Button";const qF=O_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function be({className:s,variant:e,...t}){return o.jsx("div",{className:Se(qF({variant:e}),s),...t})}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xN=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=_.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:a,...l},c)=>_.createElement("svg",{ref:c,...KF,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:xN("lucide",r),...l},[...a.map(([d,h])=>_.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(s,e)=>{const t=_.forwardRef(({className:n,...r},i)=>_.createElement(XF,{ref:i,iconNode:e,className:xN(`lucide-${GF(s)}`,n),...r}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=de("Bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=de("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=de("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=de("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=de("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=de("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=de("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=de("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=de("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=de("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=de("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=de("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=de("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=de("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=de("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=de("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=de("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=de("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=de("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=de("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=de("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=de("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=de("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=de("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=de("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=de("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=de("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),m4="/assets/hero-villa-DS1T0zWa.jpg",g4=()=>{const[s,e]=_.useState({totalProperties:0,countriesCount:0,loading:!0});return _.useEffect(()=>{(async()=>{try{const[n,r]=await Promise.all([V.from("properties").select("id",{count:"exact",head:!0}).eq("status","published"),V.from("properties").select("country").eq("status","published")]),i=n.count??0,a=r.data||[],l=new Set(a.filter(c=>!!c.country).map(c=>c.country.trim()));e({totalProperties:i,countriesCount:l.size,loading:!1})}catch(n){console.error("Error loading hero stats",n),e(r=>({...r,loading:!1}))}})()},[]),o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 z-0",children:[o.jsx("img",{src:m4,alt:"Luxury villa at sunset",className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-background/95 via-background/50 to-transparent"})]}),o.jsx("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-4xl",children:[o.jsx("div",{className:"mb-6",children:o.jsxs(be,{variant:"secondary",className:"mb-4 px-4 py-2 text-sm",children:[o.jsx(z_,{className:"h-4 w-4 mr-2"}),"Premium Real Estate Platform"]})}),o.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-bold leading-tight mb-6",children:["Discover Your",o.jsx("span",{className:"block bg-gradient-primary bg-clip-text text-transparent",children:"Dream Property"}),"Worldwide"]}),o.jsx("p",{className:"text-xl sm:text-2xl text-muted-foreground mb-8 max-w-2xl leading-relaxed",children:"Experience speed, trust, and transparency in real estate. Connect with verified professionals and discover extraordinary properties worldwide."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-12",children:[o.jsx($,{variant:"hero",size:"lg",className:"text-lg px-8 py-4 h-auto",onClick:()=>window.location.href="/properties",children:"Browse Properties"}),o.jsx($,{variant:"outline",size:"lg",className:"text-lg px-8 py-4 h-auto",onClick:()=>window.location.href="/submit-property",children:"List Your Property"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-2",children:[o.jsx(Xi,{className:"h-6 w-6 text-primary mr-2"}),o.jsx("span",{className:"text-3xl font-bold",children:s.loading?"":s.totalProperties})]}),o.jsx("p",{className:"text-muted-foreground",children:"Premium Properties"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-2",children:[o.jsx(AN,{className:"h-6 w-6 text-primary mr-2"}),o.jsx("span",{className:"text-3xl font-bold",children:s.loading?"":s.countriesCount})]}),o.jsx("p",{className:"text-muted-foreground",children:"Countries"})]})]})]})}),o.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:o.jsx("div",{className:"w-6 h-10 border-2 border-primary rounded-full flex justify-center",children:o.jsx("div",{className:"w-1 h-3 bg-primary rounded-full mt-2"})})})]})},Z=_.forwardRef(({className:s,type:e,...t},n)=>o.jsx("input",{type:e,className:Se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));Z.displayName="Input";function wA(s,[e,t]){return Math.min(t,Math.max(e,s))}function Ne(s,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(s==null||s(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function v4(s,e){const t=_.createContext(e),n=i=>{const{children:a,...l}=i,c=_.useMemo(()=>l,Object.values(l));return o.jsx(t.Provider,{value:c,children:a})};n.displayName=s+"Provider";function r(i){const a=_.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${s}\``)}return[n,r]}function Lo(s,e=[]){let t=[];function n(i,a){const l=_.createContext(a),c=t.length;t=[...t,a];const d=f=>{var v;const{scope:p,children:m,...y}=f,g=((v=p==null?void 0:p[s])==null?void 0:v[c])||l,w=_.useMemo(()=>y,Object.values(y));return o.jsx(g.Provider,{value:w,children:m})};d.displayName=i+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[s])==null?void 0:g[c])||l,y=_.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const r=()=>{const i=t.map(a=>_.createContext(a));return function(l){const c=(l==null?void 0:l[s])||i;return _.useMemo(()=>({[`__scope${s}`]:{...l,[s]:c}}),[l,c])}};return r.scopeName=s,[n,y4(r,...e)]}function y4(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function kN(s){const e=s+"CollectionProvider",[t,n]=Lo(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:v}=g,b=va.useRef(null),x=va.useRef(new Map).current;return o.jsx(r,{scope:w,itemMap:x,collectionRef:b,children:v})};a.displayName=e;const l=s+"CollectionSlot",c=Du(l),d=va.forwardRef((g,w)=>{const{scope:v,children:b}=g,x=i(l,v),S=tt(w,x.collectionRef);return o.jsx(c,{ref:S,children:b})});d.displayName=l;const h=s+"CollectionItemSlot",f="data-radix-collection-item",p=Du(h),m=va.forwardRef((g,w)=>{const{scope:v,children:b,...x}=g,S=va.useRef(null),j=tt(w,S),N=i(h,v);return va.useEffect(()=>(N.itemMap.set(S,{ref:S,...x}),()=>void N.itemMap.delete(S))),o.jsx(p,{[f]:"",ref:j,children:b})});m.displayName=h;function y(g){const w=i(s+"CollectionConsumer",g);return va.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((N,k)=>x.indexOf(N.ref.current)-x.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:d,ItemSlot:m},y,n]}var x4=_.createContext(void 0);function H_(s){const e=_.useContext(x4);return s||e||"ltr"}var w4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pe=w4.reduce((s,e)=>{const t=Du(`Primitive.${e}`),n=_.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function b4(s,e){s&&Hu.flushSync(()=>s.dispatchEvent(e))}function jo(s){const e=_.useRef(s);return _.useEffect(()=>{e.current=s}),_.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function _4(s,e=globalThis==null?void 0:globalThis.document){const t=jo(s);_.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var S4="DismissableLayer",l0="dismissableLayer.update",A4="dismissableLayer.pointerDownOutside",j4="dismissableLayer.focusOutside",bA,PN=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),V_=_.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=s,d=_.useContext(PN),[h,f]=_.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=_.useState({}),y=tt(e,k=>f(k)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),b=h?g.indexOf(h):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=v,j=N4(k=>{const P=k.target,I=[...d.branches].some(T=>T.contains(P));!S||I||(r==null||r(k),a==null||a(k),k.defaultPrevented||l==null||l())},p),N=k4(k=>{const P=k.target;[...d.branches].some(T=>T.contains(P))||(i==null||i(k),a==null||a(k),k.defaultPrevented||l==null||l())},p);return _4(k=>{b===d.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},p),_.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(bA=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),_A(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=bA)}},[h,p,t,d]),_.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),_A())},[h,d]),_.useEffect(()=>{const k=()=>m({});return document.addEventListener(l0,k),()=>document.removeEventListener(l0,k)},[]),o.jsx(Pe.div,{...c,ref:y,style:{pointerEvents:x?S?"auto":"none":void 0,...s.style},onFocusCapture:Ne(s.onFocusCapture,N.onFocusCapture),onBlurCapture:Ne(s.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Ne(s.onPointerDownCapture,j.onPointerDownCapture)})});V_.displayName=S4;var E4="DismissableLayerBranch",C4=_.forwardRef((s,e)=>{const t=_.useContext(PN),n=_.useRef(null),r=tt(e,n);return _.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),o.jsx(Pe.div,{...s,ref:r})});C4.displayName=E4;function N4(s,e=globalThis==null?void 0:globalThis.document){const t=jo(s),n=_.useRef(!1),r=_.useRef(()=>{});return _.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){TN(A4,t,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function k4(s,e=globalThis==null?void 0:globalThis.document){const t=jo(s),n=_.useRef(!1);return _.useEffect(()=>{const r=i=>{i.target&&!n.current&&TN(j4,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function _A(){const s=new CustomEvent(l0);document.dispatchEvent(s)}function TN(s,e,t,{discrete:n}){const r=t.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?b4(r,i):r.dispatchEvent(i)}var Tx=0;function RN(){_.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??SA()),document.body.insertAdjacentElement("beforeend",s[1]??SA()),Tx++,()=>{Tx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Tx--}},[])}function SA(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Rx="focusScope.autoFocusOnMount",Ix="focusScope.autoFocusOnUnmount",AA={bubbles:!1,cancelable:!0},P4="FocusScope",W_=_.forwardRef((s,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...a}=s,[l,c]=_.useState(null),d=jo(r),h=jo(i),f=_.useRef(null),p=tt(e,g=>c(g)),m=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(n){let g=function(x){if(m.paused||!l)return;const S=x.target;l.contains(S)?f.current=S:xa(f.current,{select:!0})},w=function(x){if(m.paused||!l)return;const S=x.relatedTarget;S!==null&&(l.contains(S)||xa(f.current,{select:!0}))},v=function(x){if(document.activeElement===document.body)for(const j of x)j.removedNodes.length>0&&xa(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const b=new MutationObserver(v);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),b.disconnect()}}},[n,l,m.paused]),_.useEffect(()=>{if(l){EA.add(m);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Rx,AA);l.addEventListener(Rx,d),l.dispatchEvent(v),v.defaultPrevented||(T4(D4(IN(l)),{select:!0}),document.activeElement===g&&xa(l))}return()=>{l.removeEventListener(Rx,d),setTimeout(()=>{const v=new CustomEvent(Ix,AA);l.addEventListener(Ix,h),l.dispatchEvent(v),v.defaultPrevented||xa(g??document.body,{select:!0}),l.removeEventListener(Ix,h),EA.remove(m)},0)}}},[l,d,h,m]);const y=_.useCallback(g=>{if(!t&&!n||m.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const b=g.currentTarget,[x,S]=R4(b);x&&S?!g.shiftKey&&v===S?(g.preventDefault(),t&&xa(x,{select:!0})):g.shiftKey&&v===x&&(g.preventDefault(),t&&xa(S,{select:!0})):v===b&&g.preventDefault()}},[t,n,m.paused]);return o.jsx(Pe.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});W_.displayName=P4;function T4(s,{select:e=!1}={}){const t=document.activeElement;for(const n of s)if(xa(n,{select:e}),document.activeElement!==t)return}function R4(s){const e=IN(s),t=jA(e,s),n=jA(e.reverse(),s);return[t,n]}function IN(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function jA(s,e){for(const t of s)if(!I4(t,{upTo:e}))return t}function I4(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function M4(s){return s instanceof HTMLInputElement&&"select"in s}function xa(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&M4(s)&&e&&s.select()}}var EA=L4();function L4(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=CA(s,e),s.unshift(e)},remove(e){var t;s=CA(s,e),(t=s[0])==null||t.resume()}}}function CA(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function D4(s){return s.filter(e=>e.tagName!=="A")}var vs=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},O4=Fb[" useId ".trim().toString()]||(()=>{}),F4=0;function go(s){const[e,t]=_.useState(O4());return vs(()=>{t(n=>n??String(F4++))},[s]),e?`radix-${e}`:""}const $4=["top","right","bottom","left"],Eo=Math.min,mn=Math.max,_v=Math.round,Um=Math.floor,ri=s=>({x:s,y:s}),U4={left:"right",right:"left",bottom:"top",top:"bottom"},B4={start:"end",end:"start"};function c0(s,e,t){return mn(s,Eo(e,t))}function ra(s,e){return typeof s=="function"?s(e):s}function ia(s){return s.split("-")[0]}function Xu(s){return s.split("-")[1]}function q_(s){return s==="x"?"y":"x"}function G_(s){return s==="y"?"height":"width"}const z4=new Set(["top","bottom"]);function ei(s){return z4.has(ia(s))?"y":"x"}function K_(s){return q_(ei(s))}function H4(s,e,t){t===void 0&&(t=!1);const n=Xu(s),r=K_(s),i=G_(r);let a=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Sv(a)),[a,Sv(a)]}function V4(s){const e=Sv(s);return[d0(s),e,d0(e)]}function d0(s){return s.replace(/start|end/g,e=>B4[e])}const NA=["left","right"],kA=["right","left"],W4=["top","bottom"],q4=["bottom","top"];function G4(s,e,t){switch(s){case"top":case"bottom":return t?e?kA:NA:e?NA:kA;case"left":case"right":return e?W4:q4;default:return[]}}function K4(s,e,t,n){const r=Xu(s);let i=G4(ia(s),t==="start",n);return r&&(i=i.map(a=>a+"-"+r),e&&(i=i.concat(i.map(d0)))),i}function Sv(s){return s.replace(/left|right|bottom|top/g,e=>U4[e])}function X4(s){return{top:0,right:0,bottom:0,left:0,...s}}function MN(s){return typeof s!="number"?X4(s):{top:s,right:s,bottom:s,left:s}}function Av(s){const{x:e,y:t,width:n,height:r}=s;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function PA(s,e,t){let{reference:n,floating:r}=s;const i=ei(e),a=K_(e),l=G_(a),c=ia(e),d=i==="y",h=n.x+n.width/2-r.width/2,f=n.y+n.height/2-r.height/2,p=n[l]/2-r[l]/2;let m;switch(c){case"top":m={x:h,y:n.y-r.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-r.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Xu(e)){case"start":m[a]-=p*(t&&d?-1:1);break;case"end":m[a]+=p*(t&&d?-1:1);break}return m}const Y4=async(s,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:a}=t,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:s,floating:e,strategy:r}),{x:h,y:f}=PA(d,n,c),p=n,m={},y=0;for(let g=0;g<l.length;g++){const{name:w,fn:v}=l[g],{x:b,y:x,data:S,reset:j}=await v({x:h,y:f,initialPlacement:n,placement:p,strategy:r,middlewareData:m,rects:d,platform:a,elements:{reference:s,floating:e}});h=b??h,f=x??f,m={...m,[w]:{...m[w],...S}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(d=j.rects===!0?await a.getElementRects({reference:s,floating:e,strategy:r}):j.rects),{x:h,y:f}=PA(d,p,c)),g=-1)}return{x:h,y:f,placement:p,strategy:r,middlewareData:m}};async function bf(s,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:a,elements:l,strategy:c}=s,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=ra(e,s),y=MN(m),w=l[p?f==="floating"?"reference":"floating":f],v=Av(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),b=f==="floating"?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},j=Av(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-j.top+y.top)/S.y,bottom:(j.bottom-v.bottom+y.bottom)/S.y,left:(v.left-j.left+y.left)/S.x,right:(j.right-v.right+y.right)/S.x}}const Q4=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:r,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=ra(s,e)||{};if(d==null)return{};const f=MN(h),p={x:t,y:n},m=K_(r),y=G_(m),g=await a.getDimensions(d),w=m==="y",v=w?"top":"left",b=w?"bottom":"right",x=w?"clientHeight":"clientWidth",S=i.reference[y]+i.reference[m]-p[m]-i.floating[y],j=p[m]-i.reference[m],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let k=N?N[x]:0;(!k||!await(a.isElement==null?void 0:a.isElement(N)))&&(k=l.floating[x]||i.floating[y]);const P=S/2-j/2,I=k/2-g[y]/2-1,T=Eo(f[v],I),M=Eo(f[b],I),U=T,z=k-g[y]-M,B=k/2-g[y]/2+P,J=c0(U,B,z),F=!c.arrow&&Xu(r)!=null&&B!==J&&i.reference[y]/2-(B<U?T:M)-g[y]/2<0,W=F?B<U?B-U:B-z:0;return{[m]:p[m]+W,data:{[m]:J,centerOffset:B-J-W,...F&&{alignmentOffset:W}},reset:F}}}),J4=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:r,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=ra(s,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=ia(r),b=ei(l),x=ia(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=p||(x||!g?[Sv(l)]:V4(l)),N=y!=="none";!p&&N&&j.push(...K4(l,g,y,S));const k=[l,...j],P=await bf(e,w),I=[];let T=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&I.push(P[v]),f){const B=H4(r,a,S);I.push(P[B[0]],P[B[1]])}if(T=[...T,{placement:r,overflows:I}],!I.every(B=>B<=0)){var M,U;const B=(((M=i.flip)==null?void 0:M.index)||0)+1,J=k[B];if(J&&(!(f==="alignment"?b!==ei(J):!1)||T.every(D=>D.overflows[0]>0&&ei(D.placement)===b)))return{data:{index:B,overflows:T},reset:{placement:J}};let F=(U=T.filter(W=>W.overflows[0]<=0).sort((W,D)=>W.overflows[1]-D.overflows[1])[0])==null?void 0:U.placement;if(!F)switch(m){case"bestFit":{var z;const W=(z=T.filter(D=>{if(N){const R=ei(D.placement);return R===b||R==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(R=>R>0).reduce((R,O)=>R+O,0)]).sort((D,R)=>D[1]-R[1])[0])==null?void 0:z[0];W&&(F=W);break}case"initialPlacement":F=l;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function TA(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function RA(s){return $4.some(e=>s[e]>=0)}const Z4=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=ra(s,e);switch(n){case"referenceHidden":{const i=await bf(e,{...r,elementContext:"reference"}),a=TA(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:RA(a)}}}case"escaped":{const i=await bf(e,{...r,altBoundary:!0}),a=TA(i,t.floating);return{data:{escapedOffsets:a,escaped:RA(a)}}}default:return{}}}}},LN=new Set(["left","top"]);async function e$(s,e){const{placement:t,platform:n,elements:r}=s,i=await(n.isRTL==null?void 0:n.isRTL(r.floating)),a=ia(t),l=Xu(t),c=ei(t)==="y",d=LN.has(a)?-1:1,h=i&&c?-1:1,f=ra(e,s);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(m=l==="end"?y*-1:y),c?{x:m*h,y:p*d}:{x:p*d,y:m*h}}const t$=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:r,y:i,placement:a,middlewareData:l}=e,c=await e$(e,s);return a===((t=l.offset)==null?void 0:t.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:a}}}}},s$=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x:v,y:b}=w;return{x:v,y:b}}},...c}=ra(s,e),d={x:t,y:n},h=await bf(e,c),f=ei(ia(r)),p=q_(f);let m=d[p],y=d[f];if(i){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",b=m+h[w],x=m-h[v];m=c0(b,m,x)}if(a){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=y+h[w],x=y-h[v];y=c0(b,y,x)}const g=l.fn({...e,[p]:m,[f]:y});return{...g,data:{x:g.x-t,y:g.y-n,enabled:{[p]:i,[f]:a}}}}}},n$=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:r,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ra(s,e),h={x:t,y:n},f=ei(r),p=q_(f);let m=h[p],y=h[f];const g=ra(l,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const x=p==="y"?"height":"width",S=i.reference[p]-i.floating[x]+w.mainAxis,j=i.reference[p]+i.reference[x]-w.mainAxis;m<S?m=S:m>j&&(m=j)}if(d){var v,b;const x=p==="y"?"width":"height",S=LN.has(ia(r)),j=i.reference[f]-i.floating[x]+(S&&((v=a.offset)==null?void 0:v[f])||0)+(S?0:w.crossAxis),N=i.reference[f]+i.reference[x]+(S?0:((b=a.offset)==null?void 0:b[f])||0)-(S?w.crossAxis:0);y<j?y=j:y>N&&(y=N)}return{[p]:m,[f]:y}}}},r$=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,n;const{placement:r,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=ra(s,e),h=await bf(e,d),f=ia(r),p=Xu(r),m=ei(r)==="y",{width:y,height:g}=i.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,w=p==="end"?"top":"bottom");const b=g-h.top-h.bottom,x=y-h.left-h.right,S=Eo(g-h[w],b),j=Eo(y-h[v],x),N=!e.middlewareData.shift;let k=S,P=j;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=x),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=b),N&&!p){const T=mn(h.left,0),M=mn(h.right,0),U=mn(h.top,0),z=mn(h.bottom,0);m?P=y-2*(T!==0||M!==0?T+M:mn(h.left,h.right)):k=g-2*(U!==0||z!==0?U+z:mn(h.top,h.bottom))}await c({...e,availableWidth:P,availableHeight:k});const I=await a.getDimensions(l.floating);return y!==I.width||g!==I.height?{reset:{rects:!0}}:{}}}};function ky(){return typeof window<"u"}function Yu(s){return DN(s)?(s.nodeName||"").toLowerCase():"#document"}function wn(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function li(s){var e;return(e=(DN(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function DN(s){return ky()?s instanceof Node||s instanceof wn(s).Node:!1}function _r(s){return ky()?s instanceof Element||s instanceof wn(s).Element:!1}function ii(s){return ky()?s instanceof HTMLElement||s instanceof wn(s).HTMLElement:!1}function IA(s){return!ky()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof wn(s).ShadowRoot}const i$=new Set(["inline","contents"]);function hm(s){const{overflow:e,overflowX:t,overflowY:n,display:r}=Sr(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!i$.has(r)}const a$=new Set(["table","td","th"]);function o$(s){return a$.has(Yu(s))}const l$=[":popover-open",":modal"];function Py(s){return l$.some(e=>{try{return s.matches(e)}catch{return!1}})}const c$=["transform","translate","scale","rotate","perspective"],d$=["transform","translate","scale","rotate","perspective","filter"],u$=["paint","layout","strict","content"];function X_(s){const e=Y_(),t=_r(s)?Sr(s):s;return c$.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||d$.some(n=>(t.willChange||"").includes(n))||u$.some(n=>(t.contain||"").includes(n))}function h$(s){let e=Co(s);for(;ii(e)&&!Ou(e);){if(X_(e))return e;if(Py(e))return null;e=Co(e)}return null}function Y_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const f$=new Set(["html","body","#document"]);function Ou(s){return f$.has(Yu(s))}function Sr(s){return wn(s).getComputedStyle(s)}function Ty(s){return _r(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Co(s){if(Yu(s)==="html")return s;const e=s.assignedSlot||s.parentNode||IA(s)&&s.host||li(s);return IA(e)?e.host:e}function ON(s){const e=Co(s);return Ou(e)?s.ownerDocument?s.ownerDocument.body:s.body:ii(e)&&hm(e)?e:ON(e)}function _f(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=ON(s),i=r===((n=s.ownerDocument)==null?void 0:n.body),a=wn(r);if(i){const l=u0(a);return e.concat(a,a.visualViewport||[],hm(r)?r:[],l&&t?_f(l):[])}return e.concat(r,_f(r,[],t))}function u0(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function FN(s){const e=Sr(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=ii(s),i=r?s.offsetWidth:t,a=r?s.offsetHeight:n,l=_v(t)!==i||_v(n)!==a;return l&&(t=i,n=a),{width:t,height:n,$:l}}function Q_(s){return _r(s)?s:s.contextElement}function vd(s){const e=Q_(s);if(!ii(e))return ri(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:i}=FN(e);let a=(i?_v(t.width):t.width)/n,l=(i?_v(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const p$=ri(0);function $N(s){const e=wn(s);return!Y_()||!e.visualViewport?p$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function m$(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==wn(s)?!1:e}function pc(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=s.getBoundingClientRect(),i=Q_(s);let a=ri(1);e&&(n?_r(n)&&(a=vd(n)):a=vd(s));const l=m$(i,t,n)?$N(i):ri(0);let c=(r.left+l.x)/a.x,d=(r.top+l.y)/a.y,h=r.width/a.x,f=r.height/a.y;if(i){const p=wn(i),m=n&&_r(n)?wn(n):n;let y=p,g=u0(y);for(;g&&n&&m!==y;){const w=vd(g),v=g.getBoundingClientRect(),b=Sr(g),x=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*w.x,S=v.top+(g.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,f*=w.y,c+=x,d+=S,y=wn(g),g=u0(y)}}return Av({width:h,height:f,x:c,y:d})}function J_(s,e){const t=Ty(s).scrollLeft;return e?e.left+t:pc(li(s)).left+t}function UN(s,e,t){t===void 0&&(t=!1);const n=s.getBoundingClientRect(),r=n.left+e.scrollLeft-(t?0:J_(s,n)),i=n.top+e.scrollTop;return{x:r,y:i}}function g$(s){let{elements:e,rect:t,offsetParent:n,strategy:r}=s;const i=r==="fixed",a=li(n),l=e?Py(e.floating):!1;if(n===a||l&&i)return t;let c={scrollLeft:0,scrollTop:0},d=ri(1);const h=ri(0),f=ii(n);if((f||!f&&!i)&&((Yu(n)!=="body"||hm(a))&&(c=Ty(n)),ii(n))){const m=pc(n);d=vd(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const p=a&&!f&&!i?UN(a,c,!0):ri(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:t.y*d.y-c.scrollTop*d.y+h.y+p.y}}function v$(s){return Array.from(s.getClientRects())}function y$(s){const e=li(s),t=Ty(s),n=s.ownerDocument.body,r=mn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=mn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+J_(s);const l=-t.scrollTop;return Sr(n).direction==="rtl"&&(a+=mn(e.clientWidth,n.clientWidth)-r),{width:r,height:i,x:a,y:l}}function x$(s,e){const t=wn(s),n=li(s),r=t.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const d=Y_();(!d||d&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}const w$=new Set(["absolute","fixed"]);function b$(s,e){const t=pc(s,!0,e==="fixed"),n=t.top+s.clientTop,r=t.left+s.clientLeft,i=ii(s)?vd(s):ri(1),a=s.clientWidth*i.x,l=s.clientHeight*i.y,c=r*i.x,d=n*i.y;return{width:a,height:l,x:c,y:d}}function MA(s,e,t){let n;if(e==="viewport")n=x$(s,t);else if(e==="document")n=y$(li(s));else if(_r(e))n=b$(e,t);else{const r=$N(s);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Av(n)}function BN(s,e){const t=Co(s);return t===e||!_r(t)||Ou(t)?!1:Sr(t).position==="fixed"||BN(t,e)}function _$(s,e){const t=e.get(s);if(t)return t;let n=_f(s,[],!1).filter(l=>_r(l)&&Yu(l)!=="body"),r=null;const i=Sr(s).position==="fixed";let a=i?Co(s):s;for(;_r(a)&&!Ou(a);){const l=Sr(a),c=X_(a);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&w$.has(r.position)||hm(a)&&!c&&BN(s,a))?n=n.filter(h=>h!==a):r=l,a=Co(a)}return e.set(s,n),n}function S$(s){let{element:e,boundary:t,rootBoundary:n,strategy:r}=s;const a=[...t==="clippingAncestors"?Py(e)?[]:_$(e,this._c):[].concat(t),n],l=a[0],c=a.reduce((d,h)=>{const f=MA(e,h,r);return d.top=mn(f.top,d.top),d.right=Eo(f.right,d.right),d.bottom=Eo(f.bottom,d.bottom),d.left=mn(f.left,d.left),d},MA(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function A$(s){const{width:e,height:t}=FN(s);return{width:e,height:t}}function j$(s,e,t){const n=ii(e),r=li(e),i=t==="fixed",a=pc(s,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=ri(0);function d(){c.x=J_(r)}if(n||!n&&!i)if((Yu(e)!=="body"||hm(r))&&(l=Ty(e)),n){const m=pc(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else r&&d();i&&!n&&r&&d();const h=r&&!n&&!i?UN(r,l):ri(0),f=a.left+l.scrollLeft-c.x-h.x,p=a.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function Mx(s){return Sr(s).position==="static"}function LA(s,e){if(!ii(s)||Sr(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return li(s)===t&&(t=t.ownerDocument.body),t}function zN(s,e){const t=wn(s);if(Py(s))return t;if(!ii(s)){let r=Co(s);for(;r&&!Ou(r);){if(_r(r)&&!Mx(r))return r;r=Co(r)}return t}let n=LA(s,e);for(;n&&o$(n)&&Mx(n);)n=LA(n,e);return n&&Ou(n)&&Mx(n)&&!X_(n)?t:n||h$(s)||t}const E$=async function(s){const e=this.getOffsetParent||zN,t=this.getDimensions,n=await t(s.floating);return{reference:j$(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function C$(s){return Sr(s).direction==="rtl"}const N$={convertOffsetParentRelativeRectToViewportRelativeRect:g$,getDocumentElement:li,getClippingRect:S$,getOffsetParent:zN,getElementRects:E$,getClientRects:v$,getDimensions:A$,getScale:vd,isElement:_r,isRTL:C$};function HN(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function k$(s,e){let t=null,n;const r=li(s);function i(){var l;clearTimeout(n),(l=t)==null||l.disconnect(),t=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=s.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=d;if(l||e(),!p||!m)return;const y=Um(f),g=Um(r.clientWidth-(h+p)),w=Um(r.clientHeight-(f+m)),v=Um(h),x={rootMargin:-y+"px "+-g+"px "+-w+"px "+-v+"px",threshold:mn(0,Eo(1,c))||1};let S=!0;function j(N){const k=N[0].intersectionRatio;if(k!==c){if(!S)return a();k?a(!1,k):n=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!HN(d,s.getBoundingClientRect())&&a(),S=!1}try{t=new IntersectionObserver(j,{...x,root:r.ownerDocument})}catch{t=new IntersectionObserver(j,x)}t.observe(s)}return a(!0),i}function P$(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Q_(s),h=r||i?[...d?_f(d):[],..._f(e)]:[];h.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=d&&l?k$(d,t):null;let p=-1,m=null;a&&(m=new ResizeObserver(v=>{let[b]=v;b&&b.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(e)})),t()}),d&&!c&&m.observe(d),m.observe(e));let y,g=c?pc(s):null;c&&w();function w(){const v=pc(s);g&&!HN(g,v)&&t(),g=v,y=requestAnimationFrame(w)}return t(),()=>{var v;h.forEach(b=>{r&&b.removeEventListener("scroll",t),i&&b.removeEventListener("resize",t)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const T$=t$,R$=s$,I$=J4,M$=r$,L$=Z4,DA=Q4,D$=n$,O$=(s,e,t)=>{const n=new Map,r={platform:N$,...t},i={...r.platform,_c:n};return Y4(s,e,{...r,platform:i})};var F$=typeof document<"u",$$=function(){},cg=F$?_.useLayoutEffect:$$;function jv(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,n,r;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!jv(s[n],e[n]))return!1;return!0}if(r=Object.keys(s),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const i=r[n];if(!(i==="_owner"&&s.$$typeof)&&!jv(s[i],e[i]))return!1}return!0}return s!==s&&e!==e}function VN(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function OA(s,e){const t=VN(s);return Math.round(e*t)/t}function Lx(s){const e=_.useRef(s);return cg(()=>{e.current=s}),e}function U$(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=s,[h,f]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=_.useState(n);jv(p,n)||m(n);const[y,g]=_.useState(null),[w,v]=_.useState(null),b=_.useCallback(D=>{D!==N.current&&(N.current=D,g(D))},[]),x=_.useCallback(D=>{D!==k.current&&(k.current=D,v(D))},[]),S=i||y,j=a||w,N=_.useRef(null),k=_.useRef(null),P=_.useRef(h),I=c!=null,T=Lx(c),M=Lx(r),U=Lx(d),z=_.useCallback(()=>{if(!N.current||!k.current)return;const D={placement:e,strategy:t,middleware:p};M.current&&(D.platform=M.current),O$(N.current,k.current,D).then(R=>{const O={...R,isPositioned:U.current!==!1};B.current&&!jv(P.current,O)&&(P.current=O,Hu.flushSync(()=>{f(O)}))})},[p,e,t,M,U]);cg(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[d]);const B=_.useRef(!1);cg(()=>(B.current=!0,()=>{B.current=!1}),[]),cg(()=>{if(S&&(N.current=S),j&&(k.current=j),S&&j){if(T.current)return T.current(S,j,z);z()}},[S,j,z,T,I]);const J=_.useMemo(()=>({reference:N,floating:k,setReference:b,setFloating:x}),[b,x]),F=_.useMemo(()=>({reference:S,floating:j}),[S,j]),W=_.useMemo(()=>{const D={position:t,left:0,top:0};if(!F.floating)return D;const R=OA(F.floating,h.x),O=OA(F.floating,h.y);return l?{...D,transform:"translate("+R+"px, "+O+"px)",...VN(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:R,top:O}},[t,l,F.floating,h.x,h.y]);return _.useMemo(()=>({...h,update:z,refs:J,elements:F,floatingStyles:W}),[h,z,J,F,W])}const B$=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:n,padding:r}=typeof s=="function"?s(t):s;return n&&e(n)?n.current!=null?DA({element:n.current,padding:r}).fn(t):{}:n?DA({element:n,padding:r}).fn(t):{}}}},z$=(s,e)=>({...T$(s),options:[s,e]}),H$=(s,e)=>({...R$(s),options:[s,e]}),V$=(s,e)=>({...D$(s),options:[s,e]}),W$=(s,e)=>({...I$(s),options:[s,e]}),q$=(s,e)=>({...M$(s),options:[s,e]}),G$=(s,e)=>({...L$(s),options:[s,e]}),K$=(s,e)=>({...B$(s),options:[s,e]});var X$="Arrow",WN=_.forwardRef((s,e)=>{const{children:t,width:n=10,height:r=5,...i}=s;return o.jsx(Pe.svg,{...i,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?t:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});WN.displayName=X$;var Y$=WN;function qN(s){const[e,t]=_.useState(void 0);return vs(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=s.offsetWidth,l=s.offsetHeight;t({width:a,height:l})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else t(void 0)},[s]),e}var Z_="Popper",[GN,KN]=Lo(Z_),[Q$,XN]=GN(Z_),YN=s=>{const{__scopePopper:e,children:t}=s,[n,r]=_.useState(null);return o.jsx(Q$,{scope:e,anchor:n,onAnchorChange:r,children:t})};YN.displayName=Z_;var QN="PopperAnchor",JN=_.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:n,...r}=s,i=XN(QN,t),a=_.useRef(null),l=tt(e,a);return _.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(Pe.div,{...r,ref:l})});JN.displayName=QN;var e1="PopperContent",[J$,Z$]=GN(e1),ZN=_.forwardRef((s,e)=>{var G,Te,st,$e,Ue,Be;const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=s,w=XN(e1,t),[v,b]=_.useState(null),x=tt(e,ys=>b(ys)),[S,j]=_.useState(null),N=qN(S),k=(N==null?void 0:N.width)??0,P=(N==null?void 0:N.height)??0,I=n+(i!=="center"?"-"+i:""),T=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(d)?d:[d],U=M.length>0,z={padding:T,boundary:M.filter(t3),altBoundary:U},{refs:B,floatingStyles:J,placement:F,isPositioned:W,middlewareData:D}=U$({strategy:"fixed",placement:I,whileElementsMounted:(...ys)=>P$(...ys,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[z$({mainAxis:r+P,alignmentAxis:a}),c&&H$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?V$():void 0,...z}),c&&W$({...z}),q$({...z,apply:({elements:ys,rects:Nn,availableWidth:ha,availableHeight:L})=>{const{width:Y,height:fe}=Nn.reference,Ge=ys.floating.style;Ge.setProperty("--radix-popper-available-width",`${ha}px`),Ge.setProperty("--radix-popper-available-height",`${L}px`),Ge.setProperty("--radix-popper-anchor-width",`${Y}px`),Ge.setProperty("--radix-popper-anchor-height",`${fe}px`)}}),S&&K$({element:S,padding:l}),s3({arrowWidth:k,arrowHeight:P}),p&&G$({strategy:"referenceHidden",...z})]}),[R,O]=sk(F),H=jo(y);vs(()=>{W&&(H==null||H())},[W,H]);const Q=(G=D.arrow)==null?void 0:G.x,ae=(Te=D.arrow)==null?void 0:Te.y,pe=((st=D.arrow)==null?void 0:st.centerOffset)!==0,[Ie,Ee]=_.useState();return vs(()=>{v&&Ee(window.getComputedStyle(v).zIndex)},[v]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:W?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[($e=D.transformOrigin)==null?void 0:$e.x,(Ue=D.transformOrigin)==null?void 0:Ue.y].join(" "),...((Be=D.hide)==null?void 0:Be.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:o.jsx(J$,{scope:t,placedSide:R,onArrowChange:j,arrowX:Q,arrowY:ae,shouldHideArrow:pe,children:o.jsx(Pe.div,{"data-side":R,"data-align":O,...g,ref:x,style:{...g.style,animation:W?void 0:"none"}})})})});ZN.displayName=e1;var ek="PopperArrow",e3={top:"bottom",right:"left",bottom:"top",left:"right"},tk=_.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=Z$(ek,n),a=e3[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(Y$,{...r,ref:t,style:{...r.style,display:"block"}})})});tk.displayName=ek;function t3(s){return s!==null}var s3=s=>({name:"transformOrigin",options:s,fn(e){var w,v,b;const{placement:t,rects:n,middlewareData:r}=e,a=((w=r.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:s.arrowWidth,c=a?0:s.arrowHeight,[d,h]=sk(t),f={start:"0%",center:"50%",end:"100%"}[h],p=(((v=r.arrow)==null?void 0:v.x)??0)+l/2,m=(((b=r.arrow)==null?void 0:b.y)??0)+c/2;let y="",g="";return d==="bottom"?(y=a?f:`${p}px`,g=`${-c}px`):d==="top"?(y=a?f:`${p}px`,g=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,g=a?f:`${m}px`):d==="left"&&(y=`${n.floating.width+c}px`,g=a?f:`${m}px`),{data:{x:y,y:g}}}});function sk(s){const[e,t="center"]=s.split("-");return[e,t]}var n3=YN,r3=JN,i3=ZN,a3=tk,o3="Portal",t1=_.forwardRef((s,e)=>{var l;const{container:t,...n}=s,[r,i]=_.useState(!1);vs(()=>i(!0),[]);const a=t||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?HM.createPortal(o.jsx(Pe.div,{...n,ref:e}),a):null});t1.displayName=o3;var l3=Fb[" useInsertionEffect ".trim().toString()]||vs;function Fu({prop:s,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,i,a]=c3({defaultProp:e,onChange:t}),l=s!==void 0,c=l?s:r;{const h=_.useRef(s!==void 0);_.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=_.useCallback(h=>{var f;if(l){const p=d3(h)?h(s):h;p!==s&&((f=a.current)==null||f.call(a,p))}else i(h)},[l,s,i,a]);return[c,d]}function c3({defaultProp:s,onChange:e}){const[t,n]=_.useState(s),r=_.useRef(t),i=_.useRef(e);return l3(()=>{i.current=e},[e]),_.useEffect(()=>{var a;r.current!==t&&((a=i.current)==null||a.call(i,t),r.current=t)},[t,r]),[t,n,i]}function d3(s){return typeof s=="function"}function nk(s){const e=_.useRef({value:s,previous:s});return _.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var rk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),u3="VisuallyHidden",h3=_.forwardRef((s,e)=>o.jsx(Pe.span,{...s,ref:e,style:{...rk,...s.style}}));h3.displayName=u3;var f3=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},Dc=new WeakMap,Bm=new WeakMap,zm={},Dx=0,ik=function(s){return s&&(s.host||ik(s.parentNode))},p3=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=ik(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},m3=function(s,e,t,n){var r=p3(e,Array.isArray(s)?s:[s]);zm[t]||(zm[t]=new WeakMap);var i=zm[t],a=[],l=new Set,c=new Set(r),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};r.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var m=p.getAttribute(n),y=m!==null&&m!=="false",g=(Dc.get(p)||0)+1,w=(i.get(p)||0)+1;Dc.set(p,g),i.set(p,w),a.push(p),g===1&&y&&Bm.set(p,!0),w===1&&p.setAttribute(t,"true"),y||p.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return h(e),l.clear(),Dx++,function(){a.forEach(function(f){var p=Dc.get(f)-1,m=i.get(f)-1;Dc.set(f,p),i.set(f,m),p||(Bm.has(f)||f.removeAttribute(n),Bm.delete(f)),m||f.removeAttribute(t)}),Dx--,Dx||(Dc=new WeakMap,Dc=new WeakMap,Bm=new WeakMap,zm={})}},ak=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),r=f3(s);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),m3(n,r,t,"aria-hidden")):function(){return null}},Jr=function(){return Jr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Jr.apply(this,arguments)};function ok(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function g3(s,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return s.concat(i||Array.prototype.slice.call(e))}var dg="right-scroll-bar-position",ug="width-before-scroll-bar",v3="with-scroll-bars-hidden",y3="--removed-body-scroll-bar-size";function Ox(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function x3(s,e){var t=_.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var w3=typeof window<"u"?_.useLayoutEffect:_.useEffect,FA=new WeakMap;function b3(s,e){var t=x3(null,function(n){return s.forEach(function(r){return Ox(r,n)})});return w3(function(){var n=FA.get(t);if(n){var r=new Set(n),i=new Set(s),a=t.current;r.forEach(function(l){i.has(l)||Ox(l,null)}),i.forEach(function(l){r.has(l)||Ox(l,a)})}FA.set(t,s)},[s]),t}function _3(s){return s}function S3(s,e){e===void 0&&(e=_3);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(i){var a=e(i,n);return t.push(a),function(){t=t.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){n=!0;var a=[];if(t.length){var l=t;t=[],l.forEach(i),a=t}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),t}}}};return r}function A3(s){s===void 0&&(s={});var e=S3(null);return e.options=Jr({async:!0,ssr:!1},s),e}var lk=function(s){var e=s.sideCar,t=ok(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return _.createElement(n,Jr({},t))};lk.isSideCarExport=!0;function j3(s,e){return s.useMedium(e),lk}var ck=A3(),Fx=function(){},Ry=_.forwardRef(function(s,e){var t=_.useRef(null),n=_.useState({onScrollCapture:Fx,onWheelCapture:Fx,onTouchMoveCapture:Fx}),r=n[0],i=n[1],a=s.forwardProps,l=s.children,c=s.className,d=s.removeScrollBar,h=s.enabled,f=s.shards,p=s.sideCar,m=s.noRelative,y=s.noIsolation,g=s.inert,w=s.allowPinchZoom,v=s.as,b=v===void 0?"div":v,x=s.gapMode,S=ok(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,N=b3([t,e]),k=Jr(Jr({},S),r);return _.createElement(_.Fragment,null,h&&_.createElement(j,{sideCar:ck,removeScrollBar:d,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:x}),a?_.cloneElement(_.Children.only(l),Jr(Jr({},k),{ref:N})):_.createElement(b,Jr({},k,{className:c,ref:N}),l))});Ry.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ry.classNames={fullWidth:ug,zeroRight:dg};var E3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function C3(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=E3();return e&&s.setAttribute("nonce",e),s}function N3(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function k3(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var P3=function(){var s=0,e=null;return{add:function(t){s==0&&(e=C3())&&(N3(e,t),k3(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},T3=function(){var s=P3();return function(e,t){_.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},dk=function(){var s=T3(),e=function(t){var n=t.styles,r=t.dynamic;return s(n,r),null};return e},R3={left:0,top:0,right:0,gap:0},$x=function(s){return parseInt(s||"",10)||0},I3=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],n=e[s==="padding"?"paddingTop":"marginTop"],r=e[s==="padding"?"paddingRight":"marginRight"];return[$x(t),$x(n),$x(r)]},M3=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return R3;var e=I3(s),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},L3=dk(),yd="data-scroll-locked",D3=function(s,e,t,n){var r=s.left,i=s.top,a=s.right,l=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(v3,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(yd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ug,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(dg," .").concat(dg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ug," .").concat(ug,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(yd,`] {
    `).concat(y3,": ").concat(l,`px;
  }
`)},$A=function(){var s=parseInt(document.body.getAttribute(yd)||"0",10);return isFinite(s)?s:0},O3=function(){_.useEffect(function(){return document.body.setAttribute(yd,($A()+1).toString()),function(){var s=$A()-1;s<=0?document.body.removeAttribute(yd):document.body.setAttribute(yd,s.toString())}},[])},F3=function(s){var e=s.noRelative,t=s.noImportant,n=s.gapMode,r=n===void 0?"margin":n;O3();var i=_.useMemo(function(){return M3(r)},[r]);return _.createElement(L3,{styles:D3(i,!e,r,t?"":"!important")})},h0=!1;if(typeof window<"u")try{var Hm=Object.defineProperty({},"passive",{get:function(){return h0=!0,!0}});window.addEventListener("test",Hm,Hm),window.removeEventListener("test",Hm,Hm)}catch{h0=!1}var Oc=h0?{passive:!1}:!1,$3=function(s){return s.tagName==="TEXTAREA"},uk=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!$3(s)&&t[e]==="visible")},U3=function(s){return uk(s,"overflowY")},B3=function(s){return uk(s,"overflowX")},UA=function(s,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=hk(s,n);if(r){var i=fk(s,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},z3=function(s){var e=s.scrollTop,t=s.scrollHeight,n=s.clientHeight;return[e,t,n]},H3=function(s){var e=s.scrollLeft,t=s.scrollWidth,n=s.clientWidth;return[e,t,n]},hk=function(s,e){return s==="v"?U3(e):B3(e)},fk=function(s,e){return s==="v"?z3(e):H3(e)},V3=function(s,e){return s==="h"&&e==="rtl"?-1:1},W3=function(s,e,t,n,r){var i=V3(s,window.getComputedStyle(e).direction),a=i*n,l=t.target,c=e.contains(l),d=!1,h=a>0,f=0,p=0;do{if(!l)break;var m=fk(s,l),y=m[0],g=m[1],w=m[2],v=g-w-i*y;(y||v)&&hk(s,l)&&(f+=v,p+=y);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!r)||!h&&(Math.abs(p)<1||!r))&&(d=!0),d},Vm=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},BA=function(s){return[s.deltaX,s.deltaY]},zA=function(s){return s&&"current"in s?s.current:s},q3=function(s,e){return s[0]===e[0]&&s[1]===e[1]},G3=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},K3=0,Fc=[];function X3(s){var e=_.useRef([]),t=_.useRef([0,0]),n=_.useRef(),r=_.useState(K3++)[0],i=_.useState(dk)[0],a=_.useRef(s);_.useEffect(function(){a.current=s},[s]),_.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(r));var g=g3([s.lockRef.current],(s.shards||[]).map(zA),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[s.inert,s.lockRef.current,s.shards]);var l=_.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=Vm(g),b=t.current,x="deltaX"in g?g.deltaX:b[0]-v[0],S="deltaY"in g?g.deltaY:b[1]-v[1],j,N=g.target,k=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in g&&k==="h"&&N.type==="range")return!1;var P=UA(k,N);if(!P)return!0;if(P?j=k:(j=k==="v"?"h":"v",P=UA(k,N)),!P)return!1;if(!n.current&&"changedTouches"in g&&(x||S)&&(n.current=j),!j)return!0;var I=n.current||j;return W3(I,w,g,I==="h"?x:S,!0)},[]),c=_.useCallback(function(g){var w=g;if(!(!Fc.length||Fc[Fc.length-1]!==i)){var v="deltaY"in w?BA(w):Vm(w),b=e.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&q3(j.delta,v)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var x=(a.current.shards||[]).map(zA).filter(Boolean).filter(function(j){return j.contains(w.target)}),S=x.length>0?l(w,x[0]):!a.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),d=_.useCallback(function(g,w,v,b){var x={name:g,delta:w,target:v,should:b,shadowParent:Y3(v)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(S){return S!==x})},1)},[]),h=_.useCallback(function(g){t.current=Vm(g),n.current=void 0},[]),f=_.useCallback(function(g){d(g.type,BA(g),g.target,l(g,s.lockRef.current))},[]),p=_.useCallback(function(g){d(g.type,Vm(g),g.target,l(g,s.lockRef.current))},[]);_.useEffect(function(){return Fc.push(i),s.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Oc),document.addEventListener("touchmove",c,Oc),document.addEventListener("touchstart",h,Oc),function(){Fc=Fc.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Oc),document.removeEventListener("touchmove",c,Oc),document.removeEventListener("touchstart",h,Oc)}},[]);var m=s.removeScrollBar,y=s.inert;return _.createElement(_.Fragment,null,y?_.createElement(i,{styles:G3(r)}):null,m?_.createElement(F3,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function Y3(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const Q3=j3(ck,X3);var s1=_.forwardRef(function(s,e){return _.createElement(Ry,Jr({},s,{ref:e,sideCar:Q3}))});s1.classNames=Ry.classNames;var J3=[" ","Enter","ArrowUp","ArrowDown"],Z3=[" ","Enter"],mc="Select",[Iy,My,eU]=kN(mc),[Qu,c5]=Lo(mc,[eU,KN]),Ly=KN(),[tU,Do]=Qu(mc),[sU,nU]=Qu(mc),pk=s=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:r,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:y}=s,g=Ly(e),[w,v]=_.useState(null),[b,x]=_.useState(null),[S,j]=_.useState(!1),N=H_(d),[k,P]=Fu({prop:n,defaultProp:r??!1,onChange:i,caller:mc}),[I,T]=Fu({prop:a,defaultProp:l,onChange:c,caller:mc}),M=_.useRef(null),U=w?y||!!w.closest("form"):!0,[z,B]=_.useState(new Set),J=Array.from(z).map(F=>F.props.value).join(";");return o.jsx(n3,{...g,children:o.jsxs(tU,{required:m,scope:e,trigger:w,onTriggerChange:v,valueNode:b,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:go(),value:I,onValueChange:T,open:k,onOpenChange:P,dir:N,triggerPointerDownPosRef:M,disabled:p,children:[o.jsx(Iy.Provider,{scope:e,children:o.jsx(sU,{scope:s.__scopeSelect,onNativeOptionAdd:_.useCallback(F=>{B(W=>new Set(W).add(F))},[]),onNativeOptionRemove:_.useCallback(F=>{B(W=>{const D=new Set(W);return D.delete(F),D})},[]),children:t})}),U?o.jsxs(Fk,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:F=>T(F.target.value),disabled:p,form:y,children:[I===void 0?o.jsx("option",{value:""}):null,Array.from(z)]},J):null]})})};pk.displayName=mc;var mk="SelectTrigger",gk=_.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:n=!1,...r}=s,i=Ly(t),a=Do(mk,t),l=a.disabled||n,c=tt(e,a.onTriggerChange),d=My(t),h=_.useRef("touch"),[f,p,m]=Uk(g=>{const w=d().filter(x=>!x.disabled),v=w.find(x=>x.value===a.value),b=Bk(w,g,v);b!==void 0&&a.onValueChange(b.value)}),y=g=>{l||(a.onOpenChange(!0),m()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(r3,{asChild:!0,...i,children:o.jsx(Pe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":$k(a.value)?"":void 0,...r,ref:c,onClick:Ne(r.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&y(g)}),onPointerDown:Ne(r.onPointerDown,g=>{h.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:Ne(r.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&J3.includes(g.key)&&(y(),g.preventDefault())})})})});gk.displayName=mk;var vk="SelectValue",yk=_.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:r,children:i,placeholder:a="",...l}=s,c=Do(vk,t),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=tt(e,c.onValueNodeChange);return vs(()=>{d(h)},[d,h]),o.jsx(Pe.span,{...l,ref:f,style:{pointerEvents:"none"},children:$k(c.value)?o.jsx(o.Fragment,{children:a}):i})});yk.displayName=vk;var rU="SelectIcon",xk=_.forwardRef((s,e)=>{const{__scopeSelect:t,children:n,...r}=s;return o.jsx(Pe.span,{"aria-hidden":!0,...r,ref:e,children:n||""})});xk.displayName=rU;var iU="SelectPortal",wk=s=>o.jsx(t1,{asChild:!0,...s});wk.displayName=iU;var gc="SelectContent",bk=_.forwardRef((s,e)=>{const t=Do(gc,s.__scopeSelect),[n,r]=_.useState();if(vs(()=>{r(new DocumentFragment)},[]),!t.open){const i=n;return i?Hu.createPortal(o.jsx(_k,{scope:s.__scopeSelect,children:o.jsx(Iy.Slot,{scope:s.__scopeSelect,children:o.jsx("div",{children:s.children})})}),i):null}return o.jsx(Sk,{...s,ref:e})});bk.displayName=gc;var Jn=10,[_k,Oo]=Qu(gc),aU="SelectContentImpl",oU=Du("SelectContent.RemoveScroll"),Sk=_.forwardRef((s,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:w,...v}=s,b=Do(gc,t),[x,S]=_.useState(null),[j,N]=_.useState(null),k=tt(e,G=>S(G)),[P,I]=_.useState(null),[T,M]=_.useState(null),U=My(t),[z,B]=_.useState(!1),J=_.useRef(!1);_.useEffect(()=>{if(x)return ak(x)},[x]),RN();const F=_.useCallback(G=>{const[Te,...st]=U().map(Be=>Be.ref.current),[$e]=st.slice(-1),Ue=document.activeElement;for(const Be of G)if(Be===Ue||(Be==null||Be.scrollIntoView({block:"nearest"}),Be===Te&&j&&(j.scrollTop=0),Be===$e&&j&&(j.scrollTop=j.scrollHeight),Be==null||Be.focus(),document.activeElement!==Ue))return},[U,j]),W=_.useCallback(()=>F([P,x]),[F,P,x]);_.useEffect(()=>{z&&W()},[z,W]);const{onOpenChange:D,triggerPointerDownPosRef:R}=b;_.useEffect(()=>{if(x){let G={x:0,y:0};const Te=$e=>{var Ue,Be;G={x:Math.abs(Math.round($e.pageX)-(((Ue=R.current)==null?void 0:Ue.x)??0)),y:Math.abs(Math.round($e.pageY)-(((Be=R.current)==null?void 0:Be.y)??0))}},st=$e=>{G.x<=10&&G.y<=10?$e.preventDefault():x.contains($e.target)||D(!1),document.removeEventListener("pointermove",Te),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",st,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",st,{capture:!0})}}},[x,D,R]),_.useEffect(()=>{const G=()=>D(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[D]);const[O,H]=Uk(G=>{const Te=U().filter(Ue=>!Ue.disabled),st=Te.find(Ue=>Ue.ref.current===document.activeElement),$e=Bk(Te,G,st);$e&&setTimeout(()=>$e.ref.current.focus())}),Q=_.useCallback((G,Te,st)=>{const $e=!J.current&&!st;(b.value!==void 0&&b.value===Te||$e)&&(I(G),$e&&(J.current=!0))},[b.value]),ae=_.useCallback(()=>x==null?void 0:x.focus(),[x]),pe=_.useCallback((G,Te,st)=>{const $e=!J.current&&!st;(b.value!==void 0&&b.value===Te||$e)&&M(G)},[b.value]),Ie=n==="popper"?f0:Ak,Ee=Ie===f0?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(_k,{scope:t,content:x,viewport:j,onViewportChange:N,itemRefCallback:Q,selectedItem:P,onItemLeave:ae,itemTextRefCallback:pe,focusSelectedItem:W,selectedItemText:T,position:n,isPositioned:z,searchRef:O,children:o.jsx(s1,{as:oU,allowPinchZoom:!0,children:o.jsx(W_,{asChild:!0,trapped:b.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:Ne(r,G=>{var Te;(Te=b.trigger)==null||Te.focus({preventScroll:!0}),G.preventDefault()}),children:o.jsx(V_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:o.jsx(Ie,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:G=>G.preventDefault(),...v,...Ee,onPlaced:()=>B(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ne(v.onKeyDown,G=>{const Te=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!Te&&G.key.length===1&&H(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let $e=U().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(G.key)&&($e=$e.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const Ue=G.target,Be=$e.indexOf(Ue);$e=$e.slice(Be+1)}setTimeout(()=>F($e)),G.preventDefault()}})})})})})})});Sk.displayName=aU;var lU="SelectItemAlignedPosition",Ak=_.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:n,...r}=s,i=Do(gc,t),a=Oo(gc,t),[l,c]=_.useState(null),[d,h]=_.useState(null),f=tt(e,k=>h(k)),p=My(t),m=_.useRef(!1),y=_.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:b}=a,x=_.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&w&&v){const k=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),T=v.getBoundingClientRect();if(i.dir!=="rtl"){const Ue=T.left-P.left,Be=I.left-Ue,ys=k.left-Be,Nn=k.width+ys,ha=Math.max(Nn,P.width),L=window.innerWidth-Jn,Y=wA(Be,[Jn,Math.max(Jn,L-ha)]);l.style.minWidth=Nn+"px",l.style.left=Y+"px"}else{const Ue=P.right-T.right,Be=window.innerWidth-I.right-Ue,ys=window.innerWidth-k.right-Be,Nn=k.width+ys,ha=Math.max(Nn,P.width),L=window.innerWidth-Jn,Y=wA(Be,[Jn,Math.max(Jn,L-ha)]);l.style.minWidth=Nn+"px",l.style.right=Y+"px"}const M=p(),U=window.innerHeight-Jn*2,z=g.scrollHeight,B=window.getComputedStyle(d),J=parseInt(B.borderTopWidth,10),F=parseInt(B.paddingTop,10),W=parseInt(B.borderBottomWidth,10),D=parseInt(B.paddingBottom,10),R=J+F+z+D+W,O=Math.min(w.offsetHeight*5,R),H=window.getComputedStyle(g),Q=parseInt(H.paddingTop,10),ae=parseInt(H.paddingBottom,10),pe=k.top+k.height/2-Jn,Ie=U-pe,Ee=w.offsetHeight/2,G=w.offsetTop+Ee,Te=J+F+G,st=R-Te;if(Te<=pe){const Ue=M.length>0&&w===M[M.length-1].ref.current;l.style.bottom="0px";const Be=d.clientHeight-g.offsetTop-g.offsetHeight,ys=Math.max(Ie,Ee+(Ue?ae:0)+Be+W),Nn=Te+ys;l.style.height=Nn+"px"}else{const Ue=M.length>0&&w===M[0].ref.current;l.style.top="0px";const ys=Math.max(pe,J+g.offsetTop+(Ue?Q:0)+Ee)+st;l.style.height=ys+"px",g.scrollTop=Te-pe+g.offsetTop}l.style.margin=`${Jn}px 0`,l.style.minHeight=O+"px",l.style.maxHeight=U+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,l,d,g,w,v,i.dir,n]);vs(()=>x(),[x]);const[S,j]=_.useState();vs(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const N=_.useCallback(k=>{k&&y.current===!0&&(x(),b==null||b(),y.current=!1)},[x,b]);return o.jsx(dU,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:N,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(Pe.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Ak.displayName=lU;var cU="SelectPopperPosition",f0=_.forwardRef((s,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=Jn,...i}=s,a=Ly(t);return o.jsx(i3,{...a,...i,ref:e,align:n,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});f0.displayName=cU;var[dU,n1]=Qu(gc,{}),p0="SelectViewport",jk=_.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:n,...r}=s,i=Oo(p0,t),a=n1(p0,t),l=tt(e,i.onViewportChange),c=_.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Iy.Slot,{scope:t,children:o.jsx(Pe.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Ne(r.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const m=Math.abs(c.current-h.scrollTop);if(m>0){const y=window.innerHeight-Jn*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(g,w);if(v<y){const b=v+m,x=Math.min(y,b),S=b-x;f.style.height=x+"px",f.style.bottom==="0px"&&(h.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});jk.displayName=p0;var Ek="SelectGroup",[uU,hU]=Qu(Ek),fU=_.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=go();return o.jsx(uU,{scope:t,id:r,children:o.jsx(Pe.div,{role:"group","aria-labelledby":r,...n,ref:e})})});fU.displayName=Ek;var Ck="SelectLabel",Nk=_.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=hU(Ck,t);return o.jsx(Pe.div,{id:r.id,...n,ref:e})});Nk.displayName=Ck;var Ev="SelectItem",[pU,kk]=Qu(Ev),Pk=_.forwardRef((s,e)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:i,...a}=s,l=Do(Ev,t),c=Oo(Ev,t),d=l.value===n,[h,f]=_.useState(i??""),[p,m]=_.useState(!1),y=tt(e,b=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,b,n,r)}),g=go(),w=_.useRef("touch"),v=()=>{r||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(pU,{scope:t,value:n,disabled:r,textId:g,isSelected:d,onItemTextChange:_.useCallback(b=>{f(x=>x||((b==null?void 0:b.textContent)??"").trim())},[]),children:o.jsx(Iy.ItemSlot,{scope:t,value:n,disabled:r,textValue:h,children:o.jsx(Pe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:y,onFocus:Ne(a.onFocus,()=>m(!0)),onBlur:Ne(a.onBlur,()=>m(!1)),onClick:Ne(a.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:Ne(a.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:Ne(a.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:Ne(a.onPointerMove,b=>{var x;w.current=b.pointerType,r?(x=c.onItemLeave)==null||x.call(c):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ne(a.onPointerLeave,b=>{var x;b.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:Ne(a.onKeyDown,b=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(Z3.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});Pk.displayName=Ev;var wh="SelectItemText",Tk=_.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:r,...i}=s,a=Do(wh,t),l=Oo(wh,t),c=kk(wh,t),d=nU(wh,t),[h,f]=_.useState(null),p=tt(e,v=>f(v),c.onItemTextChange,v=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,v,c.value,c.disabled)}),m=h==null?void 0:h.textContent,y=_.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return vs(()=>(g(y),()=>w(y)),[g,w,y]),o.jsxs(o.Fragment,{children:[o.jsx(Pe.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Hu.createPortal(i.children,a.valueNode):null]})});Tk.displayName=wh;var Rk="SelectItemIndicator",Ik=_.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return kk(Rk,t).isSelected?o.jsx(Pe.span,{"aria-hidden":!0,...n,ref:e}):null});Ik.displayName=Rk;var m0="SelectScrollUpButton",Mk=_.forwardRef((s,e)=>{const t=Oo(m0,s.__scopeSelect),n=n1(m0,s.__scopeSelect),[r,i]=_.useState(!1),a=tt(e,n.onScrollButtonChange);return vs(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?o.jsx(Dk,{...s,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Mk.displayName=m0;var g0="SelectScrollDownButton",Lk=_.forwardRef((s,e)=>{const t=Oo(g0,s.__scopeSelect),n=n1(g0,s.__scopeSelect),[r,i]=_.useState(!1),a=tt(e,n.onScrollButtonChange);return vs(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?o.jsx(Dk,{...s,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Lk.displayName=g0;var Dk=_.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=s,i=Oo("SelectScrollButton",t),a=_.useRef(null),l=My(t),c=_.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),vs(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Pe.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:Ne(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:Ne(r.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:Ne(r.onPointerLeave,()=>{c()})})}),mU="SelectSeparator",Ok=_.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return o.jsx(Pe.div,{"aria-hidden":!0,...n,ref:e})});Ok.displayName=mU;var v0="SelectArrow",gU=_.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=Ly(t),i=Do(v0,t),a=Oo(v0,t);return i.open&&a.position==="popper"?o.jsx(a3,{...r,...n,ref:e}):null});gU.displayName=v0;var vU="SelectBubbleInput",Fk=_.forwardRef(({__scopeSelect:s,value:e,...t},n)=>{const r=_.useRef(null),i=tt(n,r),a=nk(e);return _.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(Pe.select,{...t,style:{...rk,...t.style},ref:i,defaultValue:e})});Fk.displayName=vU;function $k(s){return s===""||s===void 0}function Uk(s){const e=jo(s),t=_.useRef(""),n=_.useRef(0),r=_.useCallback(a=>{const l=t.current+a;e(l),function c(d){t.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=_.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,i]}function Bk(s,e,t){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?s.indexOf(t):-1;let a=yU(s,Math.max(i,0));r.length===1&&(a=a.filter(d=>d!==t));const c=a.find(d=>d.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function yU(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var xU=pk,zk=gk,wU=yk,bU=xk,_U=wk,Hk=bk,SU=jk,Vk=Nk,Wk=Pk,AU=Tk,jU=Ik,qk=Mk,Gk=Lk,Kk=Ok;const bn=xU,_n=wU,Qs=_.forwardRef(({className:s,children:e,...t},n)=>o.jsxs(zk,{ref:n,className:Se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[e,o.jsx(bU,{asChild:!0,children:o.jsx(bN,{className:"h-4 w-4 opacity-50"})})]}));Qs.displayName=zk.displayName;const Xk=_.forwardRef(({className:s,...e},t)=>o.jsx(qk,{ref:t,className:Se("flex cursor-default items-center justify-center py-1",s),...e,children:o.jsx(ZF,{className:"h-4 w-4"})}));Xk.displayName=qk.displayName;const Yk=_.forwardRef(({className:s,...e},t)=>o.jsx(Gk,{ref:t,className:Se("flex cursor-default items-center justify-center py-1",s),...e,children:o.jsx(bN,{className:"h-4 w-4"})}));Yk.displayName=Gk.displayName;const Js=_.forwardRef(({className:s,children:e,position:t="popper",...n},r)=>o.jsx(_U,{children:o.jsxs(Hk,{ref:r,className:Se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[o.jsx(Xk,{}),o.jsx(SU,{className:Se("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Yk,{})]})}));Js.displayName=Hk.displayName;const EU=_.forwardRef(({className:s,...e},t)=>o.jsx(Vk,{ref:t,className:Se("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e}));EU.displayName=Vk.displayName;const ce=_.forwardRef(({className:s,children:e,...t},n)=>o.jsxs(Wk,{ref:n,className:Se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(jU,{children:o.jsx(U_,{className:"h-4 w-4"})})}),o.jsx(AU,{children:e})]}));ce.displayName=Wk.displayName;const CU=_.forwardRef(({className:s,...e},t)=>o.jsx(Kk,{ref:t,className:Se("-mx-1 my-1 h-px bg-muted",s),...e}));CU.displayName=Kk.displayName;const K=_.forwardRef(({className:s,...e},t)=>o.jsx("div",{ref:t,className:Se("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));K.displayName="Card";const ze=_.forwardRef(({className:s,...e},t)=>o.jsx("div",{ref:t,className:Se("flex flex-col space-y-1.5 p-6",s),...e}));ze.displayName="CardHeader";const He=_.forwardRef(({className:s,...e},t)=>o.jsx("h3",{ref:t,className:Se("text-2xl font-semibold leading-none tracking-tight",s),...e}));He.displayName="CardTitle";const wr=_.forwardRef(({className:s,...e},t)=>o.jsx("p",{ref:t,className:Se("text-sm text-muted-foreground",s),...e}));wr.displayName="CardDescription";const te=_.forwardRef(({className:s,...e},t)=>o.jsx("div",{ref:t,className:Se("p-6 pt-0",s),...e}));te.displayName="CardContent";const NU=_.forwardRef(({className:s,...e},t)=>o.jsx("div",{ref:t,className:Se("flex items-center p-6 pt-0",s),...e}));NU.displayName="CardFooter";const kU=({onSearch:s})=>{const[e,t]=_.useState({location:"",priceMin:0,priceMax:0,propertyType:"",bedrooms:"",bathrooms:""}),[n,r]=_.useState(!1),i=()=>{s==null||s(e)};return o.jsx(K,{className:"bg-card/95 backdrop-blur-md border-border shadow-elegant",children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Qi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Z,{placeholder:"Country (e.g., Spain, France)",value:e.location,onChange:a=>t({...e,location:a.target.value}),className:"pl-10"})]}),o.jsxs(bn,{value:e.propertyType,onValueChange:a=>t({...e,propertyType:a}),children:[o.jsxs(Qs,{children:[o.jsx(lc,{className:"h-4 w-4 mr-2 text-muted-foreground"}),o.jsx(_n,{placeholder:"Property Type"})]}),o.jsxs(Js,{children:[o.jsx(ce,{value:"house",children:"House"}),o.jsx(ce,{value:"apartment",children:"Apartment"}),o.jsx(ce,{value:"condo",children:"Condo"}),o.jsx(ce,{value:"villa",children:"Villa"}),o.jsx(ce,{value:"land",children:"Land"}),o.jsx(ce,{value:"commercial",children:"Commercial"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Z,{placeholder:"Max Price",type:"number",value:e.priceMax||"",onChange:a=>t({...e,priceMax:Number(a.target.value)}),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs($,{onClick:i,variant:"hero",className:"flex-1",children:[o.jsx(Ny,{className:"h-4 w-4 mr-2"}),"Search"]}),o.jsx($,{variant:"outline",size:"default",onClick:()=>r(!n),className:"px-3",children:o.jsx(u4,{className:"h-4 w-4"})})]})]}),n&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-border",children:[o.jsxs("div",{className:"relative",children:[o.jsx(gd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Z,{placeholder:"Min Price",type:"number",value:e.priceMin||"",onChange:a=>t({...e,priceMin:Number(a.target.value)}),className:"pl-10"})]}),o.jsxs(bn,{value:e.bedrooms,onValueChange:a=>t({...e,bedrooms:a}),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Bedrooms"})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"1",children:"1+ Bedroom"}),o.jsx(ce,{value:"2",children:"2+ Bedrooms"}),o.jsx(ce,{value:"3",children:"3+ Bedrooms"}),o.jsx(ce,{value:"4",children:"4+ Bedrooms"}),o.jsx(ce,{value:"5",children:"5+ Bedrooms"})]})]}),o.jsxs(bn,{value:e.bathrooms,onValueChange:a=>t({...e,bathrooms:a}),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Bathrooms"})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"1",children:"1+ Bathroom"}),o.jsx(ce,{value:"2",children:"2+ Bathrooms"}),o.jsx(ce,{value:"3",children:"3+ Bathrooms"}),o.jsx(ce,{value:"4",children:"4+ Bathrooms"})]})]}),o.jsx($,{variant:"outline",onClick:()=>t({location:"",priceMin:0,priceMax:0,propertyType:"",bedrooms:"",bathrooms:""}),children:"Clear All"})]})]})})})},Qk=({property:s,featured:e=!1,onClick:t})=>{const n=ns(),r=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(B),{title:i,price:a,city:l,country:c,bedrooms:d=0,bathrooms:h=0,area:f=0,plot_area:p,distance_to_city:m,distance_to_sea:y,distance_to_lake:g,images:w=[],listing_type:v="sale",property_type_detail:b,seller_type:x,property_type:S,status:j,created_at:N,verified:k=!1,features:P=[]}=s,I=`${l||"Unknown"}, ${c||"Unknown"}`,T=v||"sale",M=B=>B?B>=1e3?`${(B/1e3).toFixed(1)} km`:`${B} m`:null,U=()=>{t?t():n(`/properties/${s.id}`)},z=async B=>{B.stopPropagation();const J=`${window.location.origin}/properties/${s.id}`;if(navigator.share)try{await navigator.share({title:s.title,text:`Check out this property: ${s.title}`,url:J})}catch{}else try{await navigator.clipboard.writeText(J),alert(`Link copied to clipboard: ${J}`)}catch{alert(`Share this link: ${J}`)}};return o.jsxs(K,{className:"group cursor-pointer overflow-hidden border-border hover:shadow-elegant transition-smooth bg-card",onClick:U,children:[o.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-white",children:[o.jsx("img",{src:w[0]||"/placeholder.svg",alt:i,className:"w-full h-full object-contain group-hover:scale-105 transition-smooth"}),o.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[e&&o.jsx(be,{variant:"default",className:"bg-gradient-primary text-primary-foreground border-0",children:"Featured"}),o.jsxs(be,{variant:"secondary",className:"capitalize",children:["For ",T]}),x&&o.jsx(be,{variant:"outline",className:"bg-background/90",children:x==="broker"?"Professional":"Private"}),k&&o.jsx(be,{variant:"default",className:"bg-green-500 text-white",children:"Verified"})]}),o.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:o.jsx($,{variant:"secondary",size:"sm",className:"bg-background/90 hover:bg-background/80 text-foreground border-border",onClick:z,children:o.jsx(d4,{className:"h-4 w-4"})})}),o.jsx("div",{className:"absolute bottom-4 left-4",children:o.jsxs(be,{variant:"default",className:"bg-background/90 text-foreground border-border text-lg font-bold px-3 py-1",children:[r(a),T==="rent"&&o.jsx("span",{className:"text-sm font-normal",children:"/month"})]})})]}),o.jsxs(te,{className:"p-6",children:[o.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-smooth",children:i}),o.jsxs("div",{className:"flex items-center text-muted-foreground mb-4",children:[o.jsx(Qi,{className:"h-4 w-4 mr-1"}),o.jsx("span",{className:"text-sm",children:I})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[d>0&&o.jsxs("div",{className:"flex items-center text-muted-foreground",children:[o.jsx(QF,{className:"h-4 w-4 mr-1 text-primary"}),o.jsx("span",{className:"font-medium",children:d})]}),h>0&&o.jsxs("div",{className:"flex items-center text-muted-foreground",children:[o.jsx(wN,{className:"h-4 w-4 mr-1 text-primary"}),o.jsx("span",{className:"font-medium",children:h})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[f>0&&o.jsxs("div",{className:"flex items-center text-muted-foreground",children:[o.jsx(lc,{className:"h-4 w-4 mr-1 text-primary"}),o.jsxs("span",{className:"font-medium",children:[f," m"]})]}),p&&p>0&&o.jsxs("div",{className:"flex items-center text-muted-foreground",children:[o.jsx(jN,{className:"h-4 w-4 mr-1 text-primary"}),o.jsxs("span",{className:"font-medium",children:[p," m"]})]})]}),(m||y||g)&&o.jsxs("div",{className:"col-span-2 flex items-center gap-3 text-xs text-muted-foreground",children:[m&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qi,{className:"h-3 w-3 mr-1 text-primary"}),o.jsxs("span",{children:[M(m)," to city"]})]}),y&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(NN,{className:"h-3 w-3 mr-1 text-primary"}),o.jsxs("span",{children:[M(y)," to sea"]})]}),g&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(o0,{className:"h-3 w-3 mr-1 text-primary"}),o.jsxs("span",{children:[M(g)," to lake"]})]})]}),P&&P.length>0&&o.jsxs("div",{className:"col-span-2 flex flex-wrap gap-1 text-xs",children:[P.slice(0,4).map((B,J)=>o.jsx(be,{variant:"secondary",className:"text-xs px-2 py-0",children:B},J)),P.length>4&&o.jsxs(be,{variant:"secondary",className:"text-xs px-2 py-0",children:["+",P.length-4," more"]})]})]})]})]})};function PU(s,e){return _.useReducer((t,n)=>e[t][n]??t,s)}var Ju=s=>{const{present:e,children:t}=s,n=TU(e),r=typeof t=="function"?t({present:n.isPresent}):_.Children.only(t),i=tt(n.ref,RU(r));return typeof t=="function"||n.isPresent?_.cloneElement(r,{ref:i}):null};Ju.displayName="Presence";function TU(s){const[e,t]=_.useState(),n=_.useRef(null),r=_.useRef(s),i=_.useRef("none"),a=s?"mounted":"unmounted",[l,c]=PU(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=Wm(n.current);i.current=l==="mounted"?d:"none"},[l]),vs(()=>{const d=n.current,h=r.current;if(h!==s){const p=i.current,m=Wm(d);s?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=s}},[s,c]),vs(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=m=>{const g=Wm(n.current).includes(m.animationName);if(m.target===e&&g&&(c("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=Wm(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(d=>{n.current=d?getComputedStyle(d):null,t(d)},[])}}function Wm(s){return(s==null?void 0:s.animationName)||"none"}function RU(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var Dy="Dialog",[Jk,Zk]=Lo(Dy),[IU,Er]=Jk(Dy),eP=s=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:i,modal:a=!0}=s,l=_.useRef(null),c=_.useRef(null),[d,h]=Fu({prop:n,defaultProp:r??!1,onChange:i,caller:Dy});return o.jsx(IU,{scope:e,triggerRef:l,contentRef:c,contentId:go(),titleId:go(),descriptionId:go(),open:d,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(f=>!f),[h]),modal:a,children:t})};eP.displayName=Dy;var tP="DialogTrigger",sP=_.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Er(tP,t),i=tt(e,r.triggerRef);return o.jsx(Pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":a1(r.open),...n,ref:i,onClick:Ne(s.onClick,r.onOpenToggle)})});sP.displayName=tP;var r1="DialogPortal",[MU,nP]=Jk(r1,{forceMount:void 0}),rP=s=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=s,i=Er(r1,e);return o.jsx(MU,{scope:e,forceMount:t,children:_.Children.map(n,a=>o.jsx(Ju,{present:t||i.open,children:o.jsx(t1,{asChild:!0,container:r,children:a})}))})};rP.displayName=r1;var Cv="DialogOverlay",iP=_.forwardRef((s,e)=>{const t=nP(Cv,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,i=Er(Cv,s.__scopeDialog);return i.modal?o.jsx(Ju,{present:n||i.open,children:o.jsx(DU,{...r,ref:e})}):null});iP.displayName=Cv;var LU=Du("DialogOverlay.RemoveScroll"),DU=_.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Er(Cv,t);return o.jsx(s1,{as:LU,allowPinchZoom:!0,shards:[r.contentRef],children:o.jsx(Pe.div,{"data-state":a1(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),vc="DialogContent",aP=_.forwardRef((s,e)=>{const t=nP(vc,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,i=Er(vc,s.__scopeDialog);return o.jsx(Ju,{present:n||i.open,children:i.modal?o.jsx(OU,{...r,ref:e}):o.jsx(FU,{...r,ref:e})})});aP.displayName=vc;var OU=_.forwardRef((s,e)=>{const t=Er(vc,s.__scopeDialog),n=_.useRef(null),r=tt(e,t.contentRef,n);return _.useEffect(()=>{const i=n.current;if(i)return ak(i)},[]),o.jsx(oP,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(s.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ne(s.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Ne(s.onFocusOutside,i=>i.preventDefault())})}),FU=_.forwardRef((s,e)=>{const t=Er(vc,s.__scopeDialog),n=_.useRef(!1),r=_.useRef(!1);return o.jsx(oP,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=s.onCloseAutoFocus)==null||a.call(s,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),oP=_.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,...a}=s,l=Er(vc,t),c=_.useRef(null),d=tt(e,c);return RN(),o.jsxs(o.Fragment,{children:[o.jsx(W_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:o.jsx(V_,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":a1(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(UU,{titleId:l.titleId}),o.jsx(zU,{contentRef:c,descriptionId:l.descriptionId})]})]})}),i1="DialogTitle",lP=_.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Er(i1,t);return o.jsx(Pe.h2,{id:r.titleId,...n,ref:e})});lP.displayName=i1;var cP="DialogDescription",dP=_.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Er(cP,t);return o.jsx(Pe.p,{id:r.descriptionId,...n,ref:e})});dP.displayName=cP;var uP="DialogClose",hP=_.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=Er(uP,t);return o.jsx(Pe.button,{type:"button",...n,ref:e,onClick:Ne(s.onClick,()=>r.onOpenChange(!1))})});hP.displayName=uP;function a1(s){return s?"open":"closed"}var fP="DialogTitleWarning",[$U,pP]=v4(fP,{contentName:vc,titleName:i1,docsSlug:"dialog"}),UU=({titleId:s})=>{const e=pP(fP),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},BU="DialogDescriptionWarning",zU=({contentRef:s,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pP(BU).contentName}}.`;return _.useEffect(()=>{var i;const r=(i=s.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,s,e]),null},mP=eP,gP=sP,vP=rP,o1=iP,l1=aP,c1=lP,d1=dP,u1=hP;const $u=mP,Nv=gP,HU=vP,yP=_.forwardRef(({className:s,...e},t)=>o.jsx(o1,{ref:t,className:Se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));yP.displayName=o1.displayName;const yc=_.forwardRef(({className:s,children:e,...t},n)=>o.jsxs(HU,{children:[o.jsx(yP,{}),o.jsxs(l1,{ref:n,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[e,o.jsxs(u1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(Ao,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yc.displayName=l1.displayName;const xc=({className:s,...e})=>o.jsx("div",{className:Se("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});xc.displayName="DialogHeader";const wc=_.forwardRef(({className:s,...e},t)=>o.jsx(c1,{ref:t,className:Se("text-lg font-semibold leading-none tracking-tight",s),...e}));wc.displayName=c1.displayName;const xP=_.forwardRef(({className:s,...e},t)=>o.jsx(d1,{ref:t,className:Se("text-sm text-muted-foreground",s),...e}));xP.displayName=d1.displayName;const Zs=_.forwardRef(({className:s,...e},t)=>o.jsx("textarea",{className:Se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...e}));Zs.displayName="Textarea";const VU=1,WU=1e6;let Ux=0;function qU(){return Ux=(Ux+1)%Number.MAX_SAFE_INTEGER,Ux.toString()}const Bx=new Map,HA=s=>{if(Bx.has(s))return;const e=setTimeout(()=>{Bx.delete(s),Yh({type:"REMOVE_TOAST",toastId:s})},WU);Bx.set(s,e)},GU=(s,e)=>{switch(e.type){case"ADD_TOAST":return{...s,toasts:[e.toast,...s.toasts].slice(0,VU)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?HA(t):s.toasts.forEach(n=>{HA(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==e.toastId)}}},hg=[];let fg={toasts:[]};function Yh(s){fg=GU(fg,s),hg.forEach(e=>{e(fg)})}function De({...s}){const e=qU(),t=r=>Yh({type:"UPDATE_TOAST",toast:{...r,id:e}}),n=()=>Yh({type:"DISMISS_TOAST",toastId:e});return Yh({type:"ADD_TOAST",toast:{...s,id:e,open:!0,onOpenChange:r=>{r||n()}}}),{id:e,dismiss:n,update:t}}function Fo(){const[s,e]=_.useState(fg);return _.useEffect(()=>(hg.push(e),()=>{const t=hg.indexOf(e);t>-1&&hg.splice(t,1)}),[s]),{...s,toast:De,dismiss:t=>Yh({type:"DISMISS_TOAST",toastId:t})}}var KU="Label",wP=_.forwardRef((s,e)=>o.jsx(Pe.label,{...s,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=s.onMouseDown)==null||r.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));wP.displayName=KU;var bP=wP;const XU=O_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oe=_.forwardRef(({className:s,...e},t)=>o.jsx(bP,{ref:t,className:Se(XU(),s),...e}));oe.displayName=bP.displayName;const YU=({isOpen:s,onClose:e,property:t})=>{const[n,r]=_.useState({name:"",email:"",phone:"",message:""}),[i,a]=_.useState(!1);Cn();const{toast:l}=Fo(),c=async d=>{if(d.preventDefault(),!n.name||!n.email||!n.message){l({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}a(!0);try{const{data:h,error:f}=await V.from("leads").insert({name:n.name,email:n.email,phone:n.phone||null,message:n.message,property_id:t.id}).select().single();if(f)throw f;l({title:"Inquiry Sent Successfully!",description:"The property owner will contact you soon."}),r({name:"",email:"",phone:"",message:""}),e()}catch(h){console.error("Error sending inquiry:",h),l({title:"Error",description:"Failed to send inquiry. Please try again.",variant:"destructive"})}finally{a(!1)}};return o.jsx($u,{open:s,onOpenChange:e,children:o.jsxs(yc,{className:"sm:max-w-md",children:[o.jsx(xc,{children:o.jsxs(wc,{className:"flex items-center gap-2",children:[o.jsx(a4,{className:"h-5 w-5"}),"Send Inquiry"]})}),o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"name",children:"Full Name *"}),o.jsx(Z,{id:"name",value:n.name,onChange:d=>r(h=>({...h,name:d.target.value})),placeholder:"Enter your full name",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"email",children:"Email Address *"}),o.jsx(Z,{id:"email",type:"email",value:n.email,onChange:d=>r(h=>({...h,email:d.target.value})),placeholder:"Enter your email address",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"phone",children:"Phone Number (Optional)"}),o.jsx(Z,{id:"phone",type:"tel",value:n.phone,onChange:d=>r(h=>({...h,phone:d.target.value})),placeholder:"Enter your phone number"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"message",children:"Message *"}),o.jsx(Zs,{id:"message",value:n.message,onChange:d=>r(h=>({...h,message:d.target.value})),placeholder:`I'm interested in this property: ${t.title}. Please contact me with more details.`,rows:4,required:!0})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx($,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Cancel"}),o.jsx($,{type:"submit",disabled:i,className:"flex-1",children:i?o.jsxs(o.Fragment,{children:[o.jsx(i4,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):o.jsxs(o.Fragment,{children:[o.jsx(B_,{className:"h-4 w-4 mr-2"}),"Send Inquiry"]})})]})]})]})})},h1=({property:s,isOpen:e,onClose:t})=>{const[n,r]=_.useState(0),[i,a]=_.useState([]),[l,c]=_.useState(""),[d,h]=_.useState(!1),[f,p]=_.useState(!1),{user:m,profile:y}=Cn(),{toast:g}=Fo(),w=ns(),v=_.useCallback(async()=>{if(s!=null&&s.id)try{const{data:T,error:M}=await V.from("forum_posts").select(`
          *,
          profiles (
            full_name
          )
        `).eq("property_id",s.id).eq("status","approved").order("created_at",{ascending:!1});if(M)throw M;a(T||[])}catch(T){console.error("Error fetching forum posts:",T)}},[s==null?void 0:s.id]);_.useEffect(()=>{s!=null&&s.id&&e&&v()},[s==null?void 0:s.id,e,v]);const b=async()=>{if(!(!(s!=null&&s.id)||!l.trim()||d)){if(!m){g({title:"Login Required",description:"Please log in to post questions.",variant:"destructive"});return}h(!0);try{const T={property_id:s.id,user_id:m.id,content:l.trim(),status:"pending",title:"Property Question"},{error:M}=await V.from("forum_posts").insert([T]);if(M)throw M;g({title:"Post Submitted",description:"Your post has been submitted for review and will appear shortly."}),c(""),v()}catch(T){console.error("Error creating post:",T),g({title:"Error",description:T instanceof Error?T.message:"Failed to create post. Please try again.",variant:"destructive"})}finally{h(!1)}}},x=()=>{p(!0)};if(!s)return null;const S=()=>{var T;((T=s.images)==null?void 0:T.length)>1&&r(M=>(M+1)%s.images.length)},j=()=>{var T;((T=s.images)==null?void 0:T.length)>1&&r(M=>(M-1+s.images.length)%s.images.length)},N=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(T),k=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=T=>T.split(". ").map((M,U)=>o.jsxs("span",{children:[M.trim(),M.trim()&&".",U<T.split(". ").length-1&&o.jsx("br",{})]},U)),I=T=>T?T>=1e3?`${(T/1e3).toFixed(1)} km`:`${T} m`:"N/A";return o.jsx($u,{open:e,onOpenChange:t,children:o.jsxs(yc,{className:"max-w-6xl max-h-[90vh] overflow-y-auto overflow-x-hidden",children:[o.jsx(xc,{children:o.jsx(wc,{className:"text-2xl font-bold",children:s.title})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-white",children:s.images&&s.images.length>0?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:s.images[n],alt:`${s.title} - Image ${n+1}`,className:"w-full h-full object-contain"}),s.images.length>1&&o.jsxs(o.Fragment,{children:[o.jsx($,{variant:"secondary",size:"sm",className:"absolute left-2 top-1/2 transform -translate-y-1/2",onClick:j,children:o.jsx(JF,{className:"h-4 w-4"})}),o.jsx($,{variant:"secondary",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:S,children:o.jsx(_N,{className:"h-4 w-4"})})]})]}):o.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No images available"})}),s.images&&s.images.length>1&&o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:s.images.map((T,M)=>o.jsx("button",{className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 transition-colors ${M===n?"border-primary":"border-transparent"}`,onClick:()=>r(M),children:o.jsx("img",{src:T,alt:`Thumbnail ${M+1}`,className:"w-full h-full object-contain"})},M))}),o.jsx(K,{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-0 shadow-sm",children:o.jsxs(te,{className:"p-6",children:[o.jsxs("h3",{className:"font-bold text-xl mb-6 text-slate-800 flex items-center gap-2",children:[o.jsx(lc,{className:"h-6 w-6 text-primary"}),"Property Details"]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(lc,{className:"h-8 w-8 text-primary"})}),o.jsx("p",{className:"text-sm text-muted-foreground font-medium mb-1",children:"Bedrooms"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:s.bedrooms||"N/A"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(wN,{className:"h-8 w-8 text-primary"})}),o.jsx("p",{className:"text-sm text-muted-foreground font-medium mb-1",children:"Bathrooms"}),o.jsx("p",{className:"text-2xl font-bold text-slate-800",children:s.bathrooms||"N/A"})]})]}),(s.area||s.plot_area)&&o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2 justify-center",children:[o.jsx(jN,{className:"h-4 w-4 text-primary"}),"Area Information"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(lc,{className:"h-6 w-6 text-primary"})}),o.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Living Area"}),o.jsxs("p",{className:"text-lg font-bold text-slate-800",children:[s.area||"N/A"," ",s.area?"m":""]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(o0,{className:"h-6 w-6 text-primary"})}),o.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Plot Area"}),o.jsxs("p",{className:"text-lg font-bold text-slate-800",children:[s.plot_area||"N/A"," ",s.plot_area?"m":""]})]})]})]}),(s.distance_to_city||s.distance_to_sea||s.distance_to_lake)&&o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2 justify-center",children:[o.jsx(Qi,{className:"h-4 w-4 text-primary"}),"Distance Information"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(Qi,{className:"h-5 w-5 text-primary"})}),o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"City Center"}),o.jsx("p",{className:"text-sm font-bold text-slate-800",children:s.distance_to_city?I(s.distance_to_city):"N/A"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(NN,{className:"h-5 w-5 text-primary"})}),o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"To Sea"}),o.jsx("p",{className:"text-sm font-bold text-slate-800",children:s.distance_to_sea?I(s.distance_to_sea):"N/A"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(o0,{className:"h-5 w-5 text-primary"})}),o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"To Lake"}),o.jsx("p",{className:"text-sm font-bold text-slate-800",children:s.distance_to_lake?I(s.distance_to_lake):"N/A"})]})]})]})]})]})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-4",children:[o.jsx(Qi,{className:"h-4 w-4"}),o.jsxs("span",{className:"text-base",children:[s.city,", ",s.country]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx(gd,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"text-4xl font-bold",children:N(s.price)}),o.jsx(be,{variant:"secondary",className:"ml-2",children:s.status})]}),o.jsx("div",{className:"prose prose-slate max-w-none",children:o.jsx("p",{className:"text-slate-700 leading-relaxed text-lg font-medium",children:P(s.description)})})]}),o.jsx(K,{children:o.jsxs(te,{className:"p-6",children:[o.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[o.jsx(So,{className:"h-5 w-5"}),"Agent Information"]}),o.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Type:"})," ",s.seller_type]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Listed:"})," ",k(s.created_at)]})]})]})}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx($,{className:"flex-1 py-3 text-lg",onClick:x,children:"Send Inquiry"}),o.jsxs($,{variant:"outline",className:"flex-1 py-3 text-lg",onClick:()=>{const T=document.getElementById("property-discussion");T==null||T.scrollIntoView({behavior:"smooth"})},children:[o.jsx(Xh,{className:"h-5 w-5 mr-2"}),"Join Discussion"]})]})]})]}),o.jsxs("div",{id:"property-discussion",className:"border-t pt-6 mt-6",children:[o.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(Xh,{className:"h-5 w-5"}),"Community Discussion"]}),o.jsx(K,{className:"mb-6",children:o.jsxs(te,{className:"p-4",children:[o.jsx("h4",{className:"font-medium mb-3",children:"Ask a Question"}),m?o.jsxs("div",{className:"space-y-3",children:[o.jsx(Zs,{placeholder:"Ask about this property, the neighborhood, or anything else...",value:l,onChange:T=>c(T.target.value),className:"min-h-20"}),o.jsxs($,{onClick:b,disabled:d||!l.trim(),className:"w-full sm:w-auto",children:[o.jsx(B_,{className:"h-4 w-4 mr-2"}),d?"Posting...":"Post Question"]})]}):o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(xA,{className:"h-8 w-8 text-muted-foreground mx-auto"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Please log in to ask questions about this property."}),o.jsxs($,{variant:"outline",onClick:()=>w("/login"),children:[o.jsx(xA,{className:"h-4 w-4 mr-2"}),"Log In"]})]})]})}),o.jsx("div",{className:"space-y-4",children:i.length>0?i.map(T=>{var M;return o.jsx(K,{children:o.jsxs(te,{className:"p-4",children:[o.jsx("div",{className:"flex items-start justify-between mb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:o.jsx(So,{className:"h-4 w-4 text-primary-foreground"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:((M=T.profiles)==null?void 0:M.full_name)||"Anonymous"}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Yi,{className:"h-3 w-3"}),k(T.created_at)]})]})]})}),o.jsx("p",{className:"text-sm leading-relaxed ml-10",children:T.content})]})},T.id)}):o.jsx(K,{children:o.jsxs(te,{className:"p-8 text-center",children:[o.jsx(Xh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"No discussion yet. Be the first to ask a question about this property!"})]})})})]}),o.jsx(YU,{isOpen:f,onClose:()=>p(!1),property:s})]})})},QU=()=>{const[s,e]=_.useState(null),[t,n]=_.useState([]),[r,i]=_.useState(!0),a=ns();return _.useEffect(()=>{(async()=>{try{const c=`
          id, title, description, country, city, price, property_type,
          property_type_detail, bedrooms, bathrooms, area, plot_area,
          distance_to_city, distance_to_sea, distance_to_lake, listing_type,
          images, seller_id, seller_type, status, created_at, updated_at,
          region, address, lat, lon, features, distance_to_beach_m, views, verified, currency
        `,{data:d,error:h}=await V.from("properties").select(c).eq("status","published").order("created_at",{ascending:!1}).limit(6);h?(console.error("Error fetching featured properties:",h),n([])):n(d||[])}catch(c){console.error("Error fetching featured properties:",c),n([])}finally{i(!1)}})()},[]),o.jsxs("section",{className:"py-20 bg-gradient-subtle",children:[o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold mb-6",children:["Featured",o.jsx("span",{className:"bg-gradient-primary bg-clip-text text-transparent",children:" Properties"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Discover handpicked luxury properties from around the world, curated by our expert real estate professionals."})]}),r?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:t.map(l=>o.jsx(Qk,{property:l,featured:!0,onClick:()=>e(l)},l.id))}),t.length>0&&o.jsx("div",{className:"text-center",children:o.jsxs($,{variant:"hero",size:"lg",className:"px-8 py-4 h-auto text-lg",onClick:()=>a("/properties"),children:["View All Properties",o.jsx(YF,{className:"h-5 w-5 ml-2"})]})})]}),o.jsx(h1,{property:s,isOpen:!!s,onClose:()=>e(null)})]})},JU=()=>{const[s,e]=_.useState({totalProperties:0,countriesCount:0,avgPrice:null,loading:!0});_.useEffect(()=>{(async()=>{try{const[r,i,a]=await Promise.all([V.from("properties").select("id",{count:"exact",head:!0}).eq("status","published"),V.from("properties").select("country").eq("status","published"),V.from("properties").select("price").eq("status","published")]),l=r.count??0,c=i.data||[],d=new Set(c.filter(p=>!!p.country).map(p=>p.country.trim())),h=a.data||[],f=h.length?Math.round(h.reduce((p,m)=>p+(m.price||0),0)/h.length):null;e({totalProperties:l,countriesCount:d.size,avgPrice:f,loading:!1})}catch(r){console.error("Error loading KPIs",r),e(i=>({...i,loading:!1}))}})()},[]);const t=n=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);return o.jsx("section",{className:"py-8 bg-background",children:o.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsx(K,{children:o.jsxs(te,{className:"p-6 flex items-center gap-4",children:[o.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:o.jsx(Xi,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Published Properties"}),o.jsx("p",{className:"text-2xl font-bold",children:s.loading?"":s.totalProperties})]})]})}),o.jsx(K,{children:o.jsxs(te,{className:"p-6 flex items-center gap-4",children:[o.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:o.jsx(AN,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Countries Covered"}),o.jsx("p",{className:"text-2xl font-bold",children:s.loading?"":s.countriesCount})]})]})}),o.jsx(K,{children:o.jsxs(te,{className:"p-6 flex items-center gap-4",children:[o.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:o.jsx(SN,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Price"}),o.jsx("p",{className:"text-2xl font-bold",children:s.loading?"":s.avgPrice!==null?t(s.avgPrice):""})]})]})})]})})})},ZU=()=>{const s=ns(),e=t=>{const n=new URLSearchParams;t.location&&n.set("country",t.location.trim()),t.priceMin&&t.priceMin>0&&n.set("minPrice",t.priceMin.toString()),t.priceMax&&t.priceMax>0&&n.set("maxPrice",t.priceMax.toString()),t.propertyType&&n.set("propertyType",t.propertyType),t.bedrooms&&n.set("bedrooms",t.bedrooms),t.bathrooms&&n.set("bathrooms",t.bathrooms),s(`/properties?${n.toString()}`)};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("main",{children:[o.jsx(g4,{}),o.jsx("section",{className:"py-16 -mt-20 relative z-20",children:o.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx(kU,{onSearch:e})})}),o.jsx(JU,{}),o.jsx(QU,{}),o.jsx("section",{className:"py-20 bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl sm:text-5xl font-bold mb-6",children:"How It Works"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Simple, fast, and transparent real estate transactions"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx("span",{className:"text-2xl",children:"1"})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Browse Properties"}),o.jsx("p",{className:"text-muted-foreground",children:"Discover verified premium properties from trusted professionals worldwide"})]}),o.jsxs("div",{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx("span",{className:"text-2xl",children:"2"})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Connect with Agents"}),o.jsx("p",{className:"text-muted-foreground",children:"Get matched with certified agents or list your property for expert assistance"})]}),o.jsxs("div",{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx("span",{className:"text-2xl",children:"3"})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Secure Your Dream"}),o.jsx("p",{className:"text-muted-foreground",children:"Complete transactions with confidence using our secure platform"})]})]})]})}),o.jsx("section",{className:"py-20 bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold mb-6",children:["Why Choose",o.jsx("span",{className:"text-primary",children:" ViaEstate"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Experience the future of real estate with our premium platform designed for discerning buyers, sellers, and brokers worldwide."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center p-8 rounded-2xl bg-card border border-border hover:shadow-elegant transition-smooth",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Premium Properties"}),o.jsx("p",{className:"text-muted-foreground",children:"Access exclusive luxury properties from verified brokers across 50+ countries worldwide."})]}),o.jsxs("div",{className:"text-center p-8 rounded-2xl bg-card border border-border hover:shadow-elegant transition-smooth",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("h3",{className:"text-2xl font-bold mb-4",children:"AI-Powered Matching"}),o.jsx("p",{className:"text-muted-foreground",children:"Our intelligent system matches you with perfect properties based on your preferences."})]}),o.jsxs("div",{className:"text-center p-8 rounded-2xl bg-card border border-border hover:shadow-elegant transition-smooth",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Expert Brokers"}),o.jsx("p",{className:"text-muted-foreground",children:"Connect with certified real estate professionals who understand your market."})]})]})]})})]}),o.jsx("footer",{className:"bg-muted py-12",children:o.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("button",{onClick:()=>s("/login"),className:"text-center mb-4 hover:opacity-80 transition-opacity cursor-pointer bg-transparent border-none p-0","aria-label":"Login to ViaEstate",children:o.jsxs("span",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Your gateway to premium real estate worldwide"}),o.jsxs("div",{className:"flex justify-center space-x-4",children:[o.jsx("a",{href:"https://www.instagram.com/viaestate_/",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center hover:bg-primary/80 transition-colors","aria-label":"Follow ViaEstate on Instagram",children:o.jsx(n4,{className:"h-5 w-5 text-primary-foreground"})}),o.jsx("a",{href:"https://www.facebook.com/profile.php?id=61579269959759",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center hover:bg-primary/80 transition-colors","aria-label":"Follow ViaEstate on Facebook",children:o.jsx(t4,{className:"h-5 w-5 text-primary-foreground"})})]})]})})})]})};var zx="rovingFocusGroup.onEntryFocus",eB={bubbles:!1,cancelable:!0},fm="RovingFocusGroup",[y0,_P,tB]=kN(fm),[sB,SP]=Lo(fm,[tB]),[nB,rB]=sB(fm),AP=_.forwardRef((s,e)=>o.jsx(y0.Provider,{scope:s.__scopeRovingFocusGroup,children:o.jsx(y0.Slot,{scope:s.__scopeRovingFocusGroup,children:o.jsx(iB,{...s,ref:e})})}));AP.displayName=fm;var iB=_.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=s,p=_.useRef(null),m=tt(e,p),y=H_(i),[g,w]=Fu({prop:a,defaultProp:l??null,onChange:c,caller:fm}),[v,b]=_.useState(!1),x=jo(d),S=_P(t),j=_.useRef(!1),[N,k]=_.useState(0);return _.useEffect(()=>{const P=p.current;if(P)return P.addEventListener(zx,x),()=>P.removeEventListener(zx,x)},[x]),o.jsx(nB,{scope:t,orientation:n,dir:y,loop:r,currentTabStopId:g,onItemFocus:_.useCallback(P=>w(P),[w]),onItemShiftTab:_.useCallback(()=>b(!0),[]),onFocusableItemAdd:_.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:_.useCallback(()=>k(P=>P-1),[]),children:o.jsx(Pe.div,{tabIndex:v||N===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...s.style},onMouseDown:Ne(s.onMouseDown,()=>{j.current=!0}),onFocus:Ne(s.onFocus,P=>{const I=!j.current;if(P.target===P.currentTarget&&I&&!v){const T=new CustomEvent(zx,eB);if(P.currentTarget.dispatchEvent(T),!T.defaultPrevented){const M=S().filter(F=>F.focusable),U=M.find(F=>F.active),z=M.find(F=>F.id===g),J=[U,z,...M].filter(Boolean).map(F=>F.ref.current);CP(J,h)}}j.current=!1}),onBlur:Ne(s.onBlur,()=>b(!1))})})}),jP="RovingFocusGroupItem",EP=_.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:i,children:a,...l}=s,c=go(),d=i||c,h=rB(jP,t),f=h.currentTabStopId===d,p=_P(t),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=h;return _.useEffect(()=>{if(n)return m(),()=>y()},[n,m,y]),o.jsx(y0.ItemSlot,{scope:t,id:d,focusable:n,active:r,children:o.jsx(Pe.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Ne(s.onMouseDown,w=>{n?h.onItemFocus(d):w.preventDefault()}),onFocus:Ne(s.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ne(s.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=lB(w,h.orientation,h.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=p().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const S=x.indexOf(w.currentTarget);x=h.loop?cB(x,S+1):x.slice(S+1)}setTimeout(()=>CP(x))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:g!=null}):a})})});EP.displayName=jP;var aB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oB(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function lB(s,e,t){const n=oB(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return aB[n]}function CP(s,e=!1){const t=document.activeElement;for(const n of s)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function cB(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var dB=AP,uB=EP,Oy="Tabs",[hB,d5]=Lo(Oy,[SP]),NP=SP(),[fB,f1]=hB(Oy),kP=_.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=s,h=H_(l),[f,p]=Fu({prop:n,onChange:r,defaultProp:i??"",caller:Oy});return o.jsx(fB,{scope:t,baseId:go(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(Pe.div,{dir:h,"data-orientation":a,...d,ref:e})})});kP.displayName=Oy;var PP="TabsList",TP=_.forwardRef((s,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=s,i=f1(PP,t),a=NP(t);return o.jsx(dB,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(Pe.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});TP.displayName=PP;var RP="TabsTrigger",IP=_.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...i}=s,a=f1(RP,t),l=NP(t),c=DP(a.baseId,n),d=OP(a.baseId,n),h=n===a.value;return o.jsx(uB,{asChild:!0,...l,focusable:!r,active:h,children:o.jsx(Pe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:e,onMouseDown:Ne(s.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?a.onValueChange(n):f.preventDefault()}),onKeyDown:Ne(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(n)}),onFocus:Ne(s.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!r&&f&&a.onValueChange(n)})})})});IP.displayName=RP;var MP="TabsContent",LP=_.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:i,...a}=s,l=f1(MP,t),c=DP(l.baseId,n),d=OP(l.baseId,n),h=n===l.value,f=_.useRef(h);return _.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(Ju,{present:r||h,children:({present:p})=>o.jsx(Pe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...a,ref:e,style:{...s.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});LP.displayName=MP;function DP(s,e){return`${s}-trigger-${e}`}function OP(s,e){return`${s}-content-${e}`}var pB=kP,FP=TP,$P=IP,UP=LP;const Fy=pB,pm=_.forwardRef(({className:s,...e},t)=>o.jsx(FP,{ref:t,className:Se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e}));pm.displayName=FP.displayName;const es=_.forwardRef(({className:s,...e},t)=>o.jsx($P,{ref:t,className:Se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...e}));es.displayName=$P.displayName;const Cs=_.forwardRef(({className:s,...e},t)=>o.jsx(UP,{ref:t,className:Se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e}));Cs.displayName=UP.displayName;const mB=()=>{const[s,e]=_.useState(!1),[t,n]=_.useState(!1),[r,i]=_.useState(""),{signIn:a,signInWithGoogle:l,signUp:c,resetPassword:d}=Cn(),h=ns(),[f,p]=_.useState({email:"",password:""}),[m,y]=_.useState({email:"",password:"",fullName:"",role:"private_user"}),g=async x=>{x.preventDefault(),e(!0);try{await a(f.email,f.password),De({title:"Welcome back!",description:"You have successfully logged in."}),h("/panel")}catch(S){console.error("Login error caught in handleLogin:",S),De({title:"Login failed",description:S instanceof Error?S.message:"An unexpected error occurred",variant:"destructive"})}finally{e(!1)}},w=async()=>{e(!0);try{await l()}catch(x){De({title:"Google sign-in failed",description:x instanceof Error?x.message:"An unexpected error occurred",variant:"destructive"}),e(!1)}},v=async x=>{x.preventDefault(),e(!0);try{await c(m.email,m.password,m.fullName,m.role),De({title:"Account created!",description:"Your account is pending admin approval. You'll be notified once approved."}),h("/")}catch(S){De({title:"Signup failed",description:S instanceof Error?S.message:"An unexpected error occurred",variant:"destructive"})}finally{e(!1)}},b=async x=>{x.preventDefault(),e(!0);try{await d(r),De({title:"Password reset email sent",description:"Check your email for password reset instructions."}),n(!1),i("")}catch(S){De({title:"Password reset failed",description:S instanceof Error?S.message:"An unexpected error occurred",variant:"destructive"})}finally{e(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(Ns,{to:"/",className:"inline-flex items-center space-x-2",children:[o.jsx(bo,{className:"h-8 w-8 text-primary"}),o.jsxs("span",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})]})}),o.jsxs(K,{className:"shadow-elegant",children:[o.jsxs(ze,{className:"text-center",children:[o.jsx(He,{className:"text-2xl",children:"Welcome to ViaEstate"}),o.jsx(wr,{children:"Sign in to your account or create a new one"})]}),o.jsx(te,{children:o.jsxs(Fy,{defaultValue:"login",className:"w-full",children:[o.jsxs(pm,{className:"grid w-full grid-cols-2",children:[o.jsx(es,{value:"login",children:"Sign In"}),o.jsx(es,{value:"signup",children:"Sign Up"})]}),o.jsx(Cs,{value:"login",className:"space-y-4",children:o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"email",children:"Email"}),o.jsx(Z,{id:"email",type:"email",placeholder:"your@email.com",value:f.email,onChange:x=>p({...f,email:x.target.value}),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"password",children:"Password"}),o.jsx(Z,{id:"password",type:"password",placeholder:"",value:f.password,onChange:x=>p({...f,password:x.target.value}),required:!0})]}),o.jsx($,{type:"submit",className:"w-full",disabled:s,children:s?"Signing in...":"Sign In"}),o.jsx("div",{className:"text-center",children:o.jsx($,{type:"button",variant:"link",onClick:()=>n(!0),className:"text-sm text-muted-foreground hover:text-primary",children:"Forgot your password?"})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),o.jsxs($,{type:"button",variant:"outline",className:"w-full",onClick:w,disabled:s,children:[o.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Signing in...":"Continue with Google"]})]})}),o.jsx(Cs,{value:"signup",className:"space-y-4",children:o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"fullName",children:"Full Name"}),o.jsx(Z,{id:"fullName",type:"text",placeholder:"John Doe",value:m.fullName,onChange:x=>y({...m,fullName:x.target.value}),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"signup-email",children:"Email"}),o.jsx(Z,{id:"signup-email",type:"email",placeholder:"your@email.com",value:m.email,onChange:x=>y({...m,email:x.target.value}),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"signup-password",children:"Password"}),o.jsx(Z,{id:"signup-password",type:"password",placeholder:"",value:m.password,onChange:x=>y({...m,password:x.target.value}),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(oe,{htmlFor:"role",children:"Account Type"}),o.jsxs(bn,{value:m.role,onValueChange:x=>y({...m,role:x}),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Select account type"})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"private_user",children:"Private Seller"}),o.jsx(ce,{value:"broker",children:"Real Estate Broker"})]})]})]}),o.jsx($,{type:"submit",className:"w-full",disabled:s,children:s?"Creating account...":"Create Account"})]})})]})})]}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:o.jsxs(K,{className:"w-full max-w-md",children:[o.jsxs(ze,{children:[o.jsxs(He,{className:"flex items-center",children:[o.jsx(r4,{className:"h-5 w-5 mr-2"}),"Reset Password"]}),o.jsx(wr,{children:"Enter your email address and we'll send you a password reset link."})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"reset-email",children:"Email Address"}),o.jsx(Z,{id:"reset-email",type:"email",value:r,onChange:x=>i(x.target.value),required:!0,placeholder:"your@email.com"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx($,{type:"submit",className:"flex-1",disabled:s,children:s?"Sending...":"Send Reset Email"}),o.jsx($,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:s,children:"Cancel"})]})]})})]})})]})})},gB=()=>{const s=ns();return _.useEffect(()=>{(async()=>{var t;try{const{data:n,error:r}=await V.auth.getSession();if(r)throw r;if((t=n.session)!=null&&t.user){const{data:i,error:a}=await V.from("profiles").select("*").eq("id",n.session.user.id).single();if(a&&a.code==="PGRST116"){const{error:l}=await V.from("profiles").insert({id:n.session.user.id,email:n.session.user.email,full_name:n.session.user.user_metadata.full_name||n.session.user.email.split("@")[0],role:"private_user",status:"pending"});if(l)throw l;De({title:"Account created!",description:"Your Google account is now registered and pending admin approval."})}else i&&De({title:"Welcome back!",description:"You have successfully signed in with Google."})}s("/")}catch(n){console.error("Auth callback error:",n),De({title:"Authentication failed",description:n.message,variant:"destructive"}),s("/login")}})()},[s]),o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Completing sign in..."})]})})},VA=()=>{const[s,e]=_.useState([]),[t,n]=_.useState(null),[r,i]=_.useState(!0),[a,l]=_.useState({search:"",country:"",city:"",minPrice:"",maxPrice:"",bedrooms:"",bathrooms:"",propertyType:"",status:"published"}),c=ns(),{id:d}=by(),[h]=T_(),[f,p]=_.useState(!1);_.useEffect(()=>{if(!f){const g={search:h.get("search")||"",country:h.get("country")||"",city:h.get("city")||"",minPrice:h.get("minPrice")||"",maxPrice:h.get("maxPrice")||"",bedrooms:h.get("bedrooms")||"",bathrooms:h.get("bathrooms")||"",propertyType:h.get("propertyType")||"",status:"published"};Object.values(g).some(v=>v!==""&&v!=="published")&&l(g),p(!0)}},[h,f]),_.useEffect(()=>{m()},[a]),_.useEffect(()=>{d?(n(null),(async()=>{try{const{data:w,error:v}=await V.from("properties").select(`
              id, title, description, country, city, price, property_type,
              property_type_detail, bedrooms, bathrooms, area, plot_area,
              distance_to_city, distance_to_sea, distance_to_lake, listing_type,
              images, videos, seller_id, seller_type, status, package_id,
              rejection_reason, created_at, updated_at, region, address,
              lat, lon, features, distance_to_beach_m, views, verified, currency
            `).eq("id",d).eq("status","published").single();if(v)throw v;w?n(w):De({title:"Property not found",description:"The property you're looking for doesn't exist or is no longer available.",variant:"destructive"})}catch(w){console.error("Error fetching property by ID:",w),De({title:"Property not found",description:"The property you're looking for doesn't exist or is no longer available.",variant:"destructive"})}})()):n(null)},[d]);const m=async()=>{try{let w=V.from("properties").select(`
        id, title, description, country, city, price, property_type,
        property_type_detail, bedrooms, bathrooms, area, plot_area,
        distance_to_city, distance_to_sea, distance_to_lake, listing_type,
        images, videos, seller_id, seller_type, status, package_id,
        rejection_reason, created_at, updated_at, region, address,
        lat, lon, features, distance_to_beach_m, views, verified, currency
      `).eq("status","published").order("created_at",{ascending:!1});a.country&&(w=w.ilike("country",`%${a.country}%`)),a.city&&(w=w.ilike("city",`%${a.city}%`)),a.search&&(w=w.or(`title.ilike.%${a.search}%,description.ilike.%${a.search}%`)),a.minPrice&&(w=w.gte("price",parseInt(a.minPrice))),a.maxPrice&&(w=w.lte("price",parseInt(a.maxPrice))),a.bedrooms&&(w=w.gte("bedrooms",parseInt(a.bedrooms))),a.bathrooms&&(w=w.gte("bathrooms",parseInt(a.bathrooms))),a.propertyType&&(w=w.ilike("property_type",`%${a.propertyType}%`));const{data:v,error:b}=await w;if(b)if(console.error("Error fetching properties:",b),b.message.includes("column")||b.message.includes("does not exist")){const x=V.from("properties").select("id, title, description, country, city, price, images, seller_type, status, created_at").eq("status","published").order("created_at",{ascending:!1}),{data:S,error:j}=await x;if(j)throw j;e(S||[])}else throw b;else e(v||[])}catch(g){console.error("Error in fetchProperties:",g),De({title:"Error fetching properties",description:g.message||"Failed to load properties. Please try again.",variant:"destructive"}),e([])}finally{i(!1)}},y=!a.search&&!a.country&&!a.city&&!a.minPrice&&!a.maxPrice;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs(K,{className:"mb-8",children:[o.jsxs(ze,{children:[o.jsxs(He,{className:"flex items-center gap-2",children:[o.jsx(s4,{className:"h-5 w-5"}),"Search & Filter Properties"]}),o.jsx(wr,{children:"Find your perfect property with our advanced search tools"})]}),o.jsx(te,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[o.jsx("div",{className:"xl:col-span-2",children:o.jsx(Z,{placeholder:"Search properties...",value:a.search,onChange:g=>l({...a,search:g.target.value}),className:"w-full"})}),o.jsx(Z,{placeholder:"Country (e.g., Spain, France, Italy)",value:a.country,onChange:g=>l({...a,country:g.target.value})}),o.jsx(Z,{placeholder:"City",value:a.city,onChange:g=>l({...a,city:g.target.value})}),o.jsx(Z,{placeholder:"Min Price ()",type:"number",value:a.minPrice,onChange:g=>l({...a,minPrice:g.target.value})}),o.jsx(Z,{placeholder:"Max Price ()",type:"number",value:a.maxPrice,onChange:g=>l({...a,maxPrice:g.target.value})})]})})]}),r?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((g,w)=>o.jsxs(K,{className:"animate-pulse",children:[o.jsx("div",{className:"aspect-video bg-muted rounded-t-lg"}),o.jsxs(te,{className:"p-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-4"}),o.jsx("div",{className:"h-6 bg-muted rounded w-1/3"})]})]},w))}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(g=>o.jsx(Qk,{property:g,onClick:()=>n(g)},g.id))}),!r&&s.length===0&&o.jsx(K,{className:"text-center py-12",children:o.jsxs(te,{className:"space-y-3",children:[o.jsx(Ny,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),y?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xl font-semibold",children:"No properties available yet"}),o.jsx("p",{className:"text-muted-foreground",children:"Coming soon. Be the first to list a property or check back shortly."}),o.jsxs("div",{className:"flex gap-3 justify-center mt-4",children:[o.jsx($,{variant:"outline",onClick:()=>c("/"),children:"Back to Home"}),o.jsx($,{onClick:()=>c("/list-property"),children:"List Your Property"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xl font-semibold",children:"No properties match your filters"}),o.jsx("p",{className:"text-muted-foreground",children:"Try clearing filters or adjusting your search."}),o.jsxs("div",{className:"flex gap-3 justify-center mt-4",children:[o.jsx($,{variant:"outline",onClick:()=>l({search:"",country:"",city:"",minPrice:"",maxPrice:"",bedrooms:"",bathrooms:"",propertyType:"",status:"published"}),children:"Clear Filters"}),o.jsx($,{onClick:()=>c("/"),children:"Back to Home"})]})]})]})})]}),o.jsx(h1,{property:t,isOpen:!!t,onClose:()=>n(null)})]})};function vB(s){return s==="private_user"?"private":"broker"}const yB=()=>{const{user:s,profile:e}=Cn(),t=ns(),[n,r]=_.useState(!1),[i,a]=_.useState([]),[l,c]=_.useState([]),[d,h]=_.useState({title:"",description:"",country:"",city:"",price:"",property_type:"",package_id:"",bedrooms:"",bathrooms:"",area:"",plot_area:"",distance_to_city:"",distance_to_sea:"",distance_to_lake:""}),[f,p]=_.useState(""),[m,y]=_.useState("");if(!s)return o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Please Sign In"}),o.jsx("p",{className:"text-muted-foreground mb-8",children:"You need to be logged in to list a property."}),o.jsx($,{onClick:()=>t("/login"),children:"Sign In"})]})});const g=j=>{const N=Array.from(j.target.files||[]);a(k=>[...k,...N].slice(0,10))},w=j=>{const N=Array.from(j.target.files||[]);c(k=>[...k,...N].slice(0,3))},v=j=>{a(N=>N.filter((k,P)=>P!==j))},b=j=>{c(N=>N.filter((k,P)=>P!==j))},x=async(j,N)=>{const k=[];for(const P of j){const I=`${Date.now()}-${Math.random().toString(36).slice(2,8)}-${P.name}`,{data:T,error:M}=await V.storage.from("property-images").upload(`${N}/${I}`,P);if(M)throw M;const{data:U}=V.storage.from("property-images").getPublicUrl(T.path);U!=null&&U.publicUrl&&k.push(U.publicUrl)}return k},S=async j=>{if(j.preventDefault(),!!s){r(!0),p(""),y("");try{const N=d;if(!N.title||!N.description||!N.country||!N.city||!N.price)throw new Error("Please fill in all required fields.");const k=Number(N.price);if(!Number.isFinite(k)||k<=0)throw new Error("Please enter a valid price.");const P=N.bedrooms?Number(N.bedrooms):null,I=N.bathrooms?Number(N.bathrooms):null,T=N.area?Number(N.area):null,M=N.plot_area?Number(N.plot_area):null,U=N.distance_to_city?Number(N.distance_to_city):null,z=N.distance_to_sea?Number(N.distance_to_sea):null,B=N.distance_to_lake?Number(N.distance_to_lake):null,J=s.id,F=vB(e==null?void 0:e.role),W=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="broker"?"published":"pending",D={title:N.title.trim(),description:N.description.trim(),country:N.country.trim(),city:N.city.trim(),price:k,property_type:N.property_type?N.property_type.trim():null,package_id:N.package_id?N.package_id.trim():null,bedrooms:P,bathrooms:I,area:T,plot_area:M,distance_to_city:U,distance_to_sea:z,distance_to_lake:B,seller_id:J,seller_type:F,status:W},R=V.from("properties").insert([D]).select("*").single(),O=new Promise((Ie,Ee)=>setTimeout(()=>Ee(new Error("Request timeout")),2e4)),{data:H,error:Q}=await Promise.race([R,O]);if(Q)throw console.error("Insert error details:",Q),Q;if(!(H!=null&&H.id))throw new Error("Property creation returned no record. Please try again.");let ae=[],pe=[];try{i.length>0&&(ae=await x(i,`images/${J}`)),l.length>0&&(pe=await x(l,`videos/${J}`))}catch(Ie){console.error("Media upload failed:",Ie),De({title:"Property created, but media upload failed",description:(Ie==null?void 0:Ie.message)||"Please try adding images/videos later from your dashboard.",variant:"destructive"})}if(ae&&ae.length||pe&&pe.length){const{error:Ie}=await V.from("properties").update({images:ae&&ae.length?ae:null,videos:pe&&pe.length?pe:null}).eq("id",H.id);Ie&&console.error("Failed to update media URLs on property:",Ie)}y("Property listed successfully!"),De({title:"Property listed successfully!",description:(e==null?void 0:e.role)==="private_user"?"Your property has been submitted. Our team will contact you soon to connect you with a professional broker.":"Your property has been published successfully and is now live."}),t("/dashboard")}catch(N){console.error("Full error details:",N);const k=(N==null?void 0:N.message)||(N==null?void 0:N.hint)||(N==null?void 0:N.details)||(N==null?void 0:N.error_description)||"Failed to list property.";p("Failed to list property: "+k),De({title:"Error listing property",description:k,variant:"destructive"})}finally{r(!1)}}};return o.jsx("div",{className:"min-h-screen bg-background",children:o.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("div",{className:"mb-6",children:o.jsx(be,{variant:"secondary",className:"text-sm",children:(e==null?void 0:e.role)==="broker"?o.jsxs(o.Fragment,{children:[o.jsx(Xi,{className:"h-4 w-4 mr-1"}),"Professional Broker Account"]}):o.jsxs(o.Fragment,{children:[o.jsx(wf,{className:"h-4 w-4 mr-1"}),"Private Seller Account"]})})}),o.jsxs("form",{onSubmit:S,className:"space-y-8",children:[o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Property Information"}),o.jsx(wr,{children:"Provide the basic details about your property"})]}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"title",children:"Property Title *"}),o.jsx(Z,{id:"title",placeholder:"e.g., Luxury Villa with Sea View",value:d.title,onChange:j=>h({...d,title:j.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"description",children:"Description *"}),o.jsx(Zs,{id:"description",placeholder:"Describe your property in detail...",rows:4,value:d.description,onChange:j=>h({...d,description:j.target.value}),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"country",children:"Country *"}),o.jsxs(bn,{value:d.country||"",onValueChange:j=>h({...d,country:j}),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Select country"})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"Sweden",children:"Sweden"}),o.jsx(ce,{value:"Norway",children:"Norway"}),o.jsx(ce,{value:"Denmark",children:"Denmark"}),o.jsx(ce,{value:"Germany",children:"Germany"}),o.jsx(ce,{value:"France",children:"France"}),o.jsx(ce,{value:"Spain",children:"Spain"}),o.jsx(ce,{value:"Italy",children:"Italy"}),o.jsx(ce,{value:"Other",children:"Other"})]})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"city",children:"City *"}),o.jsx(Z,{id:"city",placeholder:"e.g., Stockholm",value:d.city,onChange:j=>h({...d,city:j.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"price",children:"Price (EUR) *"}),o.jsx(Z,{id:"price",type:"number",placeholder:"e.g., 850000",value:d.price,onChange:j=>h({...d,price:j.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"property_type",children:"Property Type"}),o.jsxs(bn,{value:d.property_type||"",onValueChange:j=>h({...d,property_type:j}),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Select type"})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"villa",children:"Villa"}),o.jsx(ce,{value:"apartment",children:"Apartment"}),o.jsx(ce,{value:"house",children:"House"}),o.jsx(ce,{value:"penthouse",children:"Penthouse"}),o.jsx(ce,{value:"commercial",children:"Commercial"}),o.jsx(ce,{value:"land",children:"Land"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"bedrooms",children:"Bedrooms"}),o.jsx(Z,{id:"bedrooms",type:"number",placeholder:"e.g., 3",value:d.bedrooms,onChange:j=>h({...d,bedrooms:j.target.value}),min:"0"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"bathrooms",children:"Bathrooms"}),o.jsx(Z,{id:"bathrooms",type:"number",placeholder:"e.g., 2",value:d.bathrooms,onChange:j=>h({...d,bathrooms:j.target.value}),min:"0"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"area",children:"Living Area (m)"}),o.jsx(Z,{id:"area",type:"number",placeholder:"e.g., 150",value:d.area,onChange:j=>h({...d,area:j.target.value}),min:"0"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"plot_area",children:"Plot Area (m)"}),o.jsx(Z,{id:"plot_area",type:"number",placeholder:"e.g., 800",value:d.plot_area,onChange:j=>h({...d,plot_area:j.target.value}),min:"0"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"distance_to_city",children:"Distance to City (m)"}),o.jsx(Z,{id:"distance_to_city",type:"number",placeholder:"e.g., 5000",value:d.distance_to_city,onChange:j=>h({...d,distance_to_city:j.target.value}),min:"0"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"distance_to_sea",children:"Distance to Sea (m)"}),o.jsx(Z,{id:"distance_to_sea",type:"number",placeholder:"e.g., 200",value:d.distance_to_sea,onChange:j=>h({...d,distance_to_sea:j.target.value}),min:"0"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"distance_to_lake",children:"Distance to Lake (m)"}),o.jsx(Z,{id:"distance_to_lake",type:"number",placeholder:"e.g., 1000",value:d.distance_to_lake,onChange:j=>h({...d,distance_to_lake:j.target.value}),min:"0"})]})]})]})]}),o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Property Media"}),o.jsx(wr,{children:"Upload high-quality images and videos of your property"})]}),o.jsxs(te,{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(oe,{children:"Images (Max 10)"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:g,className:"hidden",id:"image-upload"}),o.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer block w-full border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-primary transition-smooth",children:[o.jsx(Zr,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload images or drag and drop"})]})]}),i.length>0&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:i.map((j,N)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:URL.createObjectURL(j),alt:`Preview ${N+1}`,className:"w-full h-24 object-cover rounded-lg"}),o.jsx($,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>v(N),children:o.jsx(Ao,{className:"h-3 w-3"})})]},N))})]}),o.jsxs("div",{children:[o.jsx(oe,{children:"Videos (Max 3)"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("input",{type:"file",accept:"video/*",multiple:!0,onChange:w,className:"hidden",id:"video-upload"}),o.jsxs("label",{htmlFor:"video-upload",className:"cursor-pointer block w-full border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-primary transition-smooth",children:[o.jsx(Zr,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload videos or drag and drop"})]})]}),l.length>0&&o.jsx("div",{className:"space-y-2 mt-4",children:l.map((j,N)=>o.jsxs("div",{className:"flex items-center justify-between bg-muted p-3 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:j.name}),o.jsx($,{type:"button",variant:"destructive",size:"sm",onClick:()=>b(N),children:o.jsx(Ao,{className:"h-4 w-4"})})]},N))})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx($,{type:"button",variant:"outline",onClick:()=>t("/"),children:"Cancel"}),o.jsx($,{type:"submit",disabled:n,children:n?"Submitting...":"List Property"})]}),f&&o.jsx("div",{className:"text-red-600 mt-2",children:f}),m&&o.jsx("div",{className:"text-green-600 mt-2",children:m})]})]})})})},qm=[{id:"properties",label:"Properties",icon:bo,path:"/properties",description:"Browse property listings"},{id:"articles",label:"Articles",icon:Ws,path:"/articles",description:"Read news and blog posts"},{id:"forum",label:"Forum",icon:Xh,path:"/forum",description:"Community discussions"},{id:"packages",label:"Packages",icon:o4,path:"/packages",description:"Service packages"},{id:"contact",label:"Contact",icon:l4,path:"/about",description:"Get in touch"}],qs=({className:s,showFilters:e=!1,onFilterChange:t})=>{var d;const n=ns(),r=oi();T_();const a=(()=>{const h=r.pathname;return h==="/"||h.startsWith("/properties")?"properties":h.startsWith("/articles")?"articles":h.startsWith("/forum")?"forum":h.startsWith("/packages")?"packages":h.startsWith("/about")||h.startsWith("/contact")?"contact":"properties"})(),l=h=>{r.pathname!==h.path&&n(h.path)},c=()=>{};return o.jsx("div",{className:Se("border-b border-border bg-background/50 backdrop-blur-sm",s),children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("div",{className:"flex justify-center items-center py-3",children:o.jsxs(Ns,{to:"/",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[o.jsx(bo,{className:"h-8 w-8 text-primary"}),o.jsxs("span",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})]})}),o.jsx("div",{className:"hidden md:flex items-center justify-center space-x-1 py-3",children:qm.map(h=>{const f=h.icon,p=a===h.id;return o.jsxs($,{variant:"ghost",size:"sm",onClick:()=>l(h),className:Se("flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200","hover:bg-accent hover:text-accent-foreground",p&&"bg-primary text-primary-foreground shadow-sm border-primary"),role:"tab","aria-selected":p,children:[o.jsx(f,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:h.label}),p&&o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 bg-primary rounded-full"})]},h.id)})}),o.jsx("div",{className:"md:hidden flex justify-center py-3",children:o.jsxs(Ns,{to:"/",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[o.jsx(bo,{className:"h-6 w-6 text-primary"}),o.jsxs("span",{className:"text-lg font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})]})}),o.jsx("div",{className:"md:hidden py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:qm.map(h=>{const f=h.icon,p=a===h.id;return o.jsxs($,{variant:"ghost",size:"sm",onClick:()=>l(h),className:Se("flex items-center gap-1 px-3 py-1.5 rounded-md text-xs",p&&"bg-primary text-primary-foreground"),role:"tab","aria-selected":p,children:[o.jsx(f,{className:"h-3 w-3"}),o.jsx("span",{children:h.label})]},h.id)})}),e&&o.jsx($,{variant:"outline",size:"sm",onClick:c,className:"ml-2 flex-shrink-0",children:"Filters"})]})}),e&&o.jsx("div",{className:"py-2 border-t border-border/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-2",children:(()=>{const h=qm.find(p=>p.id===a),f=h==null?void 0:h.icon;return o.jsxs(o.Fragment,{children:[f&&o.jsx(f,{className:"h-4 w-4 text-primary"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:h==null?void 0:h.description})]})})()}),o.jsx(be,{variant:"secondary",className:"text-xs",children:(d=qm.find(h=>h.id===a))==null?void 0:d.label})]})})]})})},xB=()=>{const[s,e]=_.useState({customer_name:"",customer_email:"",customer_phone:"",title:"",description:"",country:"",city:"",estimated_price:"",property_type:""}),[t,n]=_.useState([]),[r,i]=_.useState(!1),a=async c=>{c.preventDefault(),i(!0);try{const{data:d,error:h}=await V.from("property_requests").insert({...s,estimated_price:s.estimated_price?parseFloat(s.estimated_price):null,images:t}).select().single();if(h)throw h;De({title:"Property Request Submitted!",description:"Your property request has been submitted. Agents will be able to claim it and contact you directly."}),e({customer_name:"",customer_email:"",customer_phone:"",title:"",description:"",country:"",city:"",estimated_price:"",property_type:""}),n([])}catch(d){De({title:"Error submitting request",description:d instanceof Error?d.message:"An unexpected error occurred",variant:"destructive"})}finally{i(!1)}},l=(c,d)=>{e(h=>({...h,[c]:d}))};return o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsxs(He,{className:"flex items-center",children:[o.jsx(lc,{className:"h-6 w-6 mr-2"}),"Submit Your Property Request"]}),o.jsx("p",{className:"text-muted-foreground",children:"Submit your property details and get connected with professional real estate agents who will handle the listing for you."})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:a,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"name",children:"Full Name *"}),o.jsx(Z,{id:"name",value:s.customer_name,onChange:c=>l("customer_name",c.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"email",children:"Email Address *"}),o.jsx(Z,{id:"email",type:"email",value:s.customer_email,onChange:c=>l("customer_email",c.target.value),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"phone",children:"Phone Number"}),o.jsx(Z,{id:"phone",value:s.customer_phone,onChange:c=>l("customer_phone",c.target.value)})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Property Information"}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"title",children:"Property Title *"}),o.jsx(Z,{id:"title",placeholder:"e.g., Modern 3-bedroom apartment with sea view",value:s.title,onChange:c=>l("title",c.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"description",children:"Property Description *"}),o.jsx(Zs,{id:"description",placeholder:"Describe your property in detail...",value:s.description,onChange:c=>l("description",c.target.value),rows:4,required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"country",children:"Country *"}),o.jsx(Z,{id:"country",value:s.country,onChange:c=>l("country",c.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"city",children:"City *"}),o.jsx(Z,{id:"city",value:s.city,onChange:c=>l("city",c.target.value),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"type",children:"Property Type *"}),o.jsxs(bn,{value:s.property_type,onValueChange:c=>l("property_type",c),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Select property type"})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"apartment",children:"Apartment"}),o.jsx(ce,{value:"house",children:"House"}),o.jsx(ce,{value:"villa",children:"Villa"}),o.jsx(ce,{value:"townhouse",children:"Townhouse"}),o.jsx(ce,{value:"penthouse",children:"Penthouse"}),o.jsx(ce,{value:"studio",children:"Studio"}),o.jsx(ce,{value:"commercial",children:"Commercial Property"}),o.jsx(ce,{value:"land",children:"Land"}),o.jsx(ce,{value:"other",children:"Other"})]})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"price",children:"Estimated Price (EUR)"}),o.jsx(Z,{id:"price",type:"number",placeholder:"0",value:s.estimated_price,onChange:c=>l("estimated_price",c.target.value)})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Property Images"}),o.jsxs("div",{className:"border-2 border-dashed border-muted rounded-lg p-6 text-center",children:[o.jsx(Zr,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),o.jsx("p",{className:"text-muted-foreground mb-2",children:"Upload property images"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Images will help agents understand your property better"}),o.jsx($,{type:"button",variant:"outline",className:"mt-2",disabled:!0,children:"Upload Images (Coming Soon)"})]})]}),o.jsxs("div",{className:"pt-4",children:[o.jsx($,{type:"submit",size:"lg",className:"w-full",disabled:r,children:r?"Submitting...":o.jsxs(o.Fragment,{children:[o.jsx(B_,{className:"h-4 w-4 mr-2"}),"Submit Property Request"]})}),o.jsx("p",{className:"text-sm text-muted-foreground mt-3 text-center",children:"After submission, qualified agents will be able to claim your property and contact you directly to assist with the listing process."})]})]})})]})})},wB=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Submit Your Property"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"List your property with professional assistance from our certified real estate agents"})]}),o.jsx(xB,{})]})]}),bB=()=>{const{user:s,profile:e}=Cn(),[t,n]=_.useState({name:"",email:"",phone:"",company:"",message:""});_.useEffect(()=>{s!=null&&s.email&&!t.email&&n(a=>({...a,email:s.email})),e!=null&&e.full_name&&!t.name&&n(a=>({...a,name:e.full_name}))},[s,e,t.email,t.name]);const r=[{id:"commission",name:"Commission-Based",subtitle:"Success-Based Pricing",price:"Commission",period:"on sale",description:"If we help you sell a property, we take a commission on the total sale price. Simple and success-based.",icon:o.jsx(CN,{className:"h-6 w-6"}),popular:!1,features:["No upfront costs","Commission only on successful sales","Professional property presentation","Marketing across our platform","Lead management and follow-up"]},{id:"basic",name:"Monthly Basic Plan",subtitle:"Essential Marketing",price:"200",period:"month",description:"Perfect for getting started with professional listings",icon:o.jsx(p4,{className:"h-6 w-6"}),popular:!1,features:["Performance statistics and analytics","Your properties featured on our platform and social media channels","Basic property listings","Standard marketing exposure","Monthly performance reports"]},{id:"exclusive",name:"Monthly Exclusive Plan",subtitle:"Premium Marketing",price:"450",period:"month",description:"Maximum exposure with professional production",icon:o.jsx(e4,{className:"h-6 w-6"}),popular:!0,features:["Everything from the Basic Plan, plus:","Professional video editing and tailored promotion","Dedicated photographer for your listings","Premium placement and boosted reach on social media","Advanced analytics and insights","Priority customer support"]},{id:"mixed",name:"Mixed Categories",subtitle:"Flexible Custom Plan",price:"Custom",period:"pricing",description:"Combine different categories and services based on your specific needs",icon:o.jsx(c4,{className:"h-6 w-6"}),popular:!1,features:["Mix commission-based and monthly plans","Choose specific services from different tiers","Custom service combinations","Flexible payment terms","Personal consultation included","Tailored marketing strategy"]}],i=async a=>{a.preventDefault();const l={name:t.name,email:t.email,phone:t.phone||null,company:t.company||null,message:t.message,selected_features:{plan:"Custom Quote"},status:"pending"};try{const{data:c,error:d}=await V.rpc("submit_package_quote",{p_name:l.name,p_email:l.email,p_message:l.message,p_phone:l.phone,p_company:l.company,p_selected_features:l.selected_features});if(d)throw d;if(!c.success)throw new Error(c.error||"Failed to submit quote request");De({title:"Quote request sent!",description:"We'll contact you within 24 hours with your custom quote."}),n({name:s!=null&&s.email&&(e==null?void 0:e.full_name)||"",email:(s==null?void 0:s.email)||"",phone:"",company:"",message:""})}catch(c){console.error("Error sending quote request:",c),De({title:"Error",description:"Failed to send quote request. Please try again.",variant:"destructive"})}};return o.jsx("div",{className:"min-h-screen bg-background",children:o.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"mb-12",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Choose Your Pricing Option"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(a=>o.jsxs(K,{className:`relative ${a.popular?"ring-2 ring-primary":""}`,children:[a.popular&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:o.jsx(be,{className:"bg-primary text-primary-foreground px-3 py-1",children:"Most Popular"})}),o.jsxs(ze,{className:"text-center pb-4",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${a.popular?"bg-gradient-primary":"bg-muted"}`,children:o.jsx("span",{className:a.popular?"text-primary-foreground":"text-primary",children:a.icon})})}),o.jsx(He,{className:"text-2xl font-bold",children:a.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:a.subtitle}),o.jsxs("div",{className:"mt-4",children:[o.jsx("span",{className:"text-4xl font-bold",children:a.price}),o.jsxs("span",{className:"text-muted-foreground",children:["/",a.period]})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:a.description})]}),o.jsx(te,{children:o.jsx("ul",{className:"space-y-3 mb-6",children:a.features.map((l,c)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx(U_,{className:"h-4 w-4 text-primary mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm",children:l})]},c))})})]},a.id))})]}),o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Get Started with Your Chosen Plan"}),o.jsx(wr,{children:"Contact us to discuss your chosen pricing option and get started"})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:i,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"name",children:"Full Name *"}),o.jsx(Z,{id:"name",value:t.name,onChange:a=>n({...t,name:a.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"email",children:"Email *"}),o.jsx(Z,{id:"email",type:"email",value:t.email,onChange:a=>n({...t,email:a.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"phone",children:"Phone"}),o.jsx(Z,{id:"phone",value:t.phone,onChange:a=>n({...t,phone:a.target.value})})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"company",children:"Company"}),o.jsx(Z,{id:"company",value:t.company,onChange:a=>n({...t,company:a.target.value})})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"message",children:"Chosen Plan & Additional Requirements *"}),o.jsx(Zs,{id:"message",placeholder:"Please specify which pricing plan you're interested in and any additional requirements or questions.",value:t.message,onChange:a=>n({...t,message:a.target.value}),rows:4,required:!0})]}),o.jsx($,{type:"submit",className:"w-full md:w-auto",children:"Get Started"})]})})]}),o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Get Your Custom Quote"}),o.jsx(wr,{children:"Fill out this form and we'll create a personalized proposal for you"})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:i,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"name",children:"Full Name *"}),o.jsx(Z,{id:"name",value:t.name,onChange:a=>n({...t,name:a.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"email",children:"Email *"}),o.jsx(Z,{id:"email",type:"email",value:t.email,onChange:a=>n({...t,email:a.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"phone",children:"Phone"}),o.jsx(Z,{id:"phone",value:t.phone,onChange:a=>n({...t,phone:a.target.value})})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"company",children:"Company"}),o.jsx(Z,{id:"company",value:t.company,onChange:a=>n({...t,company:a.target.value})})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"message",children:"Additional Requirements *"}),o.jsx(Zs,{id:"message",placeholder:"Tell us about your specific needs, number of properties, target markets, etc.",value:t.message,onChange:a=>n({...t,message:a.target.value}),rows:4,required:!0})]}),o.jsx($,{type:"submit",className:"w-full md:w-auto",children:"Request Custom Quote"})]})})]})]})})})};var BP="AlertDialog",[_B,u5]=Lo(BP,[Zk]),ua=Zk(),zP=s=>{const{__scopeAlertDialog:e,...t}=s,n=ua(e);return o.jsx(mP,{...n,...t,modal:!0})};zP.displayName=BP;var SB="AlertDialogTrigger",HP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,r=ua(t);return o.jsx(gP,{...r,...n,ref:e})});HP.displayName=SB;var AB="AlertDialogPortal",VP=s=>{const{__scopeAlertDialog:e,...t}=s,n=ua(e);return o.jsx(vP,{...n,...t})};VP.displayName=AB;var jB="AlertDialogOverlay",WP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,r=ua(t);return o.jsx(o1,{...r,...n,ref:e})});WP.displayName=jB;var xd="AlertDialogContent",[EB,CB]=_B(xd),NB=dF("AlertDialogContent"),qP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,children:n,...r}=s,i=ua(t),a=_.useRef(null),l=tt(e,a),c=_.useRef(null);return o.jsx($U,{contentName:xd,titleName:GP,docsSlug:"alert-dialog",children:o.jsx(EB,{scope:t,cancelRef:c,children:o.jsxs(l1,{role:"alertdialog",...i,...r,ref:l,onOpenAutoFocus:Ne(r.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(NB,{children:n}),o.jsx(PB,{contentRef:a})]})})})});qP.displayName=xd;var GP="AlertDialogTitle",KP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,r=ua(t);return o.jsx(c1,{...r,...n,ref:e})});KP.displayName=GP;var XP="AlertDialogDescription",YP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,r=ua(t);return o.jsx(d1,{...r,...n,ref:e})});YP.displayName=XP;var kB="AlertDialogAction",QP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,r=ua(t);return o.jsx(u1,{...r,...n,ref:e})});QP.displayName=kB;var JP="AlertDialogCancel",ZP=_.forwardRef((s,e)=>{const{__scopeAlertDialog:t,...n}=s,{cancelRef:r}=CB(JP,t),i=ua(t),a=tt(e,r);return o.jsx(u1,{...i,...n,ref:a})});ZP.displayName=JP;var PB=({contentRef:s})=>{const e=`\`${xd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${xd}\` by passing a \`${XP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${xd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var n;document.getElementById((n=s.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,s]),null},TB=zP,RB=HP,IB=VP,eT=WP,tT=qP,sT=QP,nT=ZP,rT=KP,iT=YP;const kv=TB,x0=RB,MB=IB,aT=_.forwardRef(({className:s,...e},t)=>o.jsx(eT,{className:Se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e,ref:t}));aT.displayName=eT.displayName;const Sf=_.forwardRef(({className:s,...e},t)=>o.jsxs(MB,{children:[o.jsx(aT,{}),o.jsx(tT,{ref:t,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...e})]}));Sf.displayName=tT.displayName;const Af=({className:s,...e})=>o.jsx("div",{className:Se("flex flex-col space-y-2 text-center sm:text-left",s),...e});Af.displayName="AlertDialogHeader";const jf=({className:s,...e})=>o.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});jf.displayName="AlertDialogFooter";const Ef=_.forwardRef(({className:s,...e},t)=>o.jsx(rT,{ref:t,className:Se("text-lg font-semibold",s),...e}));Ef.displayName=rT.displayName;const Cf=_.forwardRef(({className:s,...e},t)=>o.jsx(iT,{ref:t,className:Se("text-sm text-muted-foreground",s),...e}));Cf.displayName=iT.displayName;const Nf=_.forwardRef(({className:s,...e},t)=>o.jsx(sT,{ref:t,className:Se($_(),s),...e}));Nf.displayName=sT.displayName;const kf=_.forwardRef(({className:s,...e},t)=>o.jsx(nT,{ref:t,className:Se($_({variant:"outline"}),"mt-2 sm:mt-0",s),...e}));kf.displayName=nT.displayName;const LB=()=>{const{user:s,profile:e}=Cn(),t=ns(),[n,r]=_.useState([]),[i,a]=_.useState([]),[l,c]=_.useState(!0),[d,h]=_.useState(null),[f,p]=_.useState(null);_.useEffect(()=>{s&&m()},[s]);const m=async()=>{if(s)try{const j=`
        id, title, description, country, city, price, property_type,
        images, seller_id, seller_type, status, created_at, updated_at
      `,{data:N,error:k}=await V.from("properties").select(j).eq("seller_id",s.id).order("created_at",{ascending:!1});if(k)if(console.error("Error fetching properties:",k),k.message.includes("column")||k.message.includes("does not exist")){const I=V.from("properties").select("id, title, description, country, city, price, images, seller_type, status, created_at").eq("seller_id",s.id).order("created_at",{ascending:!1}),{data:T,error:M}=await I;if(M)throw M;r(T||[])}else throw k;else r(N||[]);const P=(N==null?void 0:N.map(I=>I.id))||[];if(P.length>0){const{data:I,error:T}=await V.from("leads").select("*").in("property_id",P).order("created_at",{ascending:!1});if(T)throw T;a(I||[])}}catch(j){De({title:"Error loading dashboard",description:j.message,variant:"destructive"})}finally{c(!1)}},y=async()=>{if(d)try{const{error:j}=await V.from("properties").delete().eq("id",d.id);if(j)throw j;r(n.filter(N=>N.id!==d.id)),De({title:"Property Deleted",description:`"${d.title}" has been successfully deleted.`})}catch(j){De({title:"Error deleting property",description:j.message,variant:"destructive"})}finally{h(null)}},g=j=>{switch(j){case"published":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=j=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j);if(!s)return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Please Sign In"}),o.jsx("p",{className:"text-muted-foreground mb-8",children:"You need to be logged in to access the dashboard."}),o.jsx($,{onClick:()=>t("/login"),children:"Sign In"})]})]});if(l)return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading dashboard..."})]})]});const v=n.filter(j=>j.status==="published"),b=n.filter(j=>j.status==="pending"),x=i.length,S=i.slice(0,5);return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(bo,{className:"h-10 w-10 text-primary"}),o.jsxs("span",{className:"text-3xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),o.jsxs("p",{className:"text-xl text-muted-foreground",children:["Welcome back, ",e==null?void 0:e.full_name]}),o.jsx(be,{variant:"secondary",className:"mt-2",children:(e==null?void 0:e.role)==="broker"?"Professional Broker":"Private Seller"})]})]}),o.jsxs($,{onClick:()=>t("/list-property"),children:[o.jsx(ni,{className:"h-4 w-4 mr-2"}),"List New Property"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xi,{className:"h-8 w-8 text-primary"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Properties"}),o.jsx("p",{className:"text-2xl font-bold",children:n.length})]})]})})}),o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(_o,{className:"h-8 w-8 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Published"}),o.jsx("p",{className:"text-2xl font-bold",children:v.length})]})]})})}),o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yi,{className:"h-8 w-8 text-yellow-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Approval"}),o.jsx("p",{className:"text-2xl font-bold",children:b.length})]})]})})}),o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(wf,{className:"h-8 w-8 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Leads"}),o.jsx("p",{className:"text-2xl font-bold",children:x})]})]})})})]}),o.jsxs(Fy,{defaultValue:"properties",className:"space-y-6",children:[o.jsxs(pm,{children:[o.jsx(es,{value:"properties",children:"My Properties"}),o.jsx(es,{value:"ongoing",children:"Ongoing"}),o.jsx(es,{value:"leads",children:"Leads"}),o.jsx(es,{value:"analytics",children:"Analytics"})]}),o.jsx(Cs,{value:"properties",className:"space-y-6",children:o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Property Management"}),o.jsx(wr,{children:"Manage your property listings and track their status"})]}),o.jsx(te,{children:n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Xi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No properties yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by listing your first property"}),o.jsxs($,{onClick:()=>t("/list-property"),children:[o.jsx(ni,{className:"h-4 w-4 mr-2"}),"List Your First Property"]})]}):o.jsx("div",{className:"space-y-4",children:n.map(j=>o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("div",{className:"w-24 h-16 bg-muted rounded-lg flex-shrink-0",children:j.images&&j.images.length>0?o.jsx("img",{src:j.images[0],alt:j.title,className:"w-full h-full object-cover rounded-lg"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Xi,{className:"h-6 w-6 text-muted-foreground"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg",children:j.title}),o.jsxs("p",{className:"text-muted-foreground",children:[j.city,", ",j.country]}),o.jsx("p",{className:"text-lg font-bold text-primary",children:w(j.price)}),o.jsxs("div",{className:"flex flex-col items-start space-y-1",children:[o.jsx(be,{className:g(j.status),children:j.status}),j.status==="rejected"&&j.rejection_reason&&o.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Reason: ",j.rejection_reason]})]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx($,{variant:"outline",size:"sm",onClick:()=>p(j),children:o.jsx(_o,{className:"h-4 w-4"})}),o.jsx($,{variant:"outline",size:"sm",onClick:()=>t(`/edit-property/${j.id}`),children:o.jsx(wv,{className:"h-4 w-4"})}),o.jsx($,{variant:"outline",size:"sm",className:"text-destructive",onClick:()=>h(j),children:o.jsx(bv,{className:"h-4 w-4"})})]})]})})},j.id))})})]})}),o.jsx(Cs,{value:"ongoing",className:"space-y-6",children:o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Ongoing Matters"}),o.jsx(wr,{children:"Pending approvals and newest leads"})]}),o.jsx(te,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(Yi,{className:"h-4 w-4"})," Pending Properties"]}),b.length===0?o.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending properties."}):o.jsx("div",{className:"space-y-3",children:b.map(j=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded border",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:j.title}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.city,", ",j.country]})]}),o.jsx(be,{className:g(j.status),children:j.status})]},j.id))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[o.jsx(a0,{className:"h-4 w-4"})," Newest Leads"]}),S.length===0?o.jsx("p",{className:"text-sm text-muted-foreground",children:"No leads yet."}):o.jsx("div",{className:"space-y-3",children:S.slice(0,5).map(j=>o.jsxs("div",{className:"p-3 rounded border",children:[o.jsx("p",{className:"font-medium",children:j.name}),o.jsx("p",{className:"text-xs text-muted-foreground",children:j.email}),o.jsx("p",{className:"text-sm mt-1 line-clamp-2",children:j.message})]},j.id))})]})]})})]})}),o.jsx(Cs,{value:"leads",className:"space-y-6",children:o.jsxs(K,{children:[o.jsxs(ze,{children:[o.jsx(He,{children:"Recent Leads"}),o.jsx(wr,{children:"People interested in your properties"})]}),o.jsx(te,{children:S.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(a0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No leads yet"}),o.jsx("p",{className:"text-muted-foreground",children:"Leads will appear here when people contact you about your properties"})]}):o.jsx("div",{className:"space-y-4",children:S.map(j=>o.jsx(K,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:j.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:j.email}),j.phone&&o.jsx("p",{className:"text-sm text-muted-foreground",children:j.phone}),o.jsx("p",{className:"text-sm mt-2",children:j.message})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(j.created_at).toLocaleDateString()}),o.jsx($,{size:"sm",className:"mt-2",onClick:()=>window.open(`mailto:${j.email}?subject=Regarding your property inquiry&body=Hi ${j.name},%0A%0AThank you for your interest in my property. I'd be happy to discuss the details with you.%0A%0ABest regards,%0A${(e==null?void 0:e.full_name)||"Property Owner"}`,"_blank"),children:"Contact Lead"})]})]})})},j.id))})})]})}),o.jsx(Cs,{value:"analytics",className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(K,{children:[o.jsx(ze,{children:o.jsxs(He,{className:"flex items-center space-x-2",children:[o.jsx(z_,{className:"h-5 w-5"}),o.jsx("span",{children:"Performance Overview"})]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Total Property Views"}),o.jsx("span",{className:"font-semibold",children:"2,341"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Leads This Month"}),o.jsx("span",{className:"font-semibold",children:x})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Average Response Time"}),o.jsx("span",{className:"font-semibold",children:"2.3 hours"})]})]})})]}),o.jsxs(K,{children:[o.jsx(ze,{children:o.jsxs(He,{className:"flex items-center space-x-2",children:[o.jsx(SN,{className:"h-5 w-5"}),o.jsx("span",{children:"Financial Overview"})]})}),o.jsx(te,{children:o.jsx("p",{className:"text-muted-foreground",children:"Coming soon..."})})]})]})})]})]}),o.jsx(kv,{open:!!d,onOpenChange:j=>!j&&h(null),children:o.jsxs(Sf,{children:[o.jsxs(Af,{children:[o.jsx(Ef,{children:"Are you sure you want to delete this property?"}),o.jsxs(Cf,{children:['This action cannot be undone. This will permanently delete the property "',d==null?void 0:d.title,'" and all associated data.']})]}),o.jsxs(jf,{children:[o.jsx(kf,{children:"Cancel"}),o.jsx(Nf,{onClick:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),o.jsx(h1,{property:f,isOpen:!!f,onClose:()=>p(null)})]})},DB=()=>{const{user:s,profile:e}=Cn(),t=ns(),{id:n}=by(),[r,i]=_.useState(null),[a,l]=_.useState(!0),[c,d]=_.useState(!1),[h,f]=_.useState([]),[p,m]=_.useState({title:"",description:"",country:"",city:"",price:"",property_type:"",property_type_detail:"",bedrooms:"",bathrooms:"",area:"",plot_area:"",distance_to_city:"",distance_to_sea:"",distance_to_lake:"",listing_type:"sale",status:"draft",owner_id:""});_.useEffect(()=>{if(!s){t("/login");return}},[s,t]),_.useEffect(()=>{s&&n&&(y(),(e==null?void 0:e.role)==="admin"&&g())},[s,n,e==null?void 0:e.role]);const y=async()=>{if(n)try{l(!0);const x=`
        id, title, description, country, city, price, property_type,
        property_type_detail, bedrooms, bathrooms, area, plot_area,
        distance_to_city, distance_to_sea, distance_to_lake, listing_type,
        images, owner_id, owner_type, status, created_at, updated_at
      `,{data:S,error:j}=await V.from("properties").select(x).eq("id",n).single();if(j)if(j.message.includes("column")||j.message.includes("does not exist")){const{data:N,error:k}=await V.from("properties").select("id, title, description, country, city, price, images, owner_type, status, created_at").eq("id",n).single();if(k)throw k;i(N)}else throw j;else i(S)}catch(x){console.error("Error fetching property:",x),De({title:"Error",description:"Failed to load property details.",variant:"destructive"}),t("/dashboard")}finally{l(!1)}},g=async()=>{try{const{data:x,error:S}=await V.from("profiles").select("id, email, full_name, role").order("full_name");if(S)throw S;f(x||[])}catch(x){console.error("Error fetching users:",x)}};_.useEffect(()=>{var x,S,j,N,k,P,I,T;r&&m({title:r.title||"",description:r.description||"",country:r.country||"",city:r.city||"",price:((x=r.price)==null?void 0:x.toString())||"",property_type:r.property_type||"",property_type_detail:r.property_type_detail||"",bedrooms:((S=r.bedrooms)==null?void 0:S.toString())||"",bathrooms:((j=r.bathrooms)==null?void 0:j.toString())||"",area:((N=r.area)==null?void 0:N.toString())||"",plot_area:((k=r.plot_area)==null?void 0:k.toString())||"",distance_to_city:((P=r.distance_to_city)==null?void 0:P.toString())||"",distance_to_sea:((I=r.distance_to_sea)==null?void 0:I.toString())||"",distance_to_lake:((T=r.distance_to_lake)==null?void 0:T.toString())||"",listing_type:r.listing_type||"sale",status:r.status||"draft",owner_id:r.owner_id||""})},[r]);const w=async x=>{if(x.preventDefault(),!(!r||!s)){if(!p.title||!p.description||!p.country||!p.city||!p.price){De({title:"Missing fields",description:"Please fill in all required fields.",variant:"destructive"});return}try{d(!0);const S={title:p.title,description:p.description,country:p.country,city:p.city,price:parseFloat(p.price),property_type:p.property_type||null,property_type_detail:p.property_type_detail||null,bedrooms:p.bedrooms?parseInt(p.bedrooms):null,bathrooms:p.bathrooms?parseInt(p.bathrooms):null,area:p.area?parseInt(p.area):null,plot_area:p.plot_area?parseInt(p.plot_area):null,distance_to_city:p.distance_to_city?parseInt(p.distance_to_city):null,distance_to_sea:p.distance_to_sea?parseInt(p.distance_to_sea):null,distance_to_lake:p.distance_to_lake?parseInt(p.distance_to_lake):null,listing_type:p.listing_type,status:p.status,updated_at:new Date().toISOString()};(e==null?void 0:e.role)==="admin"&&p.owner_id&&(S.owner_id=p.owner_id);const{error:j}=await V.from("properties").update(S).eq("id",r.id);if(j)throw j;De({title:"Property Updated",description:"Your property has been successfully updated."}),t("/dashboard")}catch(S){console.error("Error updating property:",S),De({title:"Error",description:S.message||"Failed to update property.",variant:"destructive"})}finally{d(!1)}}},v=(x,S)=>{m(j=>({...j,[x]:S}))};return s?a?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading property..."})]})]}):r?r.owner_id===s.id||(e==null?void 0:e.role)==="admin"?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs($,{variant:"ghost",onClick:()=>t("/dashboard"),className:"mb-4",children:[o.jsx(r0,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Edit Property"}),o.jsx("p",{className:"text-muted-foreground",children:"Update your property information"})]}),o.jsxs(K,{className:"max-w-4xl mx-auto",children:[o.jsx(ze,{children:o.jsx(He,{children:"Property Details"})}),o.jsx(te,{children:o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Title *"}),o.jsx(Z,{value:p.title,onChange:x=>v("title",x.target.value),placeholder:"Enter property title",required:!0})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description *"}),o.jsx(Zs,{value:p.description,onChange:x=>v("description",x.target.value),placeholder:"Enter property description",rows:4,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Country *"}),o.jsx(Z,{value:p.country,onChange:x=>v("country",x.target.value),placeholder:"Enter country",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"City *"}),o.jsx(Z,{value:p.city,onChange:x=>v("city",x.target.value),placeholder:"Enter city",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Price *"}),o.jsx(Z,{type:"number",value:p.price,onChange:x=>v("price",x.target.value),placeholder:"Enter price",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Type"}),o.jsx(Z,{value:p.property_type,onChange:x=>v("property_type",x.target.value),placeholder:"e.g., Apartment, House, Villa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Type Detail"}),o.jsx(Z,{value:p.property_type_detail,onChange:x=>v("property_type_detail",x.target.value),placeholder:"e.g., Luxury Villa, Studio Apartment"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bedrooms"}),o.jsx(Z,{type:"number",value:p.bedrooms,onChange:x=>v("bedrooms",x.target.value),placeholder:"Number of bedrooms"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bathrooms"}),o.jsx(Z,{type:"number",value:p.bathrooms,onChange:x=>v("bathrooms",x.target.value),placeholder:"Number of bathrooms"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Living Area (m)"}),o.jsx(Z,{type:"number",value:p.area,onChange:x=>v("area",x.target.value),placeholder:"Living area in square meters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Plot Area (m)"}),o.jsx(Z,{type:"number",value:p.plot_area,onChange:x=>v("plot_area",x.target.value),placeholder:"Plot area in square meters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Distance to City (m)"}),o.jsx(Z,{type:"number",value:p.distance_to_city,onChange:x=>v("distance_to_city",x.target.value),placeholder:"Distance to city center in meters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Distance to Sea (m)"}),o.jsx(Z,{type:"number",value:p.distance_to_sea,onChange:x=>v("distance_to_sea",x.target.value),placeholder:"Distance to sea in meters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Distance to Lake (m)"}),o.jsx(Z,{type:"number",value:p.distance_to_lake,onChange:x=>v("distance_to_lake",x.target.value),placeholder:"Distance to lake in meters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Listing Type"}),o.jsxs(bn,{value:p.listing_type,onValueChange:x=>v("listing_type",x),children:[o.jsx(Qs,{children:o.jsx(_n,{})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"sale",children:"For Sale"}),o.jsx(ce,{value:"rent",children:"For Rent"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),o.jsxs(bn,{value:p.status,onValueChange:x=>v("status",x),children:[o.jsx(Qs,{children:o.jsx(_n,{})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"draft",children:"Draft"}),o.jsx(ce,{value:"pending",children:"Pending"}),o.jsx(ce,{value:"published",children:"Published"}),o.jsx(ce,{value:"rejected",children:"Rejected"})]})]})]}),(e==null?void 0:e.role)==="admin"&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Property Owner"}),o.jsxs(bn,{value:p.owner_id,onValueChange:x=>v("owner_id",x),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Select property owner"})}),o.jsx(Js,{children:h.map(x=>o.jsxs(ce,{value:x.id,children:[x.full_name||x.email," (",x.role,")"]},x.id))})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[o.jsxs($,{type:"button",variant:"outline",onClick:()=>t("/dashboard"),disabled:c,children:[o.jsx(Ao,{className:"h-4 w-4 mr-2"}),"Cancel"]}),o.jsxs($,{type:"submit",disabled:c,children:[o.jsx(EN,{className:"h-4 w-4 mr-2"}),c?"Saving...":"Save Changes"]})]})]})})]})]})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-8",children:"You don't have permission to edit this property."}),o.jsx($,{onClick:()=>t("/dashboard"),children:"Back to Dashboard"})]})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Property Not Found"}),o.jsx("p",{className:"text-muted-foreground mb-8",children:"The property you're trying to edit doesn't exist or you don't have permission to edit it."}),o.jsx($,{onClick:()=>t("/dashboard"),children:"Back to Dashboard"})]})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Please Sign In"}),o.jsx("p",{className:"text-muted-foreground mb-8",children:"You need to be logged in to edit properties."}),o.jsx($,{onClick:()=>t("/login"),children:"Sign In"})]})]})};function oT(){const{user:s,profile:e}=Cn(),t=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="broker";return o.jsx("nav",{className:"w-full border-b bg-white",children:o.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between",children:[o.jsxs(Bo,{to:"/",className:"text-xl font-semibold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]}),o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsx(Bo,{to:"/properties",className:"text-sm hover:text-amber-600",children:"Properties"}),o.jsx(Bo,{to:"/articles",className:"text-sm hover:text-amber-600",children:"Articles"}),o.jsx(Bo,{to:"/forum",className:"text-sm hover:text-amber-600",children:"Forum"}),o.jsx(Bo,{to:"/packages",className:"text-sm hover:text-amber-600",children:"Packages"}),o.jsx(Bo,{to:"/about",className:"text-sm hover:text-amber-600",children:"About Us"}),t&&o.jsx(Bo,{to:"/panel",className:"text-sm font-medium text-amber-700 bg-amber-100 px-3 py-1 rounded-full",children:"Panel"})]})]})})}const WA=s=>s==="private_user"?"private":"broker",qA=()=>{const{user:s,profile:e}=Cn(),t=ns(),{toast:n}=Fo(),r=(e==null?void 0:e.role)==="admin",[i,a]=_.useState([]),[l,c]=_.useState([]),[d,h]=_.useState([]),[f,p]=_.useState([]),[m,y]=_.useState([]),[g,w]=_.useState(!0),[v,b]=_.useState(!1),[x,S]=_.useState(!1),[j,N]=_.useState(null),[k,P]=_.useState([]),[I,T]=_.useState([]),[M,U]=_.useState({title:"",description:"",country:"",city:"",price:"",property_type:"",status:"pending"}),[z,B]=_.useState({title:"",excerpt:"",content:"",articleType:"text",status:"draft",published_at:"",is_featured:!1}),[J,F]=_.useState(null),[W,D]=_.useState(!1);_.useEffect(()=>{if(!s){t("/login");return}e&&(r?R():O())},[s,e]),_.useEffect(()=>{e!=null&&e.id&&l.length>0&&!j&&N(e.id)},[e==null?void 0:e.id,l,j]);const R=async()=>{try{w(!0);const[{data:L,error:Y},{data:fe,error:Ge},{data:Ft,error:Ls},{data:Kn,error:Ye},{data:Zu,error:kn}]=await Promise.all([V.from("properties").select(`
          id, title, description, country, city, price, property_type,
          images, owner_id, owner_type, status, created_at, updated_at
        `).order("created_at",{ascending:!1}),V.from("profiles").select("*").order("created_at",{ascending:!1}),V.from("forum_posts").select("*, profiles ( full_name )").order("created_at",{ascending:!1}),V.from("leads").select("*").order("created_at",{ascending:!1}),V.from("articles").select(`
          *,
          author_profile:profiles!articles_author_fkey(full_name)
        `).order("created_at",{ascending:!1})]);if(Y)throw Y;if(Ge)throw Ge;if(Ls)throw Ls;if(Ye)throw Ye;if(kn)throw kn;a(L||[]),c(fe||[]),h(Ft||[]),p(Kn||[]),y(Zu||[])}catch(L){console.error("Error fetching admin data:",L),n({title:"Error",description:(L==null?void 0:L.message)||"Failed to load admin data.",variant:"destructive"})}finally{w(!1)}},O=async()=>{if(s)try{w(!0);const L=`
        id, title, description, country, city, price, property_type,
        images, videos, seller_id, seller_type, status, created_at, updated_at
      `,{data:Y,error:fe}=await V.from("properties").select(L).eq("seller_id",s.id).order("created_at",{ascending:!1});if(fe)if(console.error("Error fetching properties:",fe),fe.message.includes("column")||fe.message.includes("does not exist")){const Ft=V.from("properties").select("id, title, description, country, city, price, images, seller_type, status, created_at").eq("seller_id",s.id).order("created_at",{ascending:!1}),{data:Ls,error:Kn}=await Ft;if(Kn)throw Kn;a(Ls||[])}else throw fe;else a(Y||[]);const Ge=(Y==null?void 0:Y.map(Ft=>Ft.id))||[];if(Ge.length>0){const{data:Ft,error:Ls}=await V.from("leads").select("*").in("property_id",Ge).order("created_at",{ascending:!1});if(Ls)throw Ls;p(Ft||[])}}catch(L){n({title:"Error loading dashboard",description:L.message,variant:"destructive"})}finally{w(!1)}},H=_.useMemo(()=>l.find(L=>L.id===j)||null,[l,j]),Q=async()=>{const{title:L,description:Y,country:fe,city:Ge,price:Ft,property_type:Ls,status:Kn}=M;if(!L||!Y||!fe||!Ge||!Ft){n({title:"Missing fields",description:"Please fill in all required fields.",variant:"destructive"});return}const Ye=H||(e?{id:e.id,role:e.role}:null);if(!Ye){n({title:"No Owner Selected",description:"Please select an owner for this property.",variant:"destructive"});return}const Zu=WA(Ye.role);try{const kn={title:L,description:Y,country:fe,city:Ge,price:parseFloat(Ft),property_type:Ls||null,owner_id:Ye.id,owner_type:Zu,status:Kn},{data:kc,error:ym}=await V.from("properties").insert([kn]).select("*").single();if(ym)throw ym;if(!(kc!=null&&kc.id))throw new Error("Property creation returned no record. Please try again.");let ci=[],Xn=[];try{k.length>0&&(ci=await ha(k,`images/${Ye.id}`)),I.length>0&&(Xn=await ha(I,`videos/${Ye.id}`))}catch(Uo){console.error("Media upload failed:",Uo),n({title:"Property created, but media upload failed",description:(Uo==null?void 0:Uo.message)||"Please try adding images/videos later from your dashboard.",variant:"destructive"})}if(ci&&ci.length||Xn&&Xn.length){const{error:Uo}=await V.from("properties").update({images:ci&&ci.length?ci:null,videos:Xn&&Xn.length?Xn:null}).eq("id",kc.id);Uo&&console.error("Failed to update media URLs on property:",Uo)}n({title:"Property Created",description:"New property has been successfully created."}),b(!1),U({title:"",description:"",country:"",city:"",price:"",property_type:"",status:"pending"}),P([]),T([]),await R()}catch(kn){console.error("Error creating property:",kn),n({title:"Error",description:(kn==null?void 0:kn.message)||"Failed to create property.",variant:"destructive"})}},ae=async(L,Y)=>{try{const{error:fe}=await V.from("profiles").update({status:Y}).eq("id",L);if(fe)throw fe;n({title:"User Updated",description:`User status updated to ${Y}.`}),await R()}catch(fe){console.error("Error updating user:",fe),n({title:"Error",description:(fe==null?void 0:fe.message)||"Failed to update user.",variant:"destructive"})}},pe=async L=>{try{const{error:Y}=await V.from("properties").delete().eq("id",L);if(Y)throw Y;n({title:"Property Deleted",description:"Property has been successfully deleted."}),await R()}catch(Y){console.error("Error deleting property:",Y),n({title:"Error",description:(Y==null?void 0:Y.message)||"Failed to delete property.",variant:"destructive"})}},Ie=async()=>{const{title:L,articleType:Y,excerpt:fe,content:Ge,status:Ft,published_at:Ls,is_featured:Kn}=z;if(!L){n({title:"Missing title",description:"Please provide a title for the article.",variant:"destructive"});return}if(Y==="text"&&!Ge){n({title:"Missing content",description:"Please provide content for the text article.",variant:"destructive"});return}if(Y==="pdf"&&!J){n({title:"Missing PDF",description:"Please upload a PDF file for the PDF article.",variant:"destructive"});return}try{D(!0);const Ye={title:L,status:Ft,is_featured:Kn,author:s==null?void 0:s.id,slug:L.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").slice(0,100)};if((Y==="text"||Y==="combined")&&(fe&&(Ye.excerpt=fe),Ge&&(Ye.content=Ge)),(Y==="pdf"||Y==="combined")&&J){const kc=`${Date.now()}-${Math.random().toString(36).slice(2,8)}-${J.name}`,{data:ym,error:ci}=await V.storage.from("article-pdfs").upload(`articles/${s==null?void 0:s.id}/${kc}`,J);if(ci)throw ci;const{data:Xn}=V.storage.from("article-pdfs").getPublicUrl(ym.path);Xn!=null&&Xn.publicUrl&&(Ye.pdf_url=Xn.publicUrl,Ye.pdf_title=J.name,Ye.pdf_file_size=J.size)}Ft==="published"&&(Ls?Ye.published_at=new Date(Ls).toISOString():Ye.published_at=new Date().toISOString());const{data:Zu,error:kn}=await V.from("articles").insert([Ye]).select().single();if(kn)throw kn;await V.rpc("log_article_action",{p_article_id:Zu.id,p_action:"create"}),n({title:"Article Created",description:`New ${Y} article has been successfully created.`}),S(!1),B({title:"",excerpt:"",content:"",articleType:"text",status:"draft",published_at:"",is_featured:!1}),F(null),await R()}catch(Ye){console.error("Error creating article:",Ye),n({title:"Error",description:(Ye==null?void 0:Ye.message)||"Failed to create article.",variant:"destructive"})}finally{D(!1)}},Ee=async L=>{try{const{error:Y}=await V.from("articles").delete().eq("id",L);if(Y)throw Y;await V.rpc("log_article_action",{p_article_id:L,p_action:"delete"}),n({title:"Article Deleted",description:"Article has been successfully deleted."}),await R()}catch(Y){console.error("Error deleting article:",Y),n({title:"Error",description:(Y==null?void 0:Y.message)||"Failed to delete article.",variant:"destructive"})}},G=async(L,Y)=>{try{const fe=Y==="published"?"draft":"published",Ge={status:fe};fe==="published"?Ge.published_at=new Date().toISOString():Ge.published_at=null;const{error:Ft}=await V.from("articles").update(Ge).eq("id",L);if(Ft)throw Ft;await V.rpc("log_article_action",{p_article_id:L,p_action:fe==="published"?"publish":"unpublish"}),n({title:"Success",description:`Article ${fe==="published"?"published":"unpublished"} successfully`}),await R()}catch(fe){console.error("Error updating article:",fe),n({title:"Error",description:"Failed to update article status",variant:"destructive"})}},Te=async(L,Y)=>{try{const{error:fe}=await V.from("forum_posts").update({status:Y}).eq("id",L);if(fe)throw fe;n({title:"Post Updated",description:`Post status updated to ${Y}.`}),await R()}catch(fe){console.error("Error updating post:",fe),n({title:"Error",description:(fe==null?void 0:fe.message)||"Failed to update post.",variant:"destructive"})}},st=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),$e=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(L),Ue=L=>{const Y=Array.from(L.target.files||[]);P(fe=>[...fe,...Y].slice(0,10))},Be=L=>{const Y=Array.from(L.target.files||[]);T(fe=>[...fe,...Y].slice(0,3))},ys=L=>{P(Y=>Y.filter((fe,Ge)=>Ge!==L))},Nn=L=>{T(Y=>Y.filter((fe,Ge)=>Ge!==L))},ha=async(L,Y)=>{const fe=[];for(const Ge of L){const Ft=`${Date.now()}-${Math.random().toString(36).slice(2,8)}-${Ge.name}`,{data:Ls,error:Kn}=await V.storage.from("property-images").upload(`${Y}/${Ft}`,Ge);if(Kn)throw Kn;const{data:Ye}=V.storage.from("property-images").getPublicUrl(Ls.path);Ye!=null&&Ye.publicUrl&&fe.push(Ye.publicUrl)}return fe};return!s||e&&e.role!=="admin"?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx(K,{className:"w-96",children:o.jsxs(te,{className:"p-8 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"You need admin privileges to access this panel."}),o.jsx($,{onClick:()=>t("/login"),children:"Sign In"})]})})}):g?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(oT,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"text-center",children:"Loading admin panel..."})})]}):o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(bo,{className:"h-8 w-8 text-primary"}),o.jsxs("span",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})]}),o.jsx("h1",{className:"text-3xl font-bold mb-2",children:r?"Admin Panel":"Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r?"Complete control over properties, users, and community content":"Manage your properties and track leads"})]}),o.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-${r?"5":"4"} gap-6 mb-8`,children:[o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Properties"}),o.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),o.jsx(Xi,{className:"h-8 w-8 text-primary"})]})})}),r&&o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),o.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),o.jsx(wf,{className:"h-8 w-8 text-blue-500"})]})})}),r&&o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Articles"}),o.jsx("p",{className:"text-2xl font-bold",children:m.length})]}),o.jsx(Ws,{className:"h-8 w-8 text-purple-500"})]})})}),r&&o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Forum Posts"}),o.jsx("p",{className:"text-2xl font-bold",children:d.length})]}),o.jsx(Xh,{className:"h-8 w-8 text-green-500"})]})})}),o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Customer Leads"}),o.jsx("p",{className:"text-2xl font-bold",children:f.length})]}),o.jsx(md,{className:"h-8 w-8 text-orange-500"})]})})})]}),o.jsxs(Fy,{defaultValue:"properties",className:"space-y-6",children:[o.jsxs(pm,{className:`grid w-full grid-cols-${r?"5":"4"}`,children:[o.jsx(es,{value:"properties",children:"Properties"}),o.jsx(es,{value:"ongoing",children:"Ongoing"}),o.jsx(es,{value:"leads",children:"Leads"}),o.jsx(es,{value:"analytics",children:"Analytics"}),r&&o.jsx(es,{value:"articles",children:"Articles"}),r&&o.jsx(es,{value:"users",children:"Users"}),r&&o.jsx(es,{value:"forum",children:"Forum"})]}),o.jsx(Cs,{value:"properties",children:o.jsxs(K,{children:[o.jsxs(ze,{className:"flex flex-row items-center justify-between",children:[o.jsx(He,{children:"Property Management"}),o.jsxs($u,{open:v,onOpenChange:b,children:[o.jsx(Nv,{asChild:!0,children:o.jsxs($,{children:[o.jsx(ni,{className:"h-4 w-4 mr-2"}),"Create Property"]})}),o.jsxs(yc,{className:"max-w-2xl",children:[o.jsx(xc,{children:o.jsx(wc,{children:"Create New Property"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Owner"}),o.jsxs(bn,{value:j??void 0,onValueChange:L=>N(L),children:[o.jsx(Qs,{children:o.jsx(_n,{placeholder:"Select owner"})}),o.jsx(Js,{children:l.slice().sort((L,Y)=>L.status==="approved"&&Y.status!=="approved"?-1:1).map(L=>o.jsxs(ce,{value:L.id,children:[L.full_name,"  ",L.role," ",L.status!=="approved"?`(status: ${L.status})`:""]},L.id))})]}),H&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Owner type will be set to: ",o.jsx("span",{className:"font-medium",children:WA(H.role)})]})]}),o.jsx(Z,{placeholder:"Property title",value:M.title,onChange:L=>U({...M,title:L.target.value})}),o.jsx(Zs,{placeholder:"Property description",value:M.description,onChange:L=>U({...M,description:L.target.value})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Z,{placeholder:"Country",value:M.country,onChange:L=>U({...M,country:L.target.value})}),o.jsx(Z,{placeholder:"City",value:M.city,onChange:L=>U({...M,city:L.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Z,{type:"number",placeholder:"Price",value:M.price,onChange:L=>U({...M,price:L.target.value})}),o.jsx(Z,{placeholder:"Property type",value:M.property_type,onChange:L=>U({...M,property_type:L.target.value})})]}),o.jsxs(bn,{value:M.status,onValueChange:L=>U({...M,status:L}),children:[o.jsx(Qs,{children:o.jsx(_n,{})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"draft",children:"Draft"}),o.jsx(ce,{value:"pending",children:"Pending"}),o.jsx(ce,{value:"published",children:"Published"}),o.jsx(ce,{value:"rejected",children:"Rejected"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Property Media (Optional)"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Images (Max 10)"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Ue,className:"hidden",id:"admin-image-upload"}),o.jsxs("label",{htmlFor:"admin-image-upload",className:"cursor-pointer block w-full border-2 border-dashed border-border rounded-lg p-4 text-center hover:border-primary transition-smooth",children:[o.jsx(Zr,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload images or drag and drop"})]})]}),k.length>0&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-4",children:k.map((L,Y)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:URL.createObjectURL(L),alt:`Preview ${Y+1}`,className:"w-full h-20 object-cover rounded-lg"}),o.jsx($,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0",onClick:()=>ys(Y),children:o.jsx(Ao,{className:"h-3 w-3"})})]},Y))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Videos (Max 3)"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("input",{type:"file",accept:"video/*",multiple:!0,onChange:Be,className:"hidden",id:"admin-video-upload"}),o.jsxs("label",{htmlFor:"admin-video-upload",className:"cursor-pointer block w-full border-2 border-dashed border-border rounded-lg p-4 text-center hover:border-primary transition-smooth",children:[o.jsx(Zr,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload videos or drag and drop"})]})]}),I.length>0&&o.jsx("div",{className:"space-y-2 mt-4",children:I.map((L,Y)=>o.jsxs("div",{className:"flex items-center justify-between bg-muted p-2 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:L.name}),o.jsx($,{type:"button",variant:"destructive",size:"sm",onClick:()=>Nn(Y),children:o.jsx(Ao,{className:"h-3 w-3"})})]},Y))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx($,{variant:"outline",onClick:()=>{b(!1),P([]),T([])},children:"Cancel"}),o.jsx($,{onClick:Q,children:"Create Property"})]})]})]})]})]}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:i.map(L=>o.jsx(K,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:L.title}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:L.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[o.jsxs("span",{children:[L.city,", ",L.country]}),o.jsx("span",{children:$e(L.price)}),o.jsx("span",{children:st(L.created_at)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(be,{variant:L.status==="published"?"default":"secondary",children:L.status}),(e==null?void 0:e.role)==="admin"&&o.jsxs(o.Fragment,{children:[o.jsx($,{size:"sm",variant:"outline",onClick:()=>t(`/edit-property/${L.id}`),children:o.jsx(wv,{className:"h-4 w-4"})}),o.jsxs(kv,{children:[o.jsx(x0,{asChild:!0,children:o.jsx($,{size:"sm",variant:"destructive",children:o.jsx(bv,{className:"h-4 w-4"})})}),o.jsxs(Sf,{children:[o.jsxs(Af,{children:[o.jsx(Ef,{children:"Delete Property"}),o.jsx(Cf,{children:"Are you sure you want to delete this property? This action cannot be undone."})]}),o.jsxs(jf,{children:[o.jsx(kf,{children:"Cancel"}),o.jsx(Nf,{onClick:()=>pe(L.id),children:"Delete"})]})]})]})]})]})]})},L.id))})})]})}),o.jsx(Cs,{value:"articles",children:o.jsxs(K,{children:[o.jsxs(ze,{className:"flex flex-row items-center justify-between",children:[o.jsx(He,{children:"Article Management"}),o.jsxs($u,{open:x,onOpenChange:S,children:[o.jsx(Nv,{asChild:!0,children:o.jsxs($,{children:[o.jsx(ni,{className:"h-4 w-4 mr-2"}),"Create Article"]})}),o.jsxs(yc,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsx(xc,{children:o.jsx(wc,{children:"Create New Article"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Article Type"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("button",{type:"button",onClick:()=>B({...z,articleType:"text"}),className:`p-4 border-2 rounded-lg text-center transition-colors ${z.articleType==="text"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[o.jsx(Ws,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),o.jsx("p",{className:"font-medium",children:"Text Article"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Title + content"})]}),o.jsxs("button",{type:"button",onClick:()=>B({...z,articleType:"pdf"}),className:`p-4 border-2 rounded-lg text-center transition-colors ${z.articleType==="pdf"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[o.jsx(Zr,{className:"h-8 w-8 mx-auto mb-2 text-red-500"}),o.jsx("p",{className:"font-medium",children:"PDF Article"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload PDF file"})]}),o.jsxs("button",{type:"button",onClick:()=>B({...z,articleType:"combined"}),className:`p-4 border-2 rounded-lg text-center transition-colors ${z.articleType==="combined"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[o.jsx(ni,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),o.jsx("p",{className:"font-medium",children:"Combined"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Text + PDF"})]})]})]}),(z.articleType==="pdf"||z.articleType==="combined")&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium",children:"PDF Upload"}),o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[o.jsx(Zr,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload a PDF file for this article"}),o.jsx("input",{type:"file",accept:".pdf",onChange:L=>{var fe;const Y=(fe=L.target.files)==null?void 0:fe[0];Y&&F(Y)},className:"hidden",id:"pdf-upload"}),o.jsx("label",{htmlFor:"pdf-upload",children:o.jsx($,{variant:"outline",asChild:!0,children:o.jsx("span",{children:"Choose PDF File"})})}),J&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[o.jsx("p",{className:"text-sm font-medium",children:J.name}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[(J.size/1024/1024).toFixed(2)," MB"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(oe,{htmlFor:"article-title",children:"Title *"}),o.jsx(Z,{id:"article-title",placeholder:"Article title",value:z.title,onChange:L=>B({...z,title:L.target.value})})]}),(z.articleType==="text"||z.articleType==="combined")&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(oe,{htmlFor:"article-excerpt",children:"Excerpt (Optional)"}),o.jsx(Zs,{id:"article-excerpt",placeholder:"Brief description of the article",value:z.excerpt,onChange:L=>B({...z,excerpt:L.target.value}),rows:3})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs(oe,{htmlFor:"article-content",children:["Content ",z.articleType==="text"?"*":"(Optional)"]}),o.jsx(Zs,{id:"article-content",placeholder:"Article content (Markdown or HTML supported)",value:z.content,onChange:L=>B({...z,content:L.target.value}),rows:8})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"article-status",children:"Status"}),o.jsxs(bn,{value:z.status,onValueChange:L=>B({...z,status:L}),children:[o.jsx(Qs,{children:o.jsx(_n,{})}),o.jsxs(Js,{children:[o.jsx(ce,{value:"draft",children:"Draft"}),o.jsx(ce,{value:"published",children:"Published"}),o.jsx(ce,{value:"archived",children:"Archived"})]})]})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"published-date",children:"Published Date"}),o.jsx(Z,{id:"published-date",type:"datetime-local",value:z.published_at,onChange:L=>B({...z,published_at:L.target.value}),placeholder:"Leave empty for current time when publishing"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set custom publish date or leave empty to use current time"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"is-featured",checked:z.is_featured,onChange:L=>B({...z,is_featured:L.target.checked}),className:"rounded"}),o.jsx(oe,{htmlFor:"is-featured",children:"Featured article"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx($,{variant:"outline",onClick:()=>{S(!1),B({title:"",excerpt:"",content:"",articleType:"text",status:"draft",published_at:"",is_featured:!1}),F(null)},children:"Cancel"}),o.jsx($,{onClick:Ie,disabled:W,children:W?"Processing...":"Create Article"})]})]})]})]})]}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:m.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ws,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first article to get started"})]}):m.map(L=>{var Y;return o.jsx(K,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-lg",children:L.title}),L.is_featured&&o.jsx(be,{variant:"default",children:"Featured"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:L.excerpt}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[o.jsxs("span",{children:["By ",((Y=L.author_profile)==null?void 0:Y.full_name)||"Unknown"]}),o.jsx("span",{children:st(L.created_at)}),L.published_at&&o.jsxs("span",{children:["Published: ",st(L.published_at)]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(be,{variant:L.status==="published"?"default":"secondary",children:L.status}),o.jsx($,{size:"sm",variant:L.status==="published"?"secondary":"default",onClick:()=>G(L.id,L.status),children:L.status==="published"?"Unpublish":"Publish"}),o.jsx($,{size:"sm",variant:"outline",children:o.jsx(_o,{className:"h-4 w-4"})}),o.jsx($,{size:"sm",variant:"outline",children:o.jsx(wv,{className:"h-4 w-4"})}),o.jsxs(kv,{children:[o.jsx(x0,{asChild:!0,children:o.jsx($,{size:"sm",variant:"destructive",children:o.jsx(bv,{className:"h-4 w-4"})})}),o.jsxs(Sf,{children:[o.jsxs(Af,{children:[o.jsx(Ef,{children:"Delete Article"}),o.jsx(Cf,{children:"Are you sure you want to delete this article? This action cannot be undone."})]}),o.jsxs(jf,{children:[o.jsx(kf,{children:"Cancel"}),o.jsx(Nf,{onClick:()=>Ee(L.id),children:"Delete"})]})]})]})]})]})},L.id)})})})]})}),o.jsx(Cs,{value:"users",children:o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"User Management"})}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:l.map(L=>o.jsx(K,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:L.full_name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:L.email}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(be,{variant:"secondary",children:L.role}),o.jsx(be,{variant:L.status==="approved"?"default":"secondary",children:L.status})]})]}),o.jsxs("div",{className:"flex gap-2",children:[L.status!=="approved"&&o.jsxs($,{size:"sm",onClick:()=>ae(L.id,"approved"),children:[o.jsx(md,{className:"h-4 w-4 mr-2"}),"Approve"]}),L.status!=="rejected"&&o.jsxs($,{size:"sm",variant:"destructive",onClick:()=>ae(L.id,"rejected"),children:[o.jsx(vA,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})},L.id))})})]})}),o.jsx(Cs,{value:"forum",children:o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Forum Moderation"})}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:d.map(L=>{var Y;return o.jsx(K,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:L.title||"Forum Post"}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["By ",((Y=L.profiles)==null?void 0:Y.full_name)||"Anonymous","  ",st(L.created_at)]}),o.jsx("p",{className:"text-sm mt-2 line-clamp-3",children:L.content})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(be,{variant:L.status==="approved"?"default":"secondary",children:L.status}),L.status!=="approved"&&o.jsx($,{size:"sm",onClick:()=>Te(L.id,"approved"),children:o.jsx(md,{className:"h-4 w-4"})}),L.status!=="rejected"&&o.jsx($,{size:"sm",variant:"destructive",onClick:()=>Te(L.id,"rejected"),children:o.jsx(vA,{className:"h-4 w-4"})})]})]})},L.id)})})})]})}),o.jsx(Cs,{value:"leads",children:o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Customer Leads"})}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:f.map(L=>o.jsx(K,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:L.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:L.email}),L.phone&&o.jsx("p",{className:"text-sm text-muted-foreground",children:L.phone}),o.jsx("p",{className:"text-sm mt-2",children:L.message}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:st(L.created_at)})]}),o.jsx("div",{className:"ml-4",children:o.jsx(be,{variant:"secondary",children:L.status||"new"})})]})},L.id))})})]})})]})]})})};function OB(){const[s,e]=_.useState([]),[t,n]=_.useState(!0),{toast:r}=Fo();_.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:d,error:h}=await V.from("articles").select(`
          *,
          author_profile:profiles!articles_author_fkey(full_name)
        `).order("created_at",{ascending:!1});if(h)throw h;e(d||[])}catch(d){console.error("Error fetching articles:",d),r({title:"Error",description:"Failed to load articles",variant:"destructive"})}finally{n(!1)}},a=async(d,h)=>{var f;try{const p=h==="published"?"draft":"published",m={status:p};p==="published"&&!((f=s.find(g=>g.id===d))!=null&&f.published_at)?m.published_at=new Date().toISOString():p==="draft"&&(m.published_at=null);const{error:y}=await V.from("articles").update(m).eq("id",d);if(y)throw y;await V.rpc("log_article_action",{p_article_id:d,p_action:p==="published"?"publish":"unpublish"}),r({title:"Success",description:`Article ${p==="published"?"published":"unpublished"} successfully`}),i()}catch(p){console.error("Error updating article:",p),r({title:"Error",description:"Failed to update article status",variant:"destructive"})}},l=async d=>{try{const{error:h}=await V.from("articles").delete().eq("id",d);if(h)throw h;await V.rpc("log_article_action",{p_article_id:d,p_action:"delete"}),r({title:"Success",description:"Article deleted successfully"}),i()}catch(h){console.error("Error deleting article:",h),r({title:"Error",description:"Failed to delete article",variant:"destructive"})}},c=d=>{switch(d){case"published":return o.jsx(be,{className:"bg-green-500",children:"Published"});case"draft":return o.jsx(be,{variant:"secondary",children:"Draft"});case"archived":return o.jsx(be,{variant:"outline",children:"Archived"});default:return o.jsx(be,{variant:"secondary",children:d})}};return t?o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(bo,{className:"h-8 w-8 text-primary"}),o.jsxs("span",{className:"text-2xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Articles Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your blog articles"})]})]}),o.jsx($,{asChild:!0,children:o.jsxs(Ns,{to:"/admin/articles/new",children:[o.jsx(ni,{className:"w-4 h-4 mr-2"}),"New Article"]})})]}),s.length===0?o.jsx(K,{children:o.jsx(te,{className:"flex flex-col items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first article to get started"}),o.jsx($,{asChild:!0,children:o.jsxs(Ns,{to:"/admin/articles/new",children:[o.jsx(ni,{className:"w-4 h-4 mr-2"}),"Create Article"]})})]})})}):o.jsx("div",{className:"grid gap-4",children:s.map(d=>{var h;return o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h3",{className:"text-xl font-semibold",children:d.title}),c(d.status),d.is_featured&&o.jsx(be,{variant:"default",children:"Featured"})]}),o.jsx("p",{className:"text-muted-foreground mb-3 line-clamp-2",children:d.excerpt}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(So,{className:"w-4 h-4"}),((h=d.author_profile)==null?void 0:h.full_name)||"Unknown"]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Yi,{className:"w-4 h-4"}),d.published_at?new Date(d.published_at).toLocaleDateString():"Not published"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx($,{variant:"outline",size:"sm",asChild:!0,children:o.jsx(Ns,{to:`/articles/${d.slug}`,children:o.jsx(_o,{className:"w-4 h-4"})})}),o.jsx($,{variant:"outline",size:"sm",asChild:!0,children:o.jsx(Ns,{to:`/admin/articles/${d.id}/edit`,children:o.jsx(wv,{className:"w-4 h-4"})})}),o.jsx($,{variant:d.status==="published"?"secondary":"default",size:"sm",onClick:()=>a(d.id,d.status),children:d.status==="published"?"Unpublish":"Publish"}),o.jsxs(kv,{children:[o.jsx(x0,{asChild:!0,children:o.jsx($,{variant:"destructive",size:"sm",children:o.jsx(bv,{className:"w-4 h-4"})})}),o.jsxs(Sf,{children:[o.jsxs(Af,{children:[o.jsx(Ef,{children:"Delete Article"}),o.jsxs(Cf,{children:['Are you sure you want to delete "',d.title,'"? This action cannot be undone.']})]}),o.jsxs(jf,{children:[o.jsx(kf,{children:"Cancel"}),o.jsx(Nf,{onClick:()=>l(d.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})]})})},d.id)})})]})}var $y="Checkbox",[FB,h5]=Lo($y),[$B,p1]=FB($y);function UB(s){const{__scopeCheckbox:e,checked:t,children:n,defaultChecked:r,disabled:i,form:a,name:l,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:f}=s,[p,m]=Fu({prop:t,defaultProp:r??!1,onChange:c,caller:$y}),[y,g]=_.useState(null),[w,v]=_.useState(null),b=_.useRef(!1),x=y?!!a||!!y.closest("form"):!0,S={checked:p,disabled:i,setChecked:m,control:y,setControl:g,name:l,form:a,value:h,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:vo(r)?!1:r,isFormControl:x,bubbleInput:w,setBubbleInput:v};return o.jsx($B,{scope:e,...S,children:BB(f)?f(S):n})}var lT="CheckboxTrigger",cT=_.forwardRef(({__scopeCheckbox:s,onKeyDown:e,onClick:t,...n},r)=>{const{control:i,value:a,disabled:l,checked:c,required:d,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:y}=p1(lT,s),g=tt(r,h),w=_.useRef(c);return _.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const b=()=>f(w.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[i,f]),o.jsx(Pe.button,{type:"button",role:"checkbox","aria-checked":vo(c)?"mixed":c,"aria-required":d,"data-state":pT(c),"data-disabled":l?"":void 0,disabled:l,value:a,...n,ref:g,onKeyDown:Ne(e,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Ne(t,v=>{f(b=>vo(b)?!0:!b),y&&m&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});cT.displayName=lT;var m1=_.forwardRef((s,e)=>{const{__scopeCheckbox:t,name:n,checked:r,defaultChecked:i,required:a,disabled:l,value:c,onCheckedChange:d,form:h,...f}=s;return o.jsx(UB,{__scopeCheckbox:t,checked:r,defaultChecked:i,disabled:l,required:a,onCheckedChange:d,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:p})=>o.jsxs(o.Fragment,{children:[o.jsx(cT,{...f,ref:e,__scopeCheckbox:t}),p&&o.jsx(fT,{__scopeCheckbox:t})]})})});m1.displayName=$y;var dT="CheckboxIndicator",uT=_.forwardRef((s,e)=>{const{__scopeCheckbox:t,forceMount:n,...r}=s,i=p1(dT,t);return o.jsx(Ju,{present:n||vo(i.checked)||i.checked===!0,children:o.jsx(Pe.span,{"data-state":pT(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...s.style}})})});uT.displayName=dT;var hT="CheckboxBubbleInput",fT=_.forwardRef(({__scopeCheckbox:s,...e},t)=>{const{control:n,hasConsumerStoppedPropagationRef:r,checked:i,defaultChecked:a,required:l,disabled:c,name:d,value:h,form:f,bubbleInput:p,setBubbleInput:m}=p1(hT,s),y=tt(t,m),g=nk(i),w=qN(n);_.useEffect(()=>{const b=p;if(!b)return;const x=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(x,"checked").set,N=!r.current;if(g!==i&&j){const k=new Event("click",{bubbles:N});b.indeterminate=vo(i),j.call(b,vo(i)?!1:i),b.dispatchEvent(k)}},[p,g,i,r]);const v=_.useRef(vo(i)?!1:i);return o.jsx(Pe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??v.current,required:l,disabled:c,name:d,value:h,form:f,...e,tabIndex:-1,ref:y,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});fT.displayName=hT;function BB(s){return typeof s=="function"}function vo(s){return s==="indeterminate"}function pT(s){return vo(s)?"indeterminate":s?"checked":"unchecked"}const mT=_.forwardRef(({className:s,...e},t)=>o.jsx(m1,{ref:t,className:Se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:o.jsx(uT,{className:Se("flex items-center justify-center text-current"),children:o.jsx(U_,{className:"h-4 w-4"})})}));mT.displayName=m1.displayName;var Qh={};Qh.d=(s,e)=>{for(var t in e)Qh.o(e,t)&&!Qh.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})};Qh.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e);var me=globalThis.pdfjsLib={};Qh.d(me,{AbortException:()=>No,AnnotationEditorLayer:()=>Nb,AnnotationEditorParamsType:()=>Re,AnnotationEditorType:()=>xe,AnnotationEditorUIManager:()=>_c,AnnotationLayer:()=>Dz,AnnotationMode:()=>Ea,ColorPicker:()=>Lv,DOMSVGFactory:()=>A1,DrawLayer:()=>Tb,FeatureTest:()=>Ps,GlobalWorkerOptions:()=>Wi,ImageKind:()=>pg,InvalidPDFException:()=>b0,MissingPDFException:()=>Pf,OPS:()=>tr,OutputScale:()=>S0,PDFDataRangeTransport:()=>v2,PDFDateString:()=>w1,PDFWorker:()=>bd,PasswordResponses:()=>WB,PermissionFlag:()=>VB,PixelsPerInch:()=>ko,RenderingCancelledException:()=>y1,TextLayer:()=>Tf,TouchManager:()=>Iv,UnexpectedResponseException:()=>Pv,Util:()=>le,VerbosityLevel:()=>Uy,XfaLayer:()=>x2,build:()=>gz,createValidAbsoluteUrl:()=>XB,fetchData:()=>Vy,getDocument:()=>oz,getFilenameFromUrl:()=>r6,getPdfFilenameFromUrl:()=>i6,getXfaPageViewport:()=>a6,isDataScheme:()=>Wy,isPdfFile:()=>x1,noContextMenu:()=>Ar,normalizeUnicode:()=>t6,setLayerDimensions:()=>bc,shadow:()=>je,stopEvent:()=>vn,version:()=>mz});const ms=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gT=[1,0,0,1,0,0],w0=[.001,0,0,.001,0,0],zB=1e7,Hx=1.35,fn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ea={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},HB="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Re={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},VB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},as={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},pg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},uh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Uy={ERRORS:0,WARNINGS:1,INFOS:5},tr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},WB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let By=Uy.WARNINGS;function qB(s){Number.isInteger(s)&&(By=s)}function GB(){return By}function zy(s){By>=Uy.INFOS&&console.log(`Info: ${s}`)}function we(s){By>=Uy.WARNINGS&&console.log(`Warning: ${s}`)}function Qe(s){throw new Error(s)}function Ct(s,e){s||Qe(e)}function KB(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function XB(s,e=null,t=null){if(!s)return null;try{if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=e6(s)}catch{}}const n=e?new URL(s,e):new URL(s);if(KB(n))return n}catch{}return null}function je(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const $o=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class GA extends $o{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Vx extends $o{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class b0 extends $o{constructor(e){super(e,"InvalidPDFException")}}class Pf extends $o{constructor(e){super(e,"MissingPDFException")}}class Pv extends $o{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class YB extends $o{constructor(e){super(e,"FormatError")}}class No extends $o{constructor(e){super(e,"AbortException")}}function vT(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Qe("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=s.subarray(r,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Hy(s){typeof s!="string"&&Qe("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function QB(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function g1(s){const e=Object.create(null);for(const[t,n]of s)e[t]=n;return e}function JB(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function ZB(){try{return new Function(""),!0}catch{return!1}}class Ps{static get isLittleEndian(){return je(this,"isLittleEndian",JB())}static get isEvalSupported(){return je(this,"isEvalSupported",ZB())}static get isOffscreenCanvasSupported(){return je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return je(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?je(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):je(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return je(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Wx=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var Ji,mg,_0;class le{static makeHexColor(e,t,n){return`#${Wx[e]}${Wx[t]}${Wx[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,i]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-i*r))/2,d=l+c||1,h=l-c||1;return[Math.sqrt(d),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static bezierBoundingBox(e,t,n,r,i,a,l,c,d){return d?(d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c)):d=[Math.min(e,l),Math.min(t,c),Math.max(e,l),Math.max(t,c)],C(this,Ji,_0).call(this,e,n,i,l,t,r,a,c,3*(-e+3*(n-i)+l),6*(e-2*n+i),3*(n-e),d),C(this,Ji,_0).call(this,e,n,i,l,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),d),d}}Ji=new WeakSet,mg=function(e,t,n,r,i,a,l,c,d,h){if(d<=0||d>=1)return;const f=1-d,p=d*d,m=p*d,y=f*(f*(f*e+3*d*t)+3*p*n)+m*r,g=f*(f*(f*i+3*d*a)+3*p*l)+m*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],g)},_0=function(e,t,n,r,i,a,l,c,d,h,f,p){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&C(this,Ji,mg).call(this,e,t,n,r,i,a,l,c,-f/h,p);return}const m=h**2-4*f*d;if(m<0)return;const y=Math.sqrt(m),g=2*d;C(this,Ji,mg).call(this,e,t,n,r,i,a,l,c,(-h+y)/g,p),C(this,Ji,mg).call(this,e,t,n,r,i,a,l,c,(-h-y)/g,p)},E(le,Ji);function e6(s){return decodeURIComponent(escape(s))}let qx=null,KA=null;function t6(s){return qx||(qx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,KA=new Map([["","t"]])),s.replaceAll(qx,(e,t,n)=>t?t.normalize("NFKC"):KA.get(n))}function s6(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),vT(s)}const v1="pdfjs_internal_id_";function n6(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(vT(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});const hi="http://www.w3.org/2000/svg",Qo=class Qo{};ue(Qo,"CSS",96),ue(Qo,"PDF",72),ue(Qo,"PDF_TO_CSS_UNITS",Qo.CSS/Qo.PDF);let ko=Qo;async function Vy(s,e="text"){if(bh(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class mm{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a,n*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,p,m;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,p=0,m=1;break;case 90:h=0,f=1,p=1,m=0;break;case 270:h=0,f=-1,p=-1,m=0;break;case 0:h=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(p=-p,m=-m);let y,g,w,v;h===0?(y=Math.abs(d-e[1])*n+i,g=Math.abs(c-e[0])*n+a,w=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(y=Math.abs(c-e[0])*n+i,g=Math.abs(d-e[1])*n+a,w=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[h*n,f*n,p*n,m*n,y-h*n*c-p*n*d,g-f*n*c-m*n*d],this.width=w,this.height=v}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(r=>r*e);return je(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new mm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return le.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=le.applyTransform([e[0],e[1]],this.transform),n=le.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return le.applyInverseTransform([e,t],this.transform)}}class y1 extends $o{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Wy(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function x1(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function r6(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function i6(s,e="document.pdf"){if(typeof s!="string")return e;if(Wy(s))return we('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(s);let i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch{}return i||e}class XA{constructor(){ue(this,"started",Object.create(null));ue(this,"times",[])}time(e){e in this.started&&we(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||we(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function bh(s,e){try{const{protocol:t}=e?new URL(s,e):new URL(s);return t==="http:"||t==="https:"}catch{return!1}}function Ar(s){s.preventDefault()}function vn(s){s.preventDefault(),s.stopPropagation()}var If;class w1{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,If)||A(this,If,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,If).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(a+=h,l+=f):d==="+"&&(a-=h,l-=f),new Date(Date.UTC(n,r,i,a,l,c))}}If=new WeakMap,E(w1,If);function a6(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new mm({viewBox:i,userUnit:1,scale:e,rotation:t})}function b1(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(we(`Not a valid color format: "${s}"`),[0,0,0])}function o6(s){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,b1(n))}e.remove()}function lt(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform();return[e,t,n,r,i,a]}function kr(s){const{a:e,b:t,c:n,d:r,e:i,f:a}=s.getTransform().invertSelf();return[e,t,n,r,i,a]}function bc(s,e,t=!1,n=!0){if(e instanceof mm){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=s,l=Ps.isCSSRoundSupported,c=`var(--scale-factor) * ${r}px`,d=`var(--scale-factor) * ${i}px`,h=l?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,f=l?`round(down, ${d}, var(--scale-round-y, 1px))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}n&&s.setAttribute("data-main-rotation",e.rotation)}class S0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ca,sl,sr,nl,Mf,Lf,Fv,yT,Ts,xT,wT,gg,bT,j0;const vi=class vi{constructor(e){E(this,Ts);E(this,Ca,null);E(this,sl,null);E(this,sr);E(this,nl,null);E(this,Mf,null);A(this,sr,e),u(vi,Lf)||A(vi,Lf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=A(this,Ca,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,sr)._uiManager._signal;e.addEventListener("contextmenu",Ar,{signal:t}),e.addEventListener("pointerdown",C(vi,Fv,yT),{signal:t});const n=A(this,nl,document.createElement("div"));n.className="buttons",e.append(n);const r=u(this,sr).toolbarPosition;if(r){const{style:i}=e,a=u(this,sr)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,Ts,bT).call(this),e}get div(){return u(this,Ca)}hide(){var e;u(this,Ca).classList.add("hidden"),(e=u(this,sl))==null||e.hideDropdown()}show(){var e;u(this,Ca).classList.remove("hidden"),(e=u(this,Mf))==null||e.shown()}async addAltText(e){const t=await e.render();C(this,Ts,gg).call(this,t),u(this,nl).prepend(t,u(this,Ts,j0)),A(this,Mf,e)}addColorPicker(e){A(this,sl,e);const t=e.renderButton();C(this,Ts,gg).call(this,t),u(this,nl).prepend(t,u(this,Ts,j0))}remove(){var e;u(this,Ca).remove(),(e=u(this,sl))==null||e.destroy(),A(this,sl,null)}};Ca=new WeakMap,sl=new WeakMap,sr=new WeakMap,nl=new WeakMap,Mf=new WeakMap,Lf=new WeakMap,Fv=new WeakSet,yT=function(e){e.stopPropagation()},Ts=new WeakSet,xT=function(e){u(this,sr)._focusEventsAllowed=!1,vn(e)},wT=function(e){u(this,sr)._focusEventsAllowed=!0,vn(e)},gg=function(e){const t=u(this,sr)._uiManager._signal;e.addEventListener("focusin",C(this,Ts,xT).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,Ts,wT).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ar,{signal:t})},bT=function(){const{editorType:e,_uiManager:t}=u(this,sr),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(vi,Lf)[e]),C(this,Ts,gg).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,nl).append(n)},j0=function(){const e=document.createElement("div");return e.className="divider",e},E(vi,Fv),E(vi,Lf,null);let A0=vi;var Df,rl,il,Po,_T,ST,AT;class l6{constructor(e){E(this,Po);E(this,Df,null);E(this,rl,null);E(this,il);A(this,il,e)}show(e,t,n){const[r,i]=C(this,Po,ST).call(this,t,n),{style:a}=u(this,rl)||A(this,rl,C(this,Po,_T).call(this));e.append(u(this,rl)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,rl).remove()}}Df=new WeakMap,rl=new WeakMap,il=new WeakMap,Po=new WeakSet,_T=function(){const e=A(this,rl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ar,{signal:u(this,il)._signal});const t=A(this,Df,document.createElement("div"));return t.className="buttons",e.append(t),C(this,Po,AT).call(this),e},ST=function(e,t){let n=0,r=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const l=i.x+(t?i.width:0);if(a>n){r=l,n=a;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,n]},AT=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,il)._signal;e.addEventListener("contextmenu",Ar,{signal:n}),e.addEventListener("click",()=>{u(this,il).highlightSelection("floating_button")},{signal:n}),u(this,Df).append(e)};function Tv(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var $v;class c6{constructor(){E(this,$v,0)}get id(){return`${HB}${xs(this,$v)._++}`}}$v=new WeakMap;var _d,Of,cs,Sd,vg;const E1=class E1{constructor(){E(this,Sd);E(this,_d,s6());E(this,Of,0);E(this,cs,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return je(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return C(this,Sd,vg).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return C(this,Sd,vg).call(this,e,e)}async getFromBlob(e,t){const n=await t;return C(this,Sd,vg).call(this,e,n)}async getFromId(e){u(this,cs)||A(this,cs,new Map);const t=u(this,cs).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,cs)||A(this,cs,new Map);let n=u(this,cs).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${u(this,_d)}_${xs(this,Of)._++}`,refCounter:1,isSvg:!1},u(this,cs).set(e,n),u(this,cs).set(n.id,n),n}getSvgUrl(e){const t=u(this,cs).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,cs)||A(this,cs,new Map);const t=u(this,cs).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,_d)}_`)}};_d=new WeakMap,Of=new WeakMap,cs=new WeakMap,Sd=new WeakSet,vg=async function(e,t){u(this,cs)||A(this,cs,new Map);let n=u(this,cs).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,_d)}_${xs(this,Of)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await Vy(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=E1._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},a.onload=async()=>{const f=n.svgUrl=a.result;l.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=a.onerror=h});a.readAsDataURL(r),await c}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){we(r),n=null}return u(this,cs).set(e,n),n&&u(this,cs).set(n.id,n),n};let E0=E1;var bt,Na,Ff,ut;class d6{constructor(e=128){E(this,bt,[]);E(this,Na,!1);E(this,Ff);E(this,ut,-1);A(this,Ff,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),u(this,Na))return;const c={cmd:e,undo:t,post:n,type:i};if(u(this,ut)===-1){u(this,bt).length>0&&(u(this,bt).length=0),A(this,ut,0),u(this,bt).push(c);return}if(a&&u(this,bt)[u(this,ut)].type===i){l&&(c.undo=u(this,bt)[u(this,ut)].undo),u(this,bt)[u(this,ut)]=c;return}const d=u(this,ut)+1;d===u(this,Ff)?u(this,bt).splice(0,1):(A(this,ut,d),d<u(this,bt).length&&u(this,bt).splice(d)),u(this,bt).push(c)}undo(){if(u(this,ut)===-1)return;A(this,Na,!0);const{undo:e,post:t}=u(this,bt)[u(this,ut)];e(),t==null||t(),A(this,Na,!1),A(this,ut,u(this,ut)-1)}redo(){if(u(this,ut)<u(this,bt).length-1){A(this,ut,u(this,ut)+1),A(this,Na,!0);const{cmd:e,post:t}=u(this,bt)[u(this,ut)];e(),t==null||t(),A(this,Na,!1)}}hasSomethingToUndo(){return u(this,ut)!==-1}hasSomethingToRedo(){return u(this,ut)<u(this,bt).length-1}cleanType(e){if(u(this,ut)!==-1){for(let t=u(this,ut);t>=0;t--)if(u(this,bt)[t].type!==e){u(this,bt).splice(t+1,u(this,ut)-t),A(this,ut,t);return}u(this,bt).length=0,A(this,ut,-1)}}destroy(){A(this,bt,null)}}bt=new WeakMap,Na=new WeakMap,Ff=new WeakMap,ut=new WeakMap;var Uv,jT;class gm{constructor(e){E(this,Uv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ps.platform;for(const[n,r,i={}]of e)for(const a of n){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(C(this,Uv,jT).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:l=null}}=n;l&&!l(e,t)||(r.bind(e,...a,t)(),i||vn(t))}}Uv=new WeakSet,jT=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Bv=class Bv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return o6(e),je(this,"_colors",e)}convert(e){const t=b1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,a)=>i===t[a]))return Bv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?le.makeHexColor(...t):e}};ue(Bv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let C0=Bv;var Ad,en,Rt,Gt,jd,wi,Ed,Tn,ka,al,Cd,ol,Mr,nr,ll,$f,Uf,Nd,Bf,Lr,Pa,kd,Ta,Dr,zv,Ra,zf,Ia,cl,Hf,Vf,$t,Ve,bi,dl,Wf,qf,Ma,Or,_i,Gf,Rn,X,yg,N0,ET,CT,xg,NT,kT,PT,k0,TT,P0,T0,RT,bs,fi,IT,MT,R0,LT,_h,I0;const ad=class ad{constructor(e,t,n,r,i,a,l,c,d,h,f,p,m){E(this,X);E(this,Ad,new AbortController);E(this,en,null);E(this,Rt,new Map);E(this,Gt,new Map);E(this,jd,null);E(this,wi,null);E(this,Ed,null);E(this,Tn,new d6);E(this,ka,null);E(this,al,null);E(this,Cd,0);E(this,ol,new Set);E(this,Mr,null);E(this,nr,null);E(this,ll,new Set);ue(this,"_editorUndoBar",null);E(this,$f,!1);E(this,Uf,!1);E(this,Nd,!1);E(this,Bf,null);E(this,Lr,null);E(this,Pa,null);E(this,kd,null);E(this,Ta,!1);E(this,Dr,null);E(this,zv,new c6);E(this,Ra,!1);E(this,zf,!1);E(this,Ia,null);E(this,cl,null);E(this,Hf,null);E(this,Vf,null);E(this,$t,xe.NONE);E(this,Ve,new Set);E(this,bi,null);E(this,dl,null);E(this,Wf,null);E(this,qf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Ma,[0,0]);E(this,Or,null);E(this,_i,null);E(this,Gf,null);E(this,Rn,null);const y=this._signal=u(this,Ad).signal;A(this,_i,e),A(this,Gf,t),A(this,jd,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:y}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),r._on("setpreference",this.onSetPreference.bind(this),{signal:y}),r._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:y}),C(this,X,NT).call(this),C(this,X,RT).call(this),C(this,X,k0).call(this),A(this,wi,i.annotationStorage),A(this,Bf,i.filterFactory),A(this,dl,a),A(this,kd,l||null),A(this,$f,c),A(this,Uf,d),A(this,Nd,h),A(this,Vf,f||null),this.viewParameters={realScale:ko.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=p||null,this._supportsPinchToZoom=m!==!1}static get _keyboardManager(){const e=ad.prototype,t=a=>u(a,_i).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return je(this,"_keyboardManager",new gm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&u(a,_i).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&u(a,_i).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i;(e=u(this,Rn))==null||e.resolve(),A(this,Rn,null),(t=u(this,Ad))==null||t.abort(),A(this,Ad,null),this._signal=null;for(const a of u(this,Gt).values())a.destroy();u(this,Gt).clear(),u(this,Rt).clear(),u(this,ll).clear(),A(this,en,null),u(this,Ve).clear(),u(this,Tn).destroy(),(n=u(this,jd))==null||n.destroy(),(r=u(this,Dr))==null||r.hide(),A(this,Dr,null),u(this,Lr)&&(clearTimeout(u(this,Lr)),A(this,Lr,null)),u(this,Or)&&(clearTimeout(u(this,Or)),A(this,Or,null)),(i=this._editorUndoBar)==null||i.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Vf)}get useNewAltTextFlow(){return u(this,Uf)}get useNewAltTextWhenAddingImage(){return u(this,Nd)}get hcmFilter(){return je(this,"hcmFilter",u(this,dl)?u(this,Bf).addHCMFilter(u(this,dl).foreground,u(this,dl).background):"none")}get direction(){return je(this,"direction",getComputedStyle(u(this,_i)).direction)}get highlightColors(){return je(this,"highlightColors",u(this,kd)?new Map(u(this,kd).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return je(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,al,e)}setMainHighlightColorPicker(e){A(this,Hf,e)}editAltText(e,t=!1){var n;(n=u(this,jd))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,Nd,t);break}}onPageChanging({pageNumber:e}){A(this,Cd,e-1)}focusMainContainer(){u(this,_i).focus()}findParent(e,t){for(const n of u(this,Gt).values()){const{x:r,y:i,width:a,height:l}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+l)return n}return null}disableUserSelect(e=!1){u(this,Gf).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,ll).add(e)}removeShouldRescale(e){u(this,ll).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*ko.PDF_TO_CSS_UNITS;for(const n of u(this,ll))n.onScaleChanging();(t=u(this,al))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}=t,l=t.toString(),d=C(this,X,yg).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;t.empty();const f=C(this,X,N0).call(this,d),p=u(this,$t)===xe.NONE,m=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a,text:l}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(xe.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,wi)&&!u(this,wi).has(e.id)&&u(this,wi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,Ta)&&(A(this,Ta,!1),C(this,X,xg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Ve))if(t.div.contains(e)){A(this,cl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,cl))return;const[e,t]=u(this,cl);A(this,cl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,X,k0).call(this),C(this,X,P0).call(this)}removeEditListeners(){C(this,X,TT).call(this),C(this,X,T0).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,nr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,nr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,en))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,Ve)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of u(this,nr))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){we(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of n){const d=await r.deserialize(c);if(!d)return;i.push(d)}const a=()=>{for(const c of i)C(this,X,R0).call(this,c);C(this,X,I0).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){we(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,$t)!==xe.NONE&&!this.isEditorHandlingKeyboard&&ad._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Ta)&&(A(this,Ta,!1),C(this,X,xg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(C(this,X,kT).call(this),C(this,X,P0).call(this),C(this,X,bs).call(this,{isEditing:u(this,$t)!==xe.NONE,isEmpty:C(this,X,_h).call(this),hasSomethingToUndo:u(this,Tn).hasSomethingToUndo(),hasSomethingToRedo:u(this,Tn).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,X,PT).call(this),C(this,X,T0).call(this),C(this,X,bs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,nr)){A(this,nr,e);for(const t of u(this,nr))C(this,X,fi).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,zv).id}get currentLayer(){return u(this,Gt).get(u(this,Cd))}getLayer(e){return u(this,Gt).get(e)}get currentPageIndex(){return u(this,Cd)}addLayer(e){u(this,Gt).set(e.pageIndex,e),u(this,Ra)?e.enable():e.disable()}removeLayer(e){u(this,Gt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var r;if(u(this,$t)!==e&&!(u(this,Rn)&&(await u(this,Rn).promise,!u(this,Rn)))){if(A(this,Rn,Promise.withResolvers()),A(this,$t,e),e===xe.NONE){this.setEditingState(!1),C(this,X,MT).call(this),(r=this._editorUndoBar)==null||r.hide(),u(this,Rn).resolve();return}this.setEditingState(!0),await C(this,X,IT).call(this),this.unselectAll();for(const i of u(this,Gt).values())i.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,Rn).resolve();return}for(const i of u(this,Rt).values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();u(this,Rn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,$t)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(u(this,nr)){switch(e){case Re.CREATE:this.currentLayer.addNewEditor();return;case Re.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Hf))==null||n.updateColor(t);break;case Re.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Wf)||A(this,Wf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of u(this,Ve))r.updateParams(e,t);for(const r of u(this,nr))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of u(this,Rt).values())a.editorType===e&&a.show(t);(((i=u(this,Wf))==null?void 0:i.get(Re.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,X,fi).call(this,[[Re.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,zf)!==e){A(this,zf,e);for(const t of u(this,Gt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,Rt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,Rt).get(e)}addEditor(e){u(this,Rt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,Lr)&&clearTimeout(u(this,Lr)),A(this,Lr,setTimeout(()=>{this.focusMainContainer(),A(this,Lr,null)},0))),u(this,Rt).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,ol).has(e.annotationElementId))&&((t=u(this,wi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,ol).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,ol).has(e)}removeDeletedAnnotationElement(e){u(this,ol).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,en)!==e&&(A(this,en,e),e&&C(this,X,fi).call(this,e.propertiesToUpdate))}updateUI(e){u(this,X,LT)===e&&C(this,X,fi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,X,fi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Ve).has(e)){u(this,Ve).delete(e),e.unselect(),C(this,X,bs).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Ve).add(e),e.select(),C(this,X,fi).call(this,e.propertiesToUpdate),C(this,X,bs).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=u(this,al))==null||t.commitOrRemove();for(const n of u(this,Ve))n!==e&&n.unselect();u(this,Ve).clear(),u(this,Ve).add(e),e.select(),C(this,X,fi).call(this,e.propertiesToUpdate),C(this,X,bs).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Ve).has(e)}get firstSelectedEditor(){return u(this,Ve).values().next().value}unselect(e){e.unselect(),u(this,Ve).delete(e),C(this,X,bs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Ve).size!==0}get isEnterHandled(){return u(this,Ve).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Tn).undo(),C(this,X,bs).call(this,{hasSomethingToUndo:u(this,Tn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,X,_h).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Tn).redo(),C(this,X,bs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Tn).hasSomethingToRedo(),isEmpty:C(this,X,_h).call(this)})}addCommands(e){u(this,Tn).add(e),C(this,X,bs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,X,_h).call(this)})}cleanUndoStack(e){u(this,Tn).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Ve)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const a of t)C(this,X,R0).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,en))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,en)||this.hasSelection}selectAll(){for(const e of u(this,Ve))e.commit();C(this,X,I0).call(this,u(this,Rt).values())}unselectAll(){var e;if(!(u(this,en)&&(u(this,en).commitOrRemove(),u(this,$t)!==xe.NONE))&&!((e=u(this,al))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Ve))t.unselect();u(this,Ve).clear(),C(this,X,bs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Ma)[0]+=e,u(this,Ma)[1]+=t;const[r,i]=u(this,Ma),a=[...u(this,Ve)],l=1e3;u(this,Or)&&clearTimeout(u(this,Or)),A(this,Or,setTimeout(()=>{A(this,Or,null),u(this,Ma)[0]=u(this,Ma)[1]=0,this.addCommands({cmd:()=>{for(const c of a)u(this,Rt).has(c.id)&&c.translateInPage(r,i)},undo:()=>{for(const c of a)u(this,Rt).has(c.id)&&c.translateInPage(-r,-i)},mustExec:!1})},l));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Mr,new Map);for(const e of u(this,Ve))u(this,Mr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Mr))return!1;this.disableUserSelect(!1);const e=u(this,Mr);A(this,Mr,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},l]of e)l.newX=r,l.newY=i,l.newPageIndex=a,t||(t=r!==l.savedX||i!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const n=(r,i,a,l)=>{if(u(this,Rt).has(r.id)){const c=u(this,Gt).get(l);c?r._setParentAndPosition(c,i,a):(r.pageIndex=l,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:l}]of e)n(r,i,a,l)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:l}]of e)n(r,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Mr))for(const n of u(this,Mr).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Ve).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,en)===e}getActive(){return u(this,en)}getMode(){return u(this,$t)}get imageManager(){return je(this,"imageManager",new E0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,f,p)=>({x:(h-r)/a,y:1-(d+f-n)/i,width:p/a,height:f/i});break;case"180":l=(d,h,f,p)=>({x:1-(d+f-n)/i,y:1-(h+p-r)/a,width:f/i,height:p/a});break;case"270":l=(d,h,f,p)=>({x:1-(h+p-r)/a,y:(d-n)/i,width:p/a,height:f/i});break;default:l=(d,h,f,p)=>({x:(d-n)/i,y:(h-r)/a,width:f/i,height:p/a});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:p,y:m,width:y,height:g}of f.getClientRects())y===0||g===0||c.push(l(p,m,y,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Ed)||A(this,Ed,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Ed))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,Ed))==null?void 0:r.get(e.data.id);if(!t)return;const n=u(this,wi).getRawValue(t);n&&(u(this,$t)===xe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Ad=new WeakMap,en=new WeakMap,Rt=new WeakMap,Gt=new WeakMap,jd=new WeakMap,wi=new WeakMap,Ed=new WeakMap,Tn=new WeakMap,ka=new WeakMap,al=new WeakMap,Cd=new WeakMap,ol=new WeakMap,Mr=new WeakMap,nr=new WeakMap,ll=new WeakMap,$f=new WeakMap,Uf=new WeakMap,Nd=new WeakMap,Bf=new WeakMap,Lr=new WeakMap,Pa=new WeakMap,kd=new WeakMap,Ta=new WeakMap,Dr=new WeakMap,zv=new WeakMap,Ra=new WeakMap,zf=new WeakMap,Ia=new WeakMap,cl=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,$t=new WeakMap,Ve=new WeakMap,bi=new WeakMap,dl=new WeakMap,Wf=new WeakMap,qf=new WeakMap,Ma=new WeakMap,Or=new WeakMap,_i=new WeakMap,Gf=new WeakMap,Rn=new WeakMap,X=new WeakSet,yg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},N0=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,Gt).values())if(n.hasTextLayer(e))return n;return null},ET=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=C(this,X,yg).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(u(this,Dr)||A(this,Dr,new l6(this)),u(this,Dr).show(n,r,this.direction==="ltr"))},CT=function(){var i,a,l;const e=document.getSelection();if(!e||e.isCollapsed){u(this,bi)&&((i=u(this,Dr))==null||i.hide(),A(this,bi,null),C(this,X,bs).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,bi))return;const r=C(this,X,yg).call(this,e).closest(".textLayer");if(!r){u(this,bi)&&((a=u(this,Dr))==null||a.hide(),A(this,bi,null),C(this,X,bs).call(this,{hasSelectedText:!1}));return}if((l=u(this,Dr))==null||l.hide(),A(this,bi,t),C(this,X,bs).call(this,{hasSelectedText:!0}),!(u(this,$t)!==xe.HIGHLIGHT&&u(this,$t)!==xe.NONE)&&(u(this,$t)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Ta,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,$t)===xe.HIGHLIGHT?C(this,X,N0).call(this,r):null;c==null||c.toggleDrawing();const d=new AbortController,h=this.combinedSignal(d),f=p=>{p.type==="pointerup"&&p.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&C(this,X,xg).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},xg=function(e=""){u(this,$t)===xe.HIGHLIGHT?this.highlightSelection(e):u(this,$f)&&C(this,X,ET).call(this)},NT=function(){document.addEventListener("selectionchange",C(this,X,CT).bind(this),{signal:this._signal})},kT=function(){if(u(this,Pa))return;A(this,Pa,new AbortController);const e=this.combinedSignal(u(this,Pa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},PT=function(){var e;(e=u(this,Pa))==null||e.abort(),A(this,Pa,null)},k0=function(){if(u(this,Ia))return;A(this,Ia,new AbortController);const e=this.combinedSignal(u(this,Ia));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},TT=function(){var e;(e=u(this,Ia))==null||e.abort(),A(this,Ia,null)},P0=function(){if(u(this,ka))return;A(this,ka,new AbortController);const e=this.combinedSignal(u(this,ka));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},T0=function(){var e;(e=u(this,ka))==null||e.abort(),A(this,ka,null)},RT=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},bs=function(e){Object.entries(e).some(([n,r])=>u(this,qf)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,qf),e)}),u(this,$t)===xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,X,fi).call(this,[[Re.HIGHLIGHT_FREE,!0]]))},fi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},IT=async function(){if(!u(this,Ra)){A(this,Ra,!0);const e=[];for(const t of u(this,Gt).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Rt).values())t.enable()}},MT=function(){if(this.unselectAll(),u(this,Ra)){A(this,Ra,!1);for(const e of u(this,Gt).values())e.disable();for(const e of u(this,Rt).values())e.disable()}},R0=function(e){const t=u(this,Gt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},LT=function(){let e=null;for(e of u(this,Ve));return e},_h=function(){if(u(this,Rt).size===0)return!0;if(u(this,Rt).size===1)for(const e of u(this,Rt).values())return e.isEmpty();return!1},I0=function(e){for(const t of u(this,Ve))t.unselect();u(this,Ve).clear();for(const t of e)t.isEmpty()||(u(this,Ve).add(t),t.select());C(this,X,bs).call(this,{hasSelectedEditor:this.hasSelection})},ue(ad,"TRANSLATE_SMALL",1),ue(ad,"TRANSLATE_BIG",10);let _c=ad;var Ut,Fr,rr,Pd,$r,tn,Td,Ur,$s,Si,ul,Br,La,vr,Sh,wg;const _s=class _s{constructor(e){E(this,vr);E(this,Ut,null);E(this,Fr,!1);E(this,rr,null);E(this,Pd,null);E(this,$r,null);E(this,tn,null);E(this,Td,!1);E(this,Ur,null);E(this,$s,null);E(this,Si,null);E(this,ul,null);E(this,Br,!1);A(this,$s,e),A(this,Br,e._uiManager.useNewAltTextFlow),u(_s,La)||A(_s,La,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){_s._l10n??(_s._l10n=e)}async render(){const e=A(this,rr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,Pd,document.createElement("span"));e.append(t),u(this,Br)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(_s,La).missing),t.setAttribute("data-l10n-id",u(_s,La)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,$s)._uiManager._signal;e.addEventListener("contextmenu",Ar,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),u(this,$s)._uiManager.editAltText(u(this,$s)),u(this,Br)&&u(this,$s)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,vr,Sh)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(A(this,Td,!0),r(i))},{signal:n}),await C(this,vr,wg).call(this),e}finish(){u(this,rr)&&(u(this,rr).focus({focusVisible:u(this,Td)}),A(this,Td,!1))}isEmpty(){return u(this,Br)?u(this,Ut)===null:!u(this,Ut)&&!u(this,Fr)}hasData(){return u(this,Br)?u(this,Ut)!==null||!!u(this,Si):this.isEmpty()}get guessedText(){return u(this,Si)}async setGuessedText(e){u(this,Ut)===null&&(A(this,Si,e),A(this,ul,await _s._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,vr,wg).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Br)||u(this,Ut)){(t=u(this,Ur))==null||t.remove(),A(this,Ur,null);return}if(!u(this,Ur)){const n=A(this,Ur,document.createElement("div"));n.className="noAltTextBadge",u(this,$s).div.append(n)}u(this,Ur).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Ut);return!e&&u(this,Si)===t&&(t=u(this,ul)),{altText:t,decorative:u(this,Fr),guessedText:u(this,Si),textWithDisclaimer:u(this,ul)}}get data(){return{altText:u(this,Ut),decorative:u(this,Fr)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(A(this,Si,n),A(this,ul,r)),!(u(this,Ut)===e&&u(this,Fr)===t)&&(i||(A(this,Ut,e),A(this,Fr,t)),C(this,vr,wg).call(this))}toggle(e=!1){u(this,rr)&&(!e&&u(this,tn)&&(clearTimeout(u(this,tn)),A(this,tn,null)),u(this,rr).disabled=!e)}shown(){u(this,$s)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,vr,Sh)}})}destroy(){var e,t;(e=u(this,rr))==null||e.remove(),A(this,rr,null),A(this,Pd,null),A(this,$r,null),(t=u(this,Ur))==null||t.remove(),A(this,Ur,null)}};Ut=new WeakMap,Fr=new WeakMap,rr=new WeakMap,Pd=new WeakMap,$r=new WeakMap,tn=new WeakMap,Td=new WeakMap,Ur=new WeakMap,$s=new WeakMap,Si=new WeakMap,ul=new WeakMap,Br=new WeakMap,La=new WeakMap,vr=new WeakSet,Sh=function(){return u(this,Ut)&&"added"||u(this,Ut)===null&&this.guessedText&&"review"||"missing"},wg=async function(){var r,i,a;const e=u(this,rr);if(!e)return;if(u(this,Br)){if(e.classList.toggle("done",!!u(this,Ut)),e.setAttribute("data-l10n-id",u(_s,La)[u(this,vr,Sh)]),(r=u(this,Pd))==null||r.setAttribute("data-l10n-id",u(_s,La)[`${u(this,vr,Sh)}-label`]),!u(this,Ut)){(i=u(this,$r))==null||i.remove();return}}else{if(!u(this,Ut)&&!u(this,Fr)){e.classList.remove("done"),(a=u(this,$r))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,$r);if(!t){A(this,$r,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,$s).id}`;const l=100,c=u(this,$s)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,tn)),A(this,tn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,tn,setTimeout(()=>{A(this,tn,null),u(this,$r).classList.add("show"),u(this,$s)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;u(this,tn)&&(clearTimeout(u(this,tn)),A(this,tn,null)),(d=u(this,$r))==null||d.classList.remove("show")},{signal:c})}u(this,Fr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Ut)),t.parentNode||e.append(t);const n=u(this,$s).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},E(_s,La,null),ue(_s,"_l10n",null);let Rv=_s;var Kf,hl,Xf,Yf,Qf,Jf,Zf,Rd,Ai,fl,Da,aa,DT,OT,M0;const C1=class C1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:l}){E(this,aa);E(this,Kf);E(this,hl,!1);E(this,Xf,null);E(this,Yf);E(this,Qf);E(this,Jf);E(this,Zf);E(this,Rd);E(this,Ai,null);E(this,fl);E(this,Da,null);A(this,Kf,e),A(this,Xf,n),A(this,Yf,t),A(this,Qf,r),A(this,Jf,i),A(this,Zf,a),A(this,fl,new AbortController),A(this,Rd,AbortSignal.any([l,u(this,fl).signal])),e.addEventListener("touchstart",C(this,aa,DT).bind(this),{passive:!1,signal:u(this,Rd)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return je(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=u(this,fl))==null||e.abort(),A(this,fl,null)}};Kf=new WeakMap,hl=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Rd=new WeakMap,Ai=new WeakMap,fl=new WeakMap,Da=new WeakMap,aa=new WeakSet,DT=function(e){var r,i,a;if((r=u(this,Yf))!=null&&r.call(this)||e.touches.length<2)return;if(!u(this,Da)){A(this,Da,new AbortController);const l=AbortSignal.any([u(this,Rd),u(this,Da).signal]),c=u(this,Kf),d={signal:l,passive:!1};c.addEventListener("touchmove",C(this,aa,OT).bind(this),d),c.addEventListener("touchend",C(this,aa,M0).bind(this),d),c.addEventListener("touchcancel",C(this,aa,M0).bind(this),d),(i=u(this,Qf))==null||i.call(this)}if(vn(e),e.touches.length!==2||(a=u(this,Xf))!=null&&a.call(this)){A(this,Ai,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),A(this,Ai,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},OT=function(e){var S;if(!u(this,Ai)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:l}=n,c=u(this,Ai),{touch0X:d,touch0Y:h,touch1X:f,touch1Y:p}=c,m=f-d,y=p-h,g=a-r,w=l-i,v=Math.hypot(g,w)||1,b=Math.hypot(m,y)||1;if(!u(this,hl)&&Math.abs(b-v)<=C1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=a,c.touch1Y=l,e.preventDefault(),!u(this,hl)){A(this,hl,!0);return}const x=[(r+a)/2,(i+l)/2];(S=u(this,Jf))==null||S.call(this,x,b,v)},M0=function(e){var t;u(this,Da).abort(),A(this,Da,null),(t=u(this,Zf))==null||t.call(this),u(this,Ai)&&(e.preventDefault(),A(this,Ai,null),A(this,hl,!1))};let Iv=C1;var pl,ir,it,Id,Oa,ep,ml,Kt,gl,ji,Fa,tp,vl,sn,sp,yl,Ei,zr,Md,Ld,In,xl,np,Hv,he,L0,rp,D0,bg,FT,$T,O0,_g,F0,UT,BT,zT,$0,HT,U0,VT,WT,qT,B0,Ah;const _e=class _e{constructor(e){E(this,he);E(this,pl,null);E(this,ir,null);E(this,it,null);E(this,Id,!1);E(this,Oa,null);E(this,ep,"");E(this,ml,!1);E(this,Kt,null);E(this,gl,null);E(this,ji,null);E(this,Fa,null);E(this,tp,"");E(this,vl,!1);E(this,sn,null);E(this,sp,!1);E(this,yl,!1);E(this,Ei,!1);E(this,zr,null);E(this,Md,0);E(this,Ld,0);E(this,In,null);E(this,xl,null);ue(this,"_editToolbar",null);ue(this,"_initialOptions",Object.create(null));ue(this,"_initialData",null);ue(this,"_isVisible",!0);ue(this,"_uiManager",null);ue(this,"_focusEventsAllowed",!0);E(this,np,!1);E(this,Hv,_e._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=_e.prototype._resizeWithKeyboard,t=_c.TRANSLATE_SMALL,n=_c.TRANSLATE_BIG;return je(this,"_resizerKeyboardManager",new gm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],_e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return je(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new u6({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(_e._l10n??(_e._l10n=e),_e._l10nResizer||(_e._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),_e._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);_e._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Qe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,np)}set _isDraggable(e){var t;A(this,np,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Hv)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):C(this,he,Ah).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,vl)?A(this,vl,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){C(this,he,L0).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,sn)||A(this,sn,[this.x,this.y,this.width,this.height]),C(this,he,L0).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,sn)||A(this,sn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d;const{style:h}=n;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,sn)&&(u(this,sn)[0]!==this.x||u(this,sn)[1]!==this.y)}get _hasBeenResized(){return!!u(this,sn)&&(u(this,sn)[2]!==this.width||u(this,sn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=_e,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:a,width:l,height:c}=this;if(l*=n,c*=r,i*=n,a*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(n-l,i)),a=Math.max(0,Math.min(r-c,a));break;case 90:i=Math.max(0,Math.min(n-c,i)),a=Math.min(r,Math.max(l,a));break;case 180:i=Math.min(n,Math.max(l,i)),a=Math.min(r,Math.max(c,a));break;case 270:i=Math.min(n,Math.max(c,i)),a=Math.max(0,Math.min(r-l,a));break}this.x=i/=n,this.y=a/=r;const[d,h]=this.getBaseTranslation();i+=d,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return C(n=_e,rp,D0).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return C(n=_e,rp,D0).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/n).toFixed(2)}%`,u(this,ml)||(i.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!u(this,ml)&&t.endsWith("%");if(r&&i)return;const[a,l]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!u(this,ml)&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,it))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,yl)?this._editToolbar:(this._editToolbar=new A0(this),this.div.append(this._editToolbar.render()),u(this,it)&&await this._editToolbar.addAltText(u(this,it)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,it))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,it)||(Rv.initialize(_e._l10n),A(this,it,new Rv(this)),u(this,pl)&&(u(this,it).data=u(this,pl),A(this,pl,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,it))==null?void 0:e.data}set altTextData(e){u(this,it)&&(u(this,it).data=e)}get guessedAltText(){var e;return(e=u(this,it))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,it))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,it))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,it)&&!u(this,it).isEmpty()}hasAltTextData(){var e;return((e=u(this,it))==null?void 0:e.hasData())??!1}render(){var i;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,Id)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),C(this,he,U0).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),Tv(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,xl)||A(this,xl,new Iv({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,he,UT).bind(this),onPinching:C(this,he,BT).bind(this),onPinchEnd:C(this,he,zT).bind(this),signal:this._uiManager._signal}))),(i=this._uiManager._editorUndoBar)==null||i.hide(),this.div}pointerdown(e){const{isMac:t}=Ps.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,vl,!0),this._isDraggable){C(this,he,HT).call(this,e);return}C(this,he,$0).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,zr)&&clearTimeout(u(this,zr)),A(this,zr,setTimeout(()=>{var e;A(this,zr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,h=t/r,f=this.x*i,p=this.y*a,m=this.width*i,y=this.height*a;switch(n){case 0:return[f+d+l,a-p-h-y+c,f+d+m+l,a-p-h+c];case 90:return[f+h+l,a-p+d+c,f+h+y+l,a-p+d+m+c];case 180:return[f-d-m+l,a-p+h+c,f-d+l,a-p+h+y+c];case 270:return[f-h-y+l,a-p-d-m+c,f-h+l,a-p-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,a]=e,l=i-n,c=a-r;switch(this.rotation){case 0:return[n,t-a,l,c];case 90:return[n,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-a,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){A(this,yl,!0)}disableEditMode(){A(this,yl,!1)}isInEditMode(){return u(this,yl)}shouldGetKeyboardEvents(){return u(this,Ei)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&n>0}rebuild(){C(this,he,U0).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Qe("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,A(r,pl,e.accessibilityData);const[i,a]=r.pageDimensions,[l,c,d,h]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/i,r.y=c/a,r.width=d/i,r.height=h/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,Fa))==null||e.abort(),A(this,Fa,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,zr)&&(clearTimeout(u(this,zr)),A(this,zr,null)),C(this,he,Ah).call(this),this.removeEditToolbar(),u(this,In)){for(const n of u(this,In).values())clearTimeout(n);A(this,In,null)}this.parent=null,(t=u(this,xl))==null||t.destroy(),A(this,xl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,he,FT).call(this),u(this,Kt).classList.remove("hidden"),Tv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,ji,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Kt).children;if(!u(this,ir)){A(this,ir,Array.from(t));const a=C(this,he,VT).bind(this),l=C(this,he,WT).bind(this),c=this._uiManager._signal;for(const d of u(this,ir)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",C(this,he,qT).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",_e._l10nResizer[h])}}const n=u(this,ir)[0];let r=0;for(const a of t){if(a===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,ir).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)u(this,Kt).append(u(this,Kt).firstChild);else if(i>r)for(let l=0;l<i-r;l++)u(this,Kt).firstChild.before(u(this,Kt).lastChild);let a=0;for(const l of t){const d=u(this,ir)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",_e._l10nResizer[d])}}C(this,he,B0).call(this,0),A(this,Ei,!0),u(this,Kt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ei)&&C(this,he,F0).call(this,u(this,tp),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,he,Ah).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,it))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,i;(e=u(this,Kt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=u(this,it))==null||i.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,sp)}set isEditing(e){A(this,sp,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){A(this,ml,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,In)||A(this,In,new Map);const{action:n}=e;let r=u(this,In).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,In).delete(n),u(this,In).size===0&&A(this,In,null)},_e._telemetryTimeout),u(this,In).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,Id,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Id,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};pl=new WeakMap,ir=new WeakMap,it=new WeakMap,Id=new WeakMap,Oa=new WeakMap,ep=new WeakMap,ml=new WeakMap,Kt=new WeakMap,gl=new WeakMap,ji=new WeakMap,Fa=new WeakMap,tp=new WeakMap,vl=new WeakMap,sn=new WeakMap,sp=new WeakMap,yl=new WeakMap,Ei=new WeakMap,zr=new WeakMap,Md=new WeakMap,Ld=new WeakMap,In=new WeakMap,xl=new WeakMap,np=new WeakMap,Hv=new WeakMap,he=new WeakSet,L0=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},rp=new WeakSet,D0=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},bg=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},FT=function(){if(u(this,Kt))return;A(this,Kt,document.createElement("div")),u(this,Kt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");u(this,Kt).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",C(this,he,$T).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Ar,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,Kt))},$T=function(e,t){var h;t.preventDefault();const{isMac:n}=Ps.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=u(this,it))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,gl,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,he,F0).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",vn,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ar,{signal:a}),A(this,ji,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,it))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,C(this,he,_g).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},O0=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*n,a*r),this.fixAndSetPosition(),this._onResized()},_g=function(){if(!u(this,ji))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=u(this,ji);A(this,ji,null);const i=this.x,a=this.y,l=this.width,c=this.height;i===e&&a===t&&l===n&&c===r||this.addCommands({cmd:C(this,he,O0).bind(this,i,a,l,c),undo:C(this,he,O0).bind(this,e,t,n,r),mustExec:!0})},F0=function(e,t){const[n,r]=this.parentDimensions,i=this.x,a=this.y,l=this.width,c=this.height,d=_e.MIN_SIZE/n,h=_e.MIN_SIZE/r,f=C(this,he,bg).call(this,this.rotation),p=(F,W)=>[f[0]*F+f[2]*W,f[1]*F+f[3]*W],m=C(this,he,bg).call(this,360-this.rotation),y=(F,W)=>[m[0]*F+m[2]*W,m[1]*F+m[3]*W];let g,w,v=!1,b=!1;switch(e){case"topLeft":v=!0,g=(F,W)=>[0,0],w=(F,W)=>[F,W];break;case"topMiddle":g=(F,W)=>[F/2,0],w=(F,W)=>[F/2,W];break;case"topRight":v=!0,g=(F,W)=>[F,0],w=(F,W)=>[0,W];break;case"middleRight":b=!0,g=(F,W)=>[F,W/2],w=(F,W)=>[0,W/2];break;case"bottomRight":v=!0,g=(F,W)=>[F,W],w=(F,W)=>[0,0];break;case"bottomMiddle":g=(F,W)=>[F/2,W],w=(F,W)=>[F/2,0];break;case"bottomLeft":v=!0,g=(F,W)=>[0,W],w=(F,W)=>[F,0];break;case"middleLeft":b=!0,g=(F,W)=>[0,W/2],w=(F,W)=>[F,W/2];break}const x=g(l,c),S=w(l,c);let j=p(...S);const N=_e._round(i+j[0]),k=_e._round(a+j[1]);let P=1,I=1,T,M;if(t.fromKeyboard)({deltaX:T,deltaY:M}=t);else{const{screenX:F,screenY:W}=t,[D,R]=u(this,gl);[T,M]=this.screenToPageTranslation(F-D,W-R),u(this,gl)[0]=F,u(this,gl)[1]=W}if([T,M]=y(T/n,M/r),v){const F=Math.hypot(l,c);P=I=Math.max(Math.min(Math.hypot(S[0]-x[0]-T,S[1]-x[1]-M)/F,1/l,1/c),d/l,h/c)}else b?P=Math.max(d,Math.min(1,Math.abs(S[0]-x[0]-T)))/l:I=Math.max(h,Math.min(1,Math.abs(S[1]-x[1]-M)))/c;const U=_e._round(l*P),z=_e._round(c*I);j=p(...w(U,z));const B=N-j[0],J=k-j[1];u(this,sn)||A(this,sn,[this.x,this.y,this.width,this.height]),this.width=U,this.height=z,this.x=B,this.y=J,this.setDims(n*U,r*z),this.fixAndSetPosition(),this._onResizing()},UT=function(){var e;A(this,ji,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,it))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},BT=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const a=C(this,he,bg).call(this,this.rotation),l=(N,k)=>[a[0]*N+a[2]*k,a[1]*N+a[3]*k],[c,d]=this.parentDimensions,h=this.x,f=this.y,p=this.width,m=this.height,y=_e.MIN_SIZE/c,g=_e.MIN_SIZE/d;i=Math.max(Math.min(i,1/p,1/m),y/p,g/m);const w=_e._round(p*i),v=_e._round(m*i);if(w===p&&v===m)return;u(this,sn)||A(this,sn,[h,f,p,m]);const b=l(p/2,m/2),x=_e._round(h+b[0]),S=_e._round(f+b[1]),j=l(w/2,v/2);this.x=x-j[0],this.y=S-j[1],this.width=w,this.height=v,this.setDims(c*w,d*v),this.fixAndSetPosition(),this._onResizing()},zT=function(){var e;(e=u(this,it))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,he,_g).call(this)},$0=function(e){const{isMac:t}=Ps.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},HT=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},l=d=>{r.abort(),A(this,Oa,null),A(this,vl,!1),this._uiManager.endDragSession()||C(this,he,$0).call(this,d),n&&this._onStopDragging()};t&&(A(this,Md,e.clientX),A(this,Ld,e.clientY),A(this,Oa,e.pointerId),A(this,ep,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:p}=d;if(p!==u(this,Oa)){vn(d);return}const[m,y]=this.screenToPageTranslation(h-u(this,Md),f-u(this,Ld));A(this,Md,h),A(this,Ld,f),this._uiManager.dragSelectedEditors(m,y)},a),window.addEventListener("touchmove",vn,a),window.addEventListener("pointerdown",d=>{d.pointerType===u(this,ep)&&(u(this,xl)||d.isPrimary)&&l(d),vn(d)},a));const c=d=>{if(!u(this,Oa)||u(this,Oa)===d.pointerId){l(d);return}vn(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},U0=function(){if(u(this,Fa)||!this.div)return;A(this,Fa,new AbortController);const e=this._uiManager.combinedSignal(u(this,Fa));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},VT=function(e){_e._resizerKeyboardManager.exec(this,e)},WT=function(e){var t;u(this,Ei)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,Kt)&&C(this,he,Ah).call(this)},qT=function(e){A(this,tp,u(this,Ei)?e:"")},B0=function(e){if(u(this,ir))for(const t of u(this,ir))t.tabIndex=e},Ah=function(){A(this,Ei,!1),C(this,he,B0).call(this,-1),C(this,he,_g).call(this)},E(_e,rp),ue(_e,"_l10n",null),ue(_e,"_l10nResizer",null),ue(_e,"_borderLineWidth",-1),ue(_e,"_colorManager",new C0),ue(_e,"_zIndex",1),ue(_e,"_telemetryTimeout",1e3);let pt=_e;class u6 extends pt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const YA=3285377520,Pn=4294901760,Pr=65535;class GT{constructor(e){this.h1=e?e&4294967295:YA,this.h2=e?e&4294967295:YA}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,w=e.length;g<w;g++){const v=e.charCodeAt(g);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,a=new Uint32Array(t.buffer,0,r);let l=0,c=0,d=this.h1,h=this.h2;const f=3432918353,p=461845907,m=f&Pr,y=p&Pr;for(let g=0;g<r;g++)g&1?(l=a[g],l=l*f&Pn|l*m&Pr,l=l<<15|l>>>17,l=l*p&Pn|l*y&Pr,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[g],c=c*f&Pn|c*m&Pr,c=c<<15|c>>>17,c=c*p&Pn|c*y&Pr,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*f&Pn|l*m&Pr,l=l<<15|l>>>17,l=l*p&Pn|l*y&Pr,r&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Pn|e*36045&Pr,t=t*4283543511&Pn|((t<<16|e>>>16)*2950163797&Pn)>>>16,e^=t>>>1,e=e*444984403&Pn|e*60499&Pr,t=t*3301882366&Pn|((t<<16|e>>>16)*3120437893&Pn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const z0=Object.freeze({map:null,hash:"",transfer:void 0});var wl,bl,Bt,Vv,KT;class _1{constructor(){E(this,Vv);E(this,wl,!1);E(this,bl,null);E(this,Bt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,Bt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,Bt).get(e)}remove(e){if(u(this,Bt).delete(e),u(this,Bt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,Bt).values())if(t instanceof pt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,Bt).get(e);let r=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(r=!0,n[i]=a);else r=!0,u(this,Bt).set(e,t);r&&C(this,Vv,KT).call(this),t instanceof pt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,Bt).has(e)}getAll(){return u(this,Bt).size>0?g1(u(this,Bt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return u(this,Bt).size}resetModified(){u(this,wl)&&(A(this,wl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new XT(this)}get serializable(){if(u(this,Bt).size===0)return z0;const e=new Map,t=new GT,n=[],r=Object.create(null);let i=!1;for(const[a,l]of u(this,Bt)){const c=l instanceof pt?l.serialize(!1,r):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:z0}get editorStats(){let e=null;const t=new Map;for(const n of u(this,Bt).values()){if(!(n instanceof pt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[l,c]of Object.entries(r)){if(l==="type")continue;let d=a.get(l);d||(d=new Map,a.set(l,d));const h=d.get(c)??0;d.set(c,h+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){A(this,bl,null)}get modifiedIds(){if(u(this,bl))return u(this,bl);const e=[];for(const t of u(this,Bt).values())!(t instanceof pt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return A(this,bl,{ids:new Set(e),hash:e.join(",")})}}wl=new WeakMap,bl=new WeakMap,Bt=new WeakMap,Vv=new WeakSet,KT=function(){u(this,wl)||(A(this,wl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ip;class XT extends _1{constructor(t){super();E(this,ip);const{map:n,hash:r,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);A(this,ip,{map:a,hash:r,transfer:i})}get print(){Qe("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,ip)}get modifiedIds(){return je(this,"modifiedIds",{ids:new Set,hash:""})}}ip=new WeakMap;var Dd;class h6{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Dd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Dd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,Dd).has(e.loadedName))){if(Ct(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:i}=e,a=new FontFace(n,r,i);this.addNativeFontFace(a);try{await a.load(),u(this,Dd).add(n),t==null||t(e)}catch{we(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Qe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw we(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return je(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ms||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),je(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ct(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return je(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(S,j){return S.charCodeAt(j)<<24|S.charCodeAt(j+1)<<16|S.charCodeAt(j+2)<<8|S.charCodeAt(j+3)&255}function r(S,j,N,k){const P=S.substring(0,j),I=S.substring(j+N);return P+k+I}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(S,j){if(++d>30){we("Load test font never loaded."),j();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(h.bind(null,S,j))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,f.length,f);const y=16,g=1482184792;let w=n(p,y);for(i=0,a=f.length-3;i<a;i+=4)w=w-g+n(f,i)|0;i<f.length&&(w=w-g+n(f+"XXX",i)|0),p=r(p,y,4,QB(w));const v=`url(data:font/opentype;base64,${btoa(p)});`,b=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(b);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const S of[e.loadedName,f]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=S,x.append(j)}this._document.body.append(x),h(f,()=>{x.remove(),t.complete()})}}Dd=new WeakMap;class f6{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${n6(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){we(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}}const Gm={DATA:1,ERROR:2},jt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function QA(){}function Os(s){if(s instanceof No||s instanceof b0||s instanceof Pf||s instanceof GA||s instanceof Pv||s instanceof Vx)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Qe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new No(s.message);case"InvalidPDFException":return new b0(s.message);case"MissingPDFException":return new Pf(s.message);case"PasswordException":return new GA(s.message,s.code);case"UnexpectedResponseException":return new Pv(s.message,s.status);case"UnknownErrorException":return new Vx(s.message,s.details)}return new Vx(s.message,s.toString())}var Od,Vn,YT,QT,JT,Sg;class jh{constructor(e,t,n){E(this,Vn);E(this,Od,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",C(this,Vn,YT).bind(this),{signal:u(this,Od).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:d.desiredSize},r),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:a,targetName:l,stream:jt.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Ct(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:jt.CANCEL,streamId:i,reason:Os(d)}),h.promise}},n)}destroy(){var e;(e=u(this,Od))==null||e.abort(),A(this,Od,null)}}Od=new WeakMap,Vn=new WeakSet,YT=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Vn,JT).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Gm.DATA)r.resolve(e.data);else if(e.callback===Gm.ERROR)r.reject(Os(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:n,targetName:r,callback:Gm.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:n,targetName:r,callback:Gm.ERROR,callbackId:e.callbackId,reason:Os(a)})});return}if(e.streamId){C(this,Vn,QT).call(this,e);return}t(e.data)},QT=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:jt.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:jt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){Ct(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:jt.ERROR,streamId:t,reason:Os(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:jt.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:jt.START_COMPLETE,streamId:t,reason:Os(d)})})},JT=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case jt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Os(e.reason));break;case jt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Os(e.reason));break;case jt.PULL:if(!l){i.postMessage({sourceName:n,targetName:r,stream:jt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||QA).then(function(){i.postMessage({sourceName:n,targetName:r,stream:jt.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:jt.PULL_COMPLETE,streamId:t,reason:Os(d)})});break;case jt.ENQUEUE:if(Ct(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case jt.CLOSE:if(Ct(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),C(this,Vn,Sg).call(this,a,t);break;case jt.ERROR:Ct(a,"error should have stream controller"),a.controller.error(Os(e.reason)),C(this,Vn,Sg).call(this,a,t);break;case jt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Os(e.reason)),C(this,Vn,Sg).call(this,a,t);break;case jt.CANCEL:if(!l)break;const c=Os(e.reason);Promise.try(l.onCancel||QA,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:jt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:jt.CANCEL_COMPLETE,streamId:t,reason:Os(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Sg=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var ap;class ZT{constructor({enableHWA:e=!1}){E(this,ap,!1);A(this,ap,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,ap)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Qe("Abstract method `_createCanvas` called.")}}ap=new WeakMap;class p6 extends ZT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class e2{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class t2 extends e2{async _fetch(e){const t=await Vy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hy(t)}}class s2{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var _l,Fd,Ci,Ni,ds,Sl,Al,ee,os,Eh,Bc,Ag,zc,n2,H0,Hc,Ch,Nh,V0,kh;class m6 extends s2{constructor({docId:t,ownerDocument:n=globalThis.document}){super();E(this,ee);E(this,_l);E(this,Fd);E(this,Ci);E(this,Ni);E(this,ds);E(this,Sl);E(this,Al,0);A(this,Ni,t),A(this,ds,n)}addFilter(t){if(!t)return"none";let n=u(this,ee,os).get(t);if(n)return n;const[r,i,a]=C(this,ee,Ag).call(this,t),l=t.length===1?r:`${r}${i}${a}`;if(n=u(this,ee,os).get(l),n)return u(this,ee,os).set(t,n),n;const c=`g_${u(this,Ni)}_transfer_map_${xs(this,Al)._++}`,d=C(this,ee,zc).call(this,c);u(this,ee,os).set(t,d),u(this,ee,os).set(l,d);const h=C(this,ee,Hc).call(this,c);return C(this,ee,Nh).call(this,r,i,a,h),d}addHCMFilter(t,n){var y;const r=`${t}-${n}`,i="base";let a=u(this,ee,Eh).get(i);if((a==null?void 0:a.key)===r||(a?((y=a.filter)==null||y.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},u(this,ee,Eh).set(i,a)),!t||!n))return a.url;const l=C(this,ee,kh).call(this,t);t=le.makeHexColor(...l);const c=C(this,ee,kh).call(this,n);if(n=le.makeHexColor(...c),u(this,ee,Bc).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const d=new Array(256);for(let g=0;g<=255;g++){const w=g/255;d[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=d.join(","),f=`g_${u(this,Ni)}_hcm_filter`,p=a.filter=C(this,ee,Hc).call(this,f);C(this,ee,Nh).call(this,h,h,h,p),C(this,ee,H0).call(this,p);const m=(g,w)=>{const v=l[g]/255,b=c[g]/255,x=new Array(w+1);for(let S=0;S<=w;S++)x[S]=v+S/w*(b-v);return x.join(",")};return C(this,ee,Nh).call(this,m(0,5),m(1,5),m(2,5),p),a.url=C(this,ee,zc).call(this,f),a.url}addAlphaFilter(t){let n=u(this,ee,os).get(t);if(n)return n;const[r]=C(this,ee,Ag).call(this,[t]),i=`alpha_${r}`;if(n=u(this,ee,os).get(i),n)return u(this,ee,os).set(t,n),n;const a=`g_${u(this,Ni)}_alpha_map_${xs(this,Al)._++}`,l=C(this,ee,zc).call(this,a);u(this,ee,os).set(t,l),u(this,ee,os).set(i,l);const c=C(this,ee,Hc).call(this,a);return C(this,ee,V0).call(this,r,c),l}addLuminosityFilter(t){let n=u(this,ee,os).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=C(this,ee,Ag).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=u(this,ee,os).get(i),n)return u(this,ee,os).set(t,n),n;const a=`g_${u(this,Ni)}_luminosity_map_${xs(this,Al)._++}`,l=C(this,ee,zc).call(this,a);u(this,ee,os).set(t,l),u(this,ee,os).set(i,l);const c=C(this,ee,Hc).call(this,a);return C(this,ee,n2).call(this,c),t&&C(this,ee,V0).call(this,r,c),l}addHighlightHCMFilter(t,n,r,i,a){var b;const l=`${n}-${r}-${i}-${a}`;let c=u(this,ee,Eh).get(t);if((c==null?void 0:c.key)===l||(c?((b=c.filter)==null||b.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},u(this,ee,Eh).set(t,c)),!n||!r))return c.url;const[d,h]=[n,r].map(C(this,ee,kh).bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[i,a].map(C(this,ee,kh).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),u(this,ee,Bc).style.color="";const g=(x,S,j)=>{const N=new Array(256),k=(p-f)/j,P=x/255,I=(S-x)/(255*j);let T=0;for(let M=0;M<=j;M++){const U=Math.round(f+M*k),z=P+M*I;for(let B=T;B<=U;B++)N[B]=z;T=U+1}for(let M=T;M<256;M++)N[M]=N[T-1];return N.join(",")},w=`g_${u(this,Ni)}_hcm_${t}_filter`,v=c.filter=C(this,ee,Hc).call(this,w);return C(this,ee,H0).call(this,v),C(this,ee,Nh).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),c.url=C(this,ee,zc).call(this,w),c.url}destroy(t=!1){var n,r,i,a;t&&((n=u(this,Sl))!=null&&n.size)||((r=u(this,Ci))==null||r.parentNode.parentNode.remove(),A(this,Ci,null),(i=u(this,Fd))==null||i.clear(),A(this,Fd,null),(a=u(this,Sl))==null||a.clear(),A(this,Sl,null),A(this,Al,0))}}_l=new WeakMap,Fd=new WeakMap,Ci=new WeakMap,Ni=new WeakMap,ds=new WeakMap,Sl=new WeakMap,Al=new WeakMap,ee=new WeakSet,os=function(){return u(this,Fd)||A(this,Fd,new Map)},Eh=function(){return u(this,Sl)||A(this,Sl,new Map)},Bc=function(){if(!u(this,Ci)){const t=u(this,ds).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=u(this,ds).createElementNS(hi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Ci,u(this,ds).createElementNS(hi,"defs")),t.append(r),r.append(u(this,Ci)),u(this,ds).body.append(t)}return u(this,Ci)},Ag=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=d[p]/255;const f=h.join(",");return[f,f,f]}const[n,r,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=n[d]/255,l[d]=r[d]/255,c[d]=i[d]/255;return[a.join(","),l.join(","),c.join(",")]},zc=function(t){if(u(this,_l)===void 0){A(this,_l,"");const n=u(this,ds).URL;n!==u(this,ds).baseURI&&(Wy(n)?we('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,_l,n.split("#",1)[0]))}return`url(${u(this,_l)}#${t})`},n2=function(t){const n=u(this,ds).createElementNS(hi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},H0=function(t){const n=u(this,ds).createElementNS(hi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Hc=function(t){const n=u(this,ds).createElementNS(hi,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,ee,Bc).append(n),n},Ch=function(t,n,r){const i=u(this,ds).createElementNS(hi,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Nh=function(t,n,r,i){const a=u(this,ds).createElementNS(hi,"feComponentTransfer");i.append(a),C(this,ee,Ch).call(this,a,"feFuncR",t),C(this,ee,Ch).call(this,a,"feFuncG",n),C(this,ee,Ch).call(this,a,"feFuncB",r)},V0=function(t,n){const r=u(this,ds).createElementNS(hi,"feComponentTransfer");n.append(r),C(this,ee,Ch).call(this,r,"feFuncA",t)},kh=function(t){return u(this,ee,Bc).style.color=t,b1(getComputedStyle(u(this,ee,Bc)).getPropertyValue("color"))};class r2{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class i2 extends r2{async _fetch(e){const t=await Vy(e,"arraybuffer");return new Uint8Array(t)}}ms&&we("Please use the `legacy` build in Node.js environments.");async function a2(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class g6 extends s2{}class v6 extends ZT{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class y6 extends e2{async _fetch(e){return a2(e)}}class x6 extends r2{async _fetch(e){return a2(e)}}const fs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function W0(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class S1{getPattern(){Qe("Abstract method `getPattern` called.")}}class w6 extends S1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===fs.STROKE||r===fs.FILL){const a=t.current.getClippedPathBoundingBox(r,lt(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=le.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),W0(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(n);i.setTransform(f)}else W0(e,this._bbox),i=this._createGradient(e);return i}}function Gx(s,e,t,n,r,i,a,l){const c=e.coords,d=e.colors,h=s.data,f=s.width*4;let p;c[t+1]>c[n+1]&&(p=t,t=n,n=p,p=i,i=a,a=p),c[n+1]>c[r+1]&&(p=n,n=r,r=p,p=a,a=l,l=p),c[t+1]>c[n+1]&&(p=t,t=n,n=p,p=i,i=a,a=p);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,g=(c[n]+e.offsetX)*e.scaleX,w=(c[n+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,b=(c[r+1]+e.offsetY)*e.scaleY;if(y>=b)return;const x=d[i],S=d[i+1],j=d[i+2],N=d[a],k=d[a+1],P=d[a+2],I=d[l],T=d[l+1],M=d[l+2],U=Math.round(y),z=Math.round(b);let B,J,F,W,D,R,O,H;for(let Q=U;Q<=z;Q++){if(Q<w){const G=Q<y?0:(y-Q)/(y-w);B=m-(m-g)*G,J=x-(x-N)*G,F=S-(S-k)*G,W=j-(j-P)*G}else{let G;Q>b?G=1:w===b?G=0:G=(w-Q)/(w-b),B=g-(g-v)*G,J=N-(N-I)*G,F=k-(k-T)*G,W=P-(P-M)*G}let ae;Q<y?ae=0:Q>b?ae=1:ae=(y-Q)/(y-b),D=m-(m-v)*ae,R=x-(x-I)*ae,O=S-(S-T)*ae,H=j-(j-M)*ae;const pe=Math.round(Math.min(B,D)),Ie=Math.round(Math.max(B,D));let Ee=f*Q+pe*4;for(let G=pe;G<=Ie;G++)ae=(B-G)/(B-D),ae<0?ae=0:ae>1&&(ae=1),h[Ee++]=J-(J-R)*ae|0,h[Ee++]=F-(F-O)*ae|0,h[Ee++]=W-(W-H)*ae|0,h[Ee++]=255}}function b6(s,e,t){const n=e.coords,r=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,d=l-1;for(i=0;i<c;i++){let h=i*l;for(let f=0;f<d;f++,h++)Gx(s,t,n[h],n[h+1],n[h+l],r[h],r[h+1],r[h+l]),Gx(s,t,n[h+l+1],n[h+1],n[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(i=0,a=n.length;i<a;i+=3)Gx(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class _6 extends S1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=d/f,y=h/p,g={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/y},w=f+2*2,v=p+2*2,b=n.getCanvas("mesh",w,v),x=b.context,S=x.createImageData(f,p);if(t){const N=S.data;for(let k=0,P=N.length;k<P;k+=4)N[k]=t[0],N[k+1]=t[1],N[k+2]=t[2],N[k+3]=255}for(const N of this._figures)b6(S,N,g);return x.putImageData(S,2,2),{canvas:b.canvas,offsetX:l-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}getPattern(e,t,n,r){W0(e,this._bbox);let i;if(r===fs.SHADING)i=le.singularValueDecompose2dScale(lt(e));else if(i=le.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=le.singularValueDecompose2dScale(this.matrix);i=[i[0]*l[0],i[1]*l[1]]}const a=this._createMeshCanvas(i,r===fs.SHADING?null:this._background,t.cachedCanvases);return r!==fs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class S6 extends S1{getPattern(){return"hotpink"}}function A6(s){switch(s[0]){case"RadialAxial":return new w6(s);case"Mesh":return new _6(s);case"Dummy":return new S6}throw new Error(`Unknown IR type: ${s[0]}`)}const JA={COLORED:1,UNCOLORED:2},Wv=class Wv{constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:i,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),zy("TilingType: "+i);const h=t[0],f=t[1],p=t[2],m=t[3],y=p-h,g=m-f,w=le.singularValueDecompose2dScale(this.matrix),v=le.singularValueDecompose2dScale(this.baseTransform),b=w[0]*v[0],x=w[1]*v[1];let S=y,j=g,N=!1,k=!1;const P=Math.ceil(c*b),I=Math.ceil(d*x),T=Math.ceil(y*b),M=Math.ceil(g*x);P>=T?S=c:N=!0,I>=M?j=d:k=!0;const U=this.getSizeAndScale(S,this.ctx.canvas.width,b),z=this.getSizeAndScale(j,this.ctx.canvas.height,x),B=e.cachedCanvases.getCanvas("pattern",U.size,z.size),J=B.context,F=l.createCanvasGraphics(J);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,r,a),J.translate(-U.scale*h,-z.scale*f),F.transform(U.scale,0,0,z.scale,0,0),J.save(),this.clipBbox(F,h,f,p,m),F.baseTransform=lt(F.ctx),F.executeOperatorList(n),F.endDrawing(),J.restore(),N||k){const W=B.canvas;N&&(S=c),k&&(j=d);const D=this.getSizeAndScale(S,this.ctx.canvas.width,b),R=this.getSizeAndScale(j,this.ctx.canvas.height,x),O=D.size,H=R.size,Q=e.cachedCanvases.getCanvas("pattern-workaround",O,H),ae=Q.context,pe=N?Math.floor(y/c):0,Ie=k?Math.floor(g/d):0;for(let Ee=0;Ee<=pe;Ee++)for(let G=0;G<=Ie;G++)ae.drawImage(W,O*Ee,H*G,O,H,0,0,O,H);return{canvas:Q.canvas,scaleX:D.scale,scaleY:R.scale,offsetX:h,offsetY:f}}return{canvas:B.canvas,scaleX:U.scale,scaleY:z.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,n){const r=Math.max(Wv.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const a=r-t,l=i-n;e.ctx.rect(t,n,a,l),e.current.updateRectMinMax(lt(e.ctx),[t,n,r,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case JA.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case JA.UNCOLORED:const l=le.makeHexColor(n[0],n[1],n[2]);r.fillStyle=l,r.strokeStyle=l,i.fillColor=l,i.strokeColor=l;break;default:throw new YB(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let i=n;r!==fs.SHADING&&(i=le.transform(i,t.baseTransform),this.matrix&&(i=le.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};ue(Wv,"MAX_PATTERN_SIZE",3e3);let q0=Wv;function j6({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=Ps.isLittleEndian?4278190080:255,[c,d]=a?[i,l]:[l,i],h=n>>3,f=n&7,p=s.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<r;y++){for(const w=e+h;e<w;e++){const v=e<p?s[e]:255;t[m++]=v&128?d:c,t[m++]=v&64?d:c,t[m++]=v&32?d:c,t[m++]=v&16?d:c,t[m++]=v&8?d:c,t[m++]=v&4?d:c,t[m++]=v&2?d:c,t[m++]=v&1?d:c}if(f===0)continue;const g=e<p?s[e++]:255;for(let w=0;w<f;w++)t[m++]=g&1<<7-w?d:c}return{srcPos:e,destPos:m}}const ZA=16,ej=100,E6=15,tj=10,sj=1e3,zs=16;function C6(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},s.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},s.transform=function(n,r,i,a,l,c){e.transform(n,r,i,a,l,c),this.__originalTransform(n,r,i,a,l,c)},s.setTransform=function(n,r,i,a,l,c){e.setTransform(n,r,i,a,l,c),this.__originalSetTransform(n,r,i,a,l,c)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){e.rotate(n),this.__originalRotate(n)},s.clip=function(n){e.clip(n),this.__originalClip(n)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,a,l){e.bezierCurveTo(t,n,r,i,a,l),this.__originalBezierCurveTo(t,n,r,i,a,l)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class N6{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Km(s,e,t,n,r,i,a,l,c,d){const[h,f,p,m,y,g]=lt(s);if(f===0&&p===0){const b=a*h+y,x=Math.round(b),S=l*m+g,j=Math.round(S),N=(a+c)*h+y,k=Math.abs(Math.round(N)-x)||1,P=(l+d)*m+g,I=Math.abs(Math.round(P)-j)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(m),x,j),s.drawImage(e,t,n,r,i,0,0,k,I),s.setTransform(h,f,p,m,y,g),[k,I]}if(h===0&&m===0){const b=l*p+y,x=Math.round(b),S=a*f+g,j=Math.round(S),N=(l+d)*p+y,k=Math.abs(Math.round(N)-x)||1,P=(a+c)*f+g,I=Math.abs(Math.round(P)-j)||1;return s.setTransform(0,Math.sign(f),Math.sign(p),0,x,j),s.drawImage(e,t,n,r,i,0,0,I,k),s.setTransform(h,f,p,m,y,g),[I,k]}s.drawImage(e,t,n,r,i,a,l,c,d);const w=Math.hypot(h,f),v=Math.hypot(p,m);return[w*c,v*d]}function k6(s){const{width:e,height:t}=s;if(e>sj||t>sj)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),l,c,d;const h=e+7&-8;let f=new Uint8Array(h*t),p=0;for(const v of s.data){let b=128;for(;b>0;)f[p++]=v&b?0:255,b>>=1}let m=0;for(p=0,f[p]!==0&&(a[0]=1,++m),c=1;c<e;c++)f[p]!==f[p+1]&&(a[c]=f[p]?2:1,++m),p++;for(f[p]!==0&&(a[c]=2,++m),l=1;l<t;l++){p=l*h,d=l*i,f[p-h]!==f[p]&&(a[d]=f[p]?1:8,++m);let v=(f[p]?4:0)+(f[p-h]?8:0);for(c=1;c<e;c++)v=(v>>2)+(f[p+1]?4:0)+(f[p-h+1]?8:0),r[v]&&(a[d+c]=r[v],++m),p++;if(f[p-h]!==f[p]&&(a[d+c]=f[p]?2:4,++m),m>n)return null}for(p=h*(t-1),d=l*i,f[p]!==0&&(a[d]=8,++m),c=1;c<e;c++)f[p]!==f[p+1]&&(a[d+c]=f[p]?4:8,++m),p++;if(f[p]!==0&&(a[d+c]=4,++m),m>n)return null;const y=new Int32Array([0,i,-1,0,-i,0,0,0,1]),g=new Path2D;for(l=0;m&&l<=t;l++){let v=l*i;const b=v+e;for(;v<b&&!a[v];)v++;if(v===b)continue;g.moveTo(v%i,l);const x=v;let S=a[v];do{const j=y[S];do v+=j;while(!a[v]);const N=a[v];N!==5&&N!==10?(S=N,a[v]=0):(S=N&51*S>>4,a[v]&=S>>2|S<<2),g.lineTo(v%i,v/i|0),a[v]||--m}while(x!==v);--l}return f=null,a=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(g),v.beginPath(),v.restore()}}class nj{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=gT,this.textMatrixScale=1,this.fontMatrix=w0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=as.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=le.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=le.applyTransform(t,e),r=le.applyTransform(t.slice(2),e),i=le.applyTransform([t[0],t[3]],e),a=le.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],r[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],r[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],r[1],i[1],a[1])}updateScalingPathMinMax(e,t){le.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,i,a,l,c,d,h){const f=le.bezierBoundingBox(t,n,r,i,a,l,c,d,h);h||this.updateRectMinMax(e,f)}getPathBoundingBox(e=fs.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===fs.STROKE){t||Qe("Stroke bounding box must include transform.");const r=le.singularValueDecompose2dScale(t),i=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=fs.FILL,t=null){return le.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function rj(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%zs,i=(t-r)/zs,a=r===0?i:i+1,l=s.createImageData(n,zs);let c=0,d;const h=e.data,f=l.data;let p,m,y,g;if(e.kind===pg.GRAYSCALE_1BPP){const w=h.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),b=v.length,x=n+7>>3,S=4294967295,j=Ps.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(y=p<i?zs:r,d=0,m=0;m<y;m++){const N=w-c;let k=0;const P=N>x?n:N*8-7,I=P&-8;let T=0,M=0;for(;k<I;k+=8)M=h[c++],v[d++]=M&128?S:j,v[d++]=M&64?S:j,v[d++]=M&32?S:j,v[d++]=M&16?S:j,v[d++]=M&8?S:j,v[d++]=M&4?S:j,v[d++]=M&2?S:j,v[d++]=M&1?S:j;for(;k<P;k++)T===0&&(M=h[c++],T=128),v[d++]=M&T?S:j,T>>=1}for(;d<b;)v[d++]=0;s.putImageData(l,0,p*zs)}}else if(e.kind===pg.RGBA_32BPP){for(m=0,g=n*zs*4,p=0;p<i;p++)f.set(h.subarray(c,c+g)),c+=g,s.putImageData(l,0,m),m+=zs;p<a&&(g=n*r*4,f.set(h.subarray(c,c+g)),s.putImageData(l,0,m))}else if(e.kind===pg.RGB_24BPP)for(y=zs,g=n*y,p=0;p<a;p++){for(p>=i&&(y=r,g=n*y),d=0,m=g;m--;)f[d++]=h[c++],f[d++]=h[c++],f[d++]=h[c++],f[d++]=255;s.putImageData(l,0,p*zs)}else throw new Error(`bad image kind: ${e.kind}`)}function ij(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%zs,i=(t-r)/zs,a=r===0?i:i+1,l=s.createImageData(n,zs);let c=0;const d=e.data,h=l.data;for(let f=0;f<a;f++){const p=f<i?zs:r;({srcPos:c}=j6({src:d,srcPos:c,dest:h,width:n,height:p,nonBlackColor:0})),s.putImageData(l,0,f*zs)}}function hh(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Xm(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!ms){const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}}function aj(s,e){if(e)return!0;const t=le.singularValueDecompose2dScale(s);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ko.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const P6=["butt","round","square"],T6=["miter","round","bevel"],R6={},oj={};var jr,G0,K0,X0;const N1=class N1{constructor(e,t,n,r,i,{optionalContentConfig:a,markedContentStack:l=null},c,d){E(this,jr);this.ctx=e,this.current=new nj(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new N6(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...lt(this.compositeCtx))}this.ctx.save(),Xm(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=lt(this.ctx)}executeOperatorList(e,t,n,r){const i=e.argsArray,a=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const d=c-l>tj&&typeof n=="function",h=d?Date.now()+E6:0;let f=0;const p=this.commonObjs,m=this.objs;let y;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,n),l;if(y=a[l],y!==tr.dependency)this[y].apply(this,i[l]);else for(const g of i[l]){const w=g.startsWith("g_")?p:m;if(!w.has(g))return w.get(g,n),l}if(l++,l===c)return l;if(d&&++f>tj){if(Date.now()>h)return n(),l;f=0}}}endDrawing(){C(this,jr,G0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,jr,K0).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,d="prescale1",h,f;for(;i>2&&l>1||a>2&&c>1;){let p=l,m=c;i>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/p),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),h=this.cachedCanvases.getCanvas(d,p,m),f=h.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,l,c,0,0,p,m),e=h.canvas,l=p,c=m,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,i=this.current.fillColor,a=this.current.patternFill,l=lt(t);let c,d,h,f;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),i]),c=this._cachedBitmapsMap.get(P),c||(c=new Map,this._cachedBitmapsMap.set(P,c));const I=c.get(d);if(I&&!a){const T=Math.round(Math.min(l[0],l[2])+l[4]),M=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:I,offsetX:T,offsetY:M}}h=I}h||(f=this.cachedCanvases.getCanvas("maskCanvas",n,r),ij(f.context,e));let p=le.transform(l,[1/n,0,0,-1/r,0,0]);p=le.transform(p,[1,0,0,1,0,-r]);const[m,y,g,w]=le.getAxialAlignedBoundingBox([0,0,n,r],p),v=Math.round(g-m)||1,b=Math.round(w-y)||1,x=this.cachedCanvases.getCanvas("fillCanvas",v,b),S=x.context,j=m,N=y;S.translate(-j,-N),S.transform(...p),h||(h=this._scaleImage(f.canvas,kr(S)),h=h.img,c&&a&&c.set(d,h)),S.imageSmoothingEnabled=aj(lt(S),e.interpolate),Km(S,h,0,0,h.width,h.height,0,0,n,r),S.globalCompositeOperation="source-in";const k=le.transform(kr(S),[1,0,0,1,-j,-N]);return S.fillStyle=a?i.getPattern(t,this,k,fs.FILL):i,S.fillRect(0,0,n,r),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,x.canvas)),{canvas:x.canvas,offsetX:Math.round(j),offsetY:Math.round(N)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=P6[e]}setLineJoin(e){this.ctx.lineJoin=T6[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const i=this.ctx;i.setTransform(...lt(this.suspendedCtx)),hh(this.suspendedCtx,i),C6(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],a=r[1],l=r[2]-i,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,n,l,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,l,c,d,h,f){let p=e.canvas,m=c-h,y=d-f;if(a){const w=le.makeHexColor(...a);if(m<0||y<0||m+n>p.width||y+r>p.height){const v=this.cachedCanvases.getCanvas("maskExtension",n,r),b=v.context;b.drawImage(p,-m,-y),b.globalCompositeOperation="destination-atop",b.fillStyle=w,b.fillRect(0,0,n,r),b.globalCompositeOperation="source-over",p=v.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(m,y,n,r),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=w,e.fillRect(m,y,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const g=new Path2D;g.rect(c,d,n,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,n,r,c,d,n,r),t.restore()}save(){this.inSMaskMode?(hh(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hh(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,a){this.ctx.transform(e,t,n,r,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,i=this.current;let a=i.x,l=i.y,c,d;const h=lt(r),f=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,p=f?n.slice(0):null;for(let m=0,y=0,g=e.length;m<g;m++)switch(e[m]|0){case tr.rectangle:a=t[y++],l=t[y++];const w=t[y++],v=t[y++],b=a+w,x=l+v;r.moveTo(a,l),w===0||v===0?r.lineTo(b,x):(r.lineTo(b,l),r.lineTo(b,x),r.lineTo(a,x)),f||i.updateRectMinMax(h,[a,l,b,x]),r.closePath();break;case tr.moveTo:a=t[y++],l=t[y++],r.moveTo(a,l),f||i.updatePathMinMax(h,a,l);break;case tr.lineTo:a=t[y++],l=t[y++],r.lineTo(a,l),f||i.updatePathMinMax(h,a,l);break;case tr.curveTo:c=a,d=l,a=t[y+4],l=t[y+5],r.bezierCurveTo(t[y],t[y+1],t[y+2],t[y+3],a,l),i.updateCurvePathMinMax(h,c,d,t[y],t[y+1],t[y+2],t[y+3],a,l,p),y+=6;break;case tr.curveTo2:c=a,d=l,r.bezierCurveTo(a,l,t[y],t[y+1],t[y+2],t[y+3]),i.updateCurvePathMinMax(h,c,d,a,l,t[y],t[y+1],t[y+2],t[y+3],p),a=t[y+2],l=t[y+3],y+=4;break;case tr.curveTo3:c=a,d=l,a=t[y+2],l=t[y+3],r.bezierCurveTo(t[y],t[y+1],a,l,a,l),i.updateCurvePathMinMax(h,c,d,t[y],t[y+1],a,l,a,l,p),y+=4;break;case tr.closePath:r.closePath();break}f&&i.updateScalingPathMinMax(h,p),i.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,kr(t),fs.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let i=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,kr(t),fs.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=R6}eoClip(){this.pendingClip=oj}beginText(){this.current.textMatrix=gT,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:i,x:a,y:l,fontSize:c,path:d}of e)n.addPath(d,new DOMMatrix(i).preMultiplySelf(r).translate(a,l).scale(c,-c));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||w0,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&we("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",a=((h=n.systemFontInfo)==null?void 0:h.css)||`"${i}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let d=t;t<ZA?d=ZA:t>ej&&(d=ej),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${l} ${d}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,a){this.current.textMatrix=[e,t,n,r,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,i){const a=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&as.FILL_STROKE_MASK,p=!!(d&as.ADD_TO_PATH_FLAG),m=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let g;if((c.disableFontFace||p||m||y)&&(g=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||m||y){if(a.save(),a.translate(t,n),a.scale(h,-h),f===as.FILL||f===as.FILL_STROKE)if(r){const w=a.getTransform();a.setTransform(...r),a.fill(C(this,jr,X0).call(this,g,w,r))}else a.fill(g);if(f===as.STROKE||f===as.FILL_STROKE)if(i){const w=a.getTransform();a.setTransform(...i),a.stroke(C(this,jr,X0).call(this,g,w,i))}else a.lineWidth/=h,a.stroke(g);a.restore()}else(f===as.FILL||f===as.FILL_STROKE)&&a.fillText(e,t,n),(f===as.STROKE||f===as.FILL_STROKE)&&a.strokeText(e,t,n);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:lt(a),x:t,y:n,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return je(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,a=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,f=e.length,p=n.vertical,m=p?1:-1,y=n.defaultVMetrics,g=r*t.fontMatrix[0],w=t.textRenderingMode===as.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),d>0?i.scale(h,-1):i.scale(h,1);let v,b;if(t.patternFill){i.save();const k=t.fillColor.getPattern(i,this,kr(i),fs.FILL);v=lt(i),i.restore(),i.fillStyle=k}if(t.patternStroke){i.save();const k=t.strokeColor.getPattern(i,this,kr(i),fs.STROKE);b=lt(i),i.restore(),i.strokeStyle=k}let x=t.lineWidth;const S=t.textMatrixScale;if(S===0||x===0){const k=t.textRenderingMode&as.FILL_STROKE_MASK;(k===as.STROKE||k===as.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=S;if(a!==1&&(i.scale(a,a),x/=a),i.lineWidth=x,n.isInvalidPDFjsFont){const k=[];let P=0;for(const I of e)k.push(I.unicode),P+=I.width;i.fillText(k.join(""),0,0),t.x+=P*g*h,i.restore(),this.compose();return}let j=0,N;for(N=0;N<f;++N){const k=e[N];if(typeof k=="number"){j+=m*k*r/1e3;continue}let P=!1;const I=(k.isSpace?c:0)+l,T=k.fontChar,M=k.accent;let U,z,B=k.width;if(p){const F=k.vmetric||y,W=-(k.vmetric?F[1]:B*.5)*g,D=F[2]*g;B=F?-F[0]:B,U=W/a,z=(j+D)/a}else U=j/a,z=0;if(n.remeasure&&B>0){const F=i.measureText(T).width*1e3/r*a;if(B<F&&this.isFontSubpixelAAEnabled){const W=B/F;P=!0,i.save(),i.scale(W,1),U/=W}else B!==F&&(U+=(B-F)/2e3*r/a)}if(this.contentVisible&&(k.isInFont||n.missingFile)){if(w&&!M)i.fillText(T,U,z);else if(this.paintChar(T,U,z,v,b),M){const F=U+r*M.offset.x/a,W=z-r*M.offset.y/a;this.paintChar(M.fontChar,F,W,v,b)}}const J=p?B*g-I*d:B*g+I*d;j+=J,P&&i.restore()}p?t.y-=j:t.x+=j*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,i=n.fontSize,a=n.fontDirection,l=r.vertical?1:-1,c=n.charSpacing,d=n.wordSpacing,h=n.textHScale*a,f=n.fontMatrix||w0,p=e.length,m=n.textRenderingMode===as.INVISIBLE;let y,g,w,v;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(h,a),y=0;y<p;++y){if(g=e[y],typeof g=="number"){v=l*g*i/1e3,this.ctx.translate(v,0),n.x+=v*h;continue}const b=(g.isSpace?d:0)+c,x=r.charProcOperatorList[g.operatorListId];if(!x){we(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(x),this.restore()),w=le.applyTransform([g.width,0],f)[0]*i+b,t.translate(w,0),n.x+=w*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||lt(this.ctx),i={createCanvasGraphics:a=>new N1(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new q0(e,n,this.ctx,i,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=le.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=le.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=A6(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,kr(t),fs.SHADING);const r=kr(t);if(r){const{width:i,height:a}=t.canvas,[l,c,d,h]=le.getAxialAlignedBoundingBox([0,0,i,a],r);this.ctx.fillRect(l,c,d-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qe("Should not call beginInlineImage")}beginImageData(){Qe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=lt(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(lt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||zy("TODO: Support non-isolated groups."),e.knockout&&we("Knockout groups not supported.");const n=lt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=le.getAxialAlignedBoundingBox(e.bbox,lt(t));const i=[0,0,t.canvas.width,t.canvas.height];r=le.intersect(r,i)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-a,1),d=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),p=f.context;p.translate(-a,-l),p.transform(...n),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),hh(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=lt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=le.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,r,i){if(C(this,jr,G0).call(this),Xm(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[c,d]=le.singularValueDecompose2dScale(lt(this.ctx)),{viewportScale:h}=this,f=Math.ceil(a*this.outputScaleX*h),p=Math.ceil(l*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(c,0,0,-d,0,l*d),Xm(this.ctx)}else Xm(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new nj(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,jr,K0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=k6(e)),r.compiled)){r.compiled(n);return}const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=lt(l);l.transform(t,n,r,i,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let h=0,f=a.length;h<f;h+=2){const p=le.transform(c,[t,n,r,i,a[h],a[h+1]]),[m,y]=le.applyTransform([0,0],p);l.drawImage(d.canvas,m,y)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:a,width:l,height:c,transform:d}=i,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=h.context;f.save();const p=this.getObject(a,i);ij(f,p),f.globalCompositeOperation="source-in",f.fillStyle=r?n.getPattern(f,this,kr(t),fs.FILL):n,f.fillRect(0,0,l,c),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),Km(t,h.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){we("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){we("Dependent image isn't ready yet");return}const a=i.width,l=i.height,c=[];for(let d=0,h=r.length;d<h;d+=2)c.push({transform:[t,0,0,n,r[d],r[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!ms){const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none")}r.scale(1/t,-1/n);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;rj(c,e),i=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(i,kr(r));r.imageSmoothingEnabled=aj(lt(r),e.interpolate),Km(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;rj(c,e),r=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),Km(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===oj?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=lt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let a,l;if(n===0&&r===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)a=l=1/c;else{const h=c*e;a=l=h<1?1/h:1}else if(e===0)a=1/c,l=1/d;else{const h=c*e,f=d*e;a=h<1?1/h:1,l=f<1?1/f:1}}else{const c=Math.abs(t*i-n*r),d=Math.hypot(t,n),h=Math.hypot(r,i);if(e===0)a=h/c,l=d/c;else{const f=e*c;a=h>f?h/f:1,l=d>f?d/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,i),a.length>0){const l=Math.max(r,i);t.setLineDash(a.map(c=>c/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};jr=new WeakSet,G0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},K0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},X0=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let wd=N1;for(const s in tr)wd.prototype[s]!==void 0&&(wd.prototype[tr[s]]=wd.prototype[s]);var op,lp;class Wi{static get workerPort(){return u(this,op)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,op,e)}static get workerSrc(){return u(this,lp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,lp,e)}}op=new WeakMap,lp=new WeakMap,E(Wi,op,null),E(Wi,lp,"");var jl,cp;class I6{constructor({parsedData:e,rawData:t}){E(this,jl);E(this,cp);A(this,jl,e),A(this,cp,t)}getRaw(){return u(this,cp)}get(e){return u(this,jl).get(e)??null}getAll(){return g1(u(this,jl))}has(e){return u(this,jl).has(e)}}jl=new WeakMap,cp=new WeakMap;const Vc=Symbol("INTERNAL");var dp,up,hp,$d;class M6{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){E(this,dp,!1);E(this,up,!1);E(this,hp,!1);E(this,$d,!0);A(this,dp,!!(e&fn.DISPLAY)),A(this,up,!!(e&fn.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(u(this,hp))return u(this,$d);if(!u(this,$d))return!1;const{print:e,view:t}=this.usage;return u(this,dp)?(t==null?void 0:t.viewState)!=="OFF":u(this,up)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Vc&&Qe("Internal method `_setVisible` called."),A(this,hp,n),A(this,$d,t)}}dp=new WeakMap,up=new WeakMap,hp=new WeakMap,$d=new WeakMap;var $a,We,Ud,Bd,fp,Y0;class L6{constructor(e,t=fn.DISPLAY){E(this,fp);E(this,$a,null);E(this,We,new Map);E(this,Ud,null);E(this,Bd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,Bd,e.order);for(const n of e.groups)u(this,We).set(n.id,new M6(t,n));if(e.baseState==="OFF")for(const n of u(this,We).values())n._setVisible(Vc,!1);for(const n of e.on)u(this,We).get(n)._setVisible(Vc,!0);for(const n of e.off)u(this,We).get(n)._setVisible(Vc,!1);A(this,Ud,this.getHash())}}isVisible(e){if(u(this,We).size===0)return!0;if(!e)return zy("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,We).has(e.id)?u(this,We).get(e.id).visible:(we(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,fp,Y0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,We).has(t))return we(`Optional content group not found: ${t}`),!0;if(u(this,We).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,We).has(t))return we(`Optional content group not found: ${t}`),!0;if(!u(this,We).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,We).has(t))return we(`Optional content group not found: ${t}`),!0;if(!u(this,We).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,We).has(t))return we(`Optional content group not found: ${t}`),!0;if(u(this,We).get(t).visible)return!1}return!0}return we(`Unknown optional content policy ${e.policy}.`),!0}return we(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=u(this,We).get(e);if(!r){we(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==e&&((i=u(this,We).get(l))==null||i._setVisible(Vc,!1,!0));r._setVisible(Vc,!!t,!0),A(this,$a,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=u(this,We).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}A(this,$a,null)}get hasInitialVisibility(){return u(this,Ud)===null||this.getHash()===u(this,Ud)}getOrder(){return u(this,We).size?u(this,Bd)?u(this,Bd).slice():[...u(this,We).keys()]:null}getGroups(){return u(this,We).size>0?g1(u(this,We)):null}getGroup(e){return u(this,We).get(e)||null}getHash(){if(u(this,$a)!==null)return u(this,$a);const e=new GT;for(const[t,n]of u(this,We))e.update(`${t}:${n.visible}`);return A(this,$a,e.hexdigest())}}$a=new WeakMap,We=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,fp=new WeakSet,Y0=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=C(this,fp,Y0).call(this,i);else if(u(this,We).has(i))a=u(this,We).get(i).visible;else return we(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class D6{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ct(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Ct(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new O6(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new F6(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class O6{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=x1(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class F6{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $6(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=a(s),t){const h=d(t);return i(h)}if(t=n("filename","i").exec(s),t){t=t[1];let h=l(t);return h=d(h),i(h)}function n(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(h,{fatal:!0}),m=Hy(f);f=p.decode(m),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function a(h){const f=[];let p;const m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,g,w,v]=p;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[w,v]}const y=[];for(let g=0;g<f.length&&g in f;++g){let[w,v]=f[g];v=l(v),w&&(v=unescape(v),g===0&&(v=c(v))),y.push(v)}return y.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const p=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return r(p,y)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),r(p,y);try{y=atob(y)}catch{}return r(p,y)})}return""}function o2(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function qy(s){try{return new URL(s).origin}catch{}return null}function l2({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function c2(s){const e=s.get("Content-Disposition");if(e){let t=$6(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(x1(t))return t}return null}function Gy(s,e){return s===404||s===0&&e.startsWith("file:")?new Pf('Missing PDF "'+e+'".'):new Pv(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s)}function d2(s){return s===200||s===206}function u2(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function h2(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(we(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class lj{constructor(e){ue(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=o2(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new U6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new B6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class U6{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,u2(n,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=qy(i.url),!d2(i.status))throw Gy(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:c}=l2({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=c2(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new No("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h2(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class B6{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const a=r.url;fetch(a,u2(i,this._withCredentials,this._abortController)).then(l=>{const c=qy(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!d2(l.status))throw Gy(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:h2(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Kx=200,Xx=206;function z6(s){const e=s.response;return typeof e!="string"?e:Hy(e).buffer}class H6{constructor({url:e,httpHeaders:t,withCredentials:n}){ue(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=o2(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Xx):r.expectedStatus=Kx,t.responseType="arraybuffer",Ct(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const i=r.status||Kx;if(!(i===Kx&&n.expectedStatus===Xx)&&i!==n.expectedStatus){n.onError(r.status);return}const l=z6(r);if(i===Xx){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(we('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class V6{constructor(e){this._source=e,this._manager=new H6(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W6(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new q6(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class W6{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=qy(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=l2({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=c2(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Gy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class q6{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=qy((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Gy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const G6=/^[a-z][a-z0-9\-+.]+:/i;function K6(s){if(G6.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class X6{constructor(e){this.source=e,this.url=K6(e.url),Ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Y6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Q6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Y6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Pf(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new No("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q6{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const J6=1e5,Ds=30,Z6=.8;var fj,Ua,Us,pp,mp,El,ki,gp,vp,Cl,zd,Hd,Ba,Vd,yp,Wd,Nl,xp,wp,kl,Pl,bp,za,qd,oa,f2,p2,Q0,Sn,jg,J0,m2,g2;const Tt=class Tt{constructor({textContentSource:e,container:t,viewport:n}){E(this,oa);E(this,Ua,Promise.withResolvers());E(this,Us,null);E(this,pp,!1);E(this,mp,!!((fj=globalThis.FontInspector)!=null&&fj.enabled));E(this,El,null);E(this,ki,null);E(this,gp,0);E(this,vp,0);E(this,Cl,null);E(this,zd,null);E(this,Hd,0);E(this,Ba,0);E(this,Vd,Object.create(null));E(this,yp,[]);E(this,Wd,null);E(this,Nl,[]);E(this,xp,new WeakMap);E(this,wp,null);var c;if(e instanceof ReadableStream)A(this,Wd,e);else if(typeof e=="object")A(this,Wd,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Us,A(this,zd,t)),A(this,Ba,n.scale*(globalThis.devicePixelRatio||1)),A(this,Hd,n.rotation),A(this,ki,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:l}=n.rawDims;A(this,wp,[1,0,0,-1,-a,l+i]),A(this,vp,r),A(this,gp,i),C(c=Tt,Sn,m2).call(c),bc(t,n),u(this,Ua).promise.finally(()=>{u(Tt,qd).delete(this),A(this,ki,null),A(this,Vd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ps.platform;return je(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Cl).read().then(({value:t,done:n})=>{if(n){u(this,Ua).resolve();return}u(this,El)??A(this,El,t.lang),Object.assign(u(this,Vd),t.styles),C(this,oa,f2).call(this,t.items),e()},u(this,Ua).reject)};return A(this,Cl,u(this,Wd).getReader()),u(Tt,qd).add(this),e(),u(this,Ua).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==u(this,Hd)&&(t==null||t(),A(this,Hd,r),bc(u(this,zd),{rotation:r})),n!==u(this,Ba)){t==null||t(),A(this,Ba,n);const a={div:null,properties:null,ctx:C(i=Tt,Sn,jg).call(i,u(this,El))};for(const l of u(this,Nl))a.properties=u(this,xp).get(l),a.div=l,C(this,oa,Q0).call(this,a)}}cancel(){var t;const e=new No("TextLayer task cancelled.");(t=u(this,Cl))==null||t.cancel(e).catch(()=>{}),A(this,Cl,null),u(this,Ua).reject(e)}get textDivs(){return u(this,Nl)}get textContentItemsStr(){return u(this,yp)}static cleanup(){if(!(u(this,qd).size>0)){u(this,kl).clear();for(const{canvas:e}of u(this,Pl).values())e.remove();u(this,Pl).clear()}}};Ua=new WeakMap,Us=new WeakMap,pp=new WeakMap,mp=new WeakMap,El=new WeakMap,ki=new WeakMap,gp=new WeakMap,vp=new WeakMap,Cl=new WeakMap,zd=new WeakMap,Hd=new WeakMap,Ba=new WeakMap,Vd=new WeakMap,yp=new WeakMap,Wd=new WeakMap,Nl=new WeakMap,xp=new WeakMap,wp=new WeakMap,kl=new WeakMap,Pl=new WeakMap,bp=new WeakMap,za=new WeakMap,qd=new WeakMap,oa=new WeakSet,f2=function(e){var r,i;if(u(this,pp))return;(i=u(this,ki)).ctx??(i.ctx=C(r=Tt,Sn,jg).call(r,u(this,El)));const t=u(this,Nl),n=u(this,yp);for(const a of e){if(t.length>J6){we("Ignoring additional textDivs for performance reasons."),A(this,pp,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=u(this,Us);A(this,Us,document.createElement("span")),u(this,Us).classList.add("markedContent"),a.id!==null&&u(this,Us).setAttribute("id",`${a.id}`),l.append(u(this,Us))}else a.type==="endMarkedContent"&&A(this,Us,u(this,Us).parentNode);continue}n.push(a.str),C(this,oa,p2).call(this,a)}},p2=function(e){var g;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Nl).push(t);const r=le.transform(u(this,wp),e.transform);let i=Math.atan2(r[1],r[0]);const a=u(this,Vd)[e.fontName];a.vertical&&(i+=Math.PI/2);let l=u(this,mp)&&a.fontSubstitution||a.fontFamily;l=Tt.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*C(g=Tt,Sn,g2).call(g,l,u(this,El));let h,f;i===0?(h=r[4],f=r[5]-d):(h=r[4]+d*Math.sin(i),f=r[5]-d*Math.cos(i));const p="calc(var(--scale-factor)*",m=t.style;u(this,Us)===u(this,zd)?(m.left=`${(100*h/u(this,vp)).toFixed(2)}%`,m.top=`${(100*f/u(this,gp)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(u(Tt,za)*c).toFixed(2)}px)`,m.fontFamily=l,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,mp)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(n.canvasWidth=a.vertical?e.height:e.width),u(this,xp).set(t,n),u(this,ki).div=t,u(this,ki).properties=n,C(this,oa,Q0).call(this,u(this,ki)),n.hasText&&u(this,Us).append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),u(this,Us).append(w)}},Q0=function(e){var l;const{div:t,properties:n,ctx:r}=e,{style:i}=t;let a="";if(u(Tt,za)>1&&(a=`scale(${1/u(Tt,za)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=n;C(l=Tt,Sn,J0).call(l,r,h*u(this,Ba),c);const{width:f}=r.measureText(t.textContent);f>0&&(a=`scaleX(${d*u(this,Ba)/f}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Sn=new WeakSet,jg=function(e=null){let t=u(this,Pl).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Pl).set(e,t),u(this,bp).set(t,{size:0,family:""})}return t},J0=function(e,t,n){const r=u(this,bp).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},m2=function(){if(u(this,za)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,za,e.getBoundingClientRect().height),e.remove()},g2=function(e,t){const n=u(this,kl).get(e);if(n)return n;const r=C(this,Sn,jg).call(this,t);r.canvas.width=r.canvas.height=Ds,C(this,Sn,J0).call(this,r,Ds,e);const i=r.measureText("");let a=i.fontBoundingBoxAscent,l=Math.abs(i.fontBoundingBoxDescent);if(a){const h=a/(a+l);return u(this,kl).set(e,h),r.canvas.width=r.canvas.height=0,h}r.strokeStyle="red",r.clearRect(0,0,Ds,Ds),r.strokeText("g",0,0);let c=r.getImageData(0,0,Ds,Ds).data;l=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){l=Math.ceil(h/4/Ds);break}r.clearRect(0,0,Ds,Ds),r.strokeText("A",0,Ds),c=r.getImageData(0,0,Ds,Ds).data,a=0;for(let h=0,f=c.length;h<f;h+=4)if(c[h]>0){a=Ds-Math.floor(h/4/Ds);break}r.canvas.width=r.canvas.height=0;const d=a?a/(a+l):Z6;return u(this,kl).set(e,d),d},E(Tt,Sn),E(Tt,kl,new Map),E(Tt,Pl,new Map),E(Tt,bp,new WeakMap),E(Tt,za,null),E(Tt,qd,new Set);let Tf=Tt;class Rf{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(Rf.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ez=65536,tz=100,sz=5e3,nz=ms?v6:p6,rz=ms?y6:t2,iz=ms?g6:m6,az=ms?x6:i2;function oz(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new Z0,{docId:t}=e,n=s.url?lz(s.url):null,r=s.data?cz(s.data):null,i=s.httpHeaders||null,a=s.withCredentials===!0,l=s.password??null,c=s.range instanceof v2?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:ez;let h=s.worker instanceof bd?s.worker:null;const f=s.verbosity,p=typeof s.docBaseUrl=="string"&&!Wy(s.docBaseUrl)?s.docBaseUrl:null,m=typeof s.cMapUrl=="string"?s.cMapUrl:null,y=s.cMapPacked!==!1,g=s.CMapReaderFactory||rz,w=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,v=s.StandardFontDataFactory||az,b=s.stopAtErrors!==!0,x=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,S=s.isEvalSupported!==!1,j=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ms,N=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ms&&(Ps.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,P=typeof s.disableFontFace=="boolean"?s.disableFontFace:ms,I=s.fontExtraProperties===!0,T=s.enableXfa===!0,M=s.ownerDocument||globalThis.document,U=s.disableRange===!0,z=s.disableStream===!0,B=s.disableAutoFetch===!0,J=s.pdfBug===!0,F=s.CanvasFactory||nz,W=s.FilterFactory||iz,D=s.enableHWA===!0,R=c?c.length:s.length??NaN,O=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ms&&!P,H=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:g===t2&&v===i2&&m&&w&&bh(m,document.baseURI)&&bh(w,document.baseURI),Q=null;qB(f);const ae={canvasFactory:new F({ownerDocument:M,enableHWA:D}),filterFactory:new W({docId:t,ownerDocument:M}),cMapReaderFactory:H?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:H?null:new v({baseUrl:w})};if(!h){const Ee={verbosity:f,port:Wi.workerPort};h=Ee.port?bd.fromPort(Ee):new bd(Ee),e._worker=h}const pe={docId:t,apiVersion:"4.10.38",data:r,password:l,disableAutoFetch:B,rangeChunkSize:d,length:R,docBaseUrl:p,enableXfa:T,evaluatorOptions:{maxImageSize:x,disableFontFace:P,ignoreErrors:b,isEvalSupported:S,isOffscreenCanvasSupported:j,isImageDecoderSupported:N,canvasMaxAreaInBytes:k,fontExtraProperties:I,useSystemFonts:O,cMapUrl:H?m:null,standardFontDataUrl:H?w:null}},Ie={disableFontFace:P,fontExtraProperties:I,ownerDocument:M,pdfBug:J,styleElement:Q,loadingParams:{disableAutoFetch:B,enableXfa:T}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ee=h.messageHandler.sendWithPromise("GetDocRequest",pe,r?[r.buffer]:null);let G;if(c)G=new D6(c,{disableRange:U,disableStream:z});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Te;if(ms)if(bh(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Te=lj}else Te=X6;else Te=bh(n)?lj:V6;G=new Te({url:n,length:R,httpHeaders:i,withCredentials:a,rangeChunkSize:d,disableRange:U,disableStream:z})}return Ee.then(Te=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const st=new jh(t,Te,h.port),$e=new fz(st,e,G,Ie,ae);e._transport=$e,st.send("Ready",null)})}).catch(e._capability.reject),e}function lz(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(ms&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cz(s){if(ms&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Hy(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cj(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var qv;const Gv=class Gv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${xs(Gv,qv)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};qv=new WeakMap,E(Gv,qv,0);let Z0=Gv;class v2{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Qe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class dz{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return je(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ha,Pi,Un,Wc,Eg;class uz{constructor(e,t,n,r=!1){E(this,Un);E(this,Ha,null);E(this,Pi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new XA:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new y2,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new mm({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return je(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=Ea.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1}){var S,j;(S=this._stats)==null||S.time("Overall");const p=this._transport.getRenderingIntent(n,r,h,f),{renderingIntent:m,cacheKey:y}=p;A(this,Pi,!1),C(this,Un,Eg).call(this),l||(l=this._transport.getOptionalContentConfig(m));let g=this._intentStates.get(y);g||(g=Object.create(null),this._intentStates.set(y,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const w=!!(m&fn.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(p));const v=N=>{var k;g.renderTasks.delete(b),(this._maybeCleanupAfterRender||w)&&A(this,Pi,!0),C(this,Un,Wc).call(this,!w),N?(b.capability.reject(N),this._abortOperatorList({intentState:g,reason:N instanceof Error?N:new Error(N)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new tb({callback:v,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:d});(g.renderTasks||(g.renderTasks=new Set)).add(b);const x=b.task;return Promise.all([g.displayReadyCapability.promise,l]).then(([N,k])=>{var P;if(this.destroyed){v();return}if((P=this._stats)==null||P.time("Rendering"),!(k.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:N,optionalContentConfig:k}),b.operatorListChanged()}).catch(v),x}getOperatorList({intent:e="display",annotationMode:t=Ea.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var d;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Rf.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){a.read().then(function({value:c,done:d}){if(d){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),A(this,Pi,!1),C(this,Un,Eg).call(this),Promise.all(e)}cleanup(e=!1){A(this,Pi,!0);const t=C(this,Un,Wc).call(this,!1);return e&&t&&this._stats&&(this._stats=new XA),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&C(this,Un,Wc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:f,done:p})=>{if(p){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const p of d.renderTasks)p.operatorListChanged();C(this,Un,Wc).call(this,!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof y1){let r=tz;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new No(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Ha=new WeakMap,Pi=new WeakMap,Un=new WeakSet,Wc=function(e=!1){if(C(this,Un,Eg).call(this),!u(this,Pi)||this.destroyed)return!1;if(e)return A(this,Ha,setTimeout(()=>{A(this,Ha,null),C(this,Un,Wc).call(this,!1)},sz)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Pi,!1),!0},Eg=function(){u(this,Ha)&&(clearTimeout(u(this,Ha)),A(this,Ha,null))};var Ti,Kv;class hz{constructor(){E(this,Ti,new Map);E(this,Kv,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,Kv).then(()=>{for(const[r]of u(this,Ti))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){we("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}u(this,Ti).set(t,r)}removeEventListener(e,t){const n=u(this,Ti).get(t);n==null||n(),u(this,Ti).delete(t)}terminate(){for(const[,e]of u(this,Ti))e==null||e();u(this,Ti).clear()}}Ti=new WeakMap,Kv=new WeakMap;var Xv,Tl,Rl,Gd,Cg,Kd,Ng;const ot=class ot{constructor({name:e=null,port:t=null,verbosity:n=GB()}={}){E(this,Gd);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=u(ot,Rl))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(ot,Rl)||A(ot,Rl,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new jh("main","worker",e),this._messageHandler.on("ready",function(){}),C(this,Gd,Cg).call(this)}_initialize(){if(u(ot,Tl)||u(ot,Kd,Ng)){this._setupFakeWorker();return}let{workerSrc:e}=ot;try{ot._isSameOrigin(window.location.href,e)||(e=ot._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new jh("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:i.signal}),n.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,C(this,Gd,Cg).call(this)}),n.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{zy("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(ot,Tl)||(we("Setting up fake worker."),A(ot,Tl,!0)),ot._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new hz;this._port=t;const n=`fake${xs(ot,Xv)._++}`,r=new jh(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new jh(n,n+"_worker",t),C(this,Gd,Cg).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=u(ot,Rl))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=u(this,Rl))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ot(e)}static get workerSrc(){if(Wi.workerSrc)return Wi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return je(this,"_setupFakeWorkerGlobal",(async()=>u(this,Kd,Ng)?u(this,Kd,Ng):(await import(this.workerSrc)).WorkerMessageHandler)())}};Xv=new WeakMap,Tl=new WeakMap,Rl=new WeakMap,Gd=new WeakSet,Cg=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Kd=new WeakSet,Ng=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(ot,Kd),E(ot,Xv,0),E(ot,Tl,!1),E(ot,Rl),ms&&(A(ot,Tl,!0),Wi.workerSrc||(Wi.workerSrc="./pdf.worker.mjs")),ot._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},ot._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let bd=ot;var Ri,Hr,Xd,Yd,Ii,Il,Ph;class fz{constructor(e,t,n,r,i){E(this,Il);E(this,Ri,new Map);E(this,Hr,new Map);E(this,Xd,new Map);E(this,Yd,new Map);E(this,Ii,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new y2,this.fontLoader=new h6({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return je(this,"annotationStorage",new _1)}getRenderingIntent(e,t=Ea.ENABLE,n=null,r=!1,i=!1){let a=fn.DISPLAY,l=z0;switch(e){case"any":a=fn.ANY;break;case"display":break;case"print":a=fn.PRINT;break;default:we(`getRenderingIntent - invalid intent: ${e}`)}const c=a&fn.PRINT&&n instanceof XT?n:this.annotationStorage;switch(t){case Ea.DISABLE:a+=fn.ANNOTATIONS_DISABLE;break;case Ea.ENABLE:break;case Ea.ENABLE_FORMS:a+=fn.ANNOTATIONS_FORMS;break;case Ea.ENABLE_STORAGE:a+=fn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:we(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=fn.IS_EDITING),i&&(a+=fn.OPLIST);const{ids:d,hash:h}=c.modifiedIds,f=[a,l.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Ii))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,Hr).values())e.push(r._destroy());u(this,Hr).clear(),u(this,Xd).clear(),u(this,Yd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Ri).clear(),this.filterFactory.destroy(),Tf.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new No("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){r.close();return}Ct(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{Ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){r.close();return}Ct(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new dz(n,this))}),e.on("DocException",n=>{t._capability.reject(Os(n))}),e.on("PasswordRequest",n=>{A(this,Ii,Promise.withResolvers());try{if(!t.onPassword)throw Os(n);const r=i=>{i instanceof Error?u(this,Ii).reject(i):u(this,Ii).resolve({password:i})};t.onPassword(r,n.code)}catch(r){u(this,Ii).reject(r)}return u(this,Ii).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,Hr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:d}=this._params;if("error"in i){const m=i.error;we(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const h=d&&((a=globalThis.FontInspector)!=null&&a.enabled)?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,f=new f6(i,{disableFontFace:l,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=i;Ct(p,"The imageRef must be defined.");for(const m of u(this,Hr).values())for(const[,y]of m.objs)if((y==null?void 0:y.ref)===p)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,a])=>{var c;if(this.destroyed)return;const l=u(this,Hr).get(r);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>zB&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&we("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,Xd).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,Yd).set(i.refStr,e);const a=new uz(t,i,this,this._params.pdfBug);return u(this,Hr).set(t,a),a});return u(this,Xd).set(t,r),r}getPageIndex(e){return cj(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,Il,Ph).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Il,Ph).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,Il,Ph).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,Il,Ph).call(this,"GetOptionalContentConfig").then(t=>new L6(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Ri).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new I6(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,Ri).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Hr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Ri).clear(),this.filterFactory.destroy(!0),Tf.cleanup()}}cachedPageNumber(e){if(!cj(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Yd).get(t)??null}}Ri=new WeakMap,Hr=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,Ii=new WeakMap,Il=new WeakSet,Ph=function(e,t=null){const n=u(this,Ri).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return u(this,Ri).set(e,r),r};const fh=Symbol("INITIAL_DATA");var nn,_p,eb;class y2{constructor(){E(this,_p);E(this,nn,Object.create(null))}get(e,t=null){if(t){const r=C(this,_p,eb).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=u(this,nn)[e];if(!n||n.data===fh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,nn)[e];return!!t&&t.data!==fh}delete(e){const t=u(this,nn)[e];return!t||t.data===fh?!1:(delete u(this,nn)[e],!0)}resolve(e,t=null){const n=C(this,_p,eb).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,nn)){const{data:n}=u(this,nn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}A(this,nn,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,nn)){const{data:t}=u(this,nn)[e];t!==fh&&(yield[e,t])}}}nn=new WeakMap,_p=new WeakSet,eb=function(e){var t;return(t=u(this,nn))[e]||(t[e]={...Promise.withResolvers(),data:fh})};var Va;class pz{constructor(e){E(this,Va,null);A(this,Va,e),this.onContinue=null}get promise(){return u(this,Va).capability.promise}cancel(e=0){u(this,Va).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,Va).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,Va);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Va=new WeakMap;var Wa,Ml;const Jo=class Jo{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:p=null}){E(this,Wa,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new pz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(Jo,Ml).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Jo,Ml).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:i,background:a}=this.params;this.gfx=new wd(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,Wa)&&(window.cancelAnimationFrame(u(this,Wa)),A(this,Wa,null)),u(Jo,Ml).delete(this._canvas),this.callback(e||new y1(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Wa,window.requestAnimationFrame(()=>{A(this,Wa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Jo,Ml).delete(this._canvas),this.callback())))}};Wa=new WeakMap,Ml=new WeakMap,E(Jo,Ml,new WeakSet);let tb=Jo;const mz="4.10.38",gz="f9bea397f";function dj(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function ph(s){return Math.max(0,Math.min(255,255*s))}class uj{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ph(e),[e,e,e]}static G_HTML([e]){const t=dj(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(ph)}static RGB_HTML(e){return`#${e.map(dj).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[ph(1-Math.min(1,e+r)),ph(1-Math.min(1,n+r)),ph(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,a=1-n,l=Math.min(r,i,a);return["CMYK",r,i,a,l]}}class vz{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Qe("Abstract method `_createSVG` called.")}}class A1 extends vz{_createSVG(e){return document.createElementNS(hi,e)}}class x2{static setupStorage(e,t,n,r,i){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var f,p;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});const l=i!=="richText",c=e.div;if(c.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);a.append(m),l&&Rf.shouldBuildText(r.name)&&d.push(m)}return{textDivs:d}}const h=[[r,-1,a]];for(;h.length>0;){const[m,y,g]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const w=m.children[++h.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const x=document.createTextNode(w.value);d.push(x),g.append(x);continue}const b=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(b),w.attributes&&this.setAttributes({html:b,element:w,storage:t,intent:i,linkService:n}),((p=w.children)==null?void 0:p.length)>0)h.push([w,-1,b]);else if(w.value){const x=document.createTextNode(w.value);l&&Rf.shouldBuildText(v)&&d.push(x),b.append(x)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const vm=1e3,yz=9,Sc=new WeakSet;function yo(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class xz{static create(e){switch(e.data.annotationType){case kt.LINK:return new w2(e);case kt.TEXT:return new wz(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new bz(e);case"Btn":return e.data.radioButton?new S2(e):e.data.checkBox?new Sz(e):new Az(e);case"Ch":return new jz(e);case"Sig":return new _z(e)}return new Nc(e);case kt.POPUP:return new nb(e);case kt.FREETEXT:return new N2(e);case kt.LINE:return new Cz(e);case kt.SQUARE:return new Nz(e);case kt.CIRCLE:return new kz(e);case kt.POLYLINE:return new k2(e);case kt.CARET:return new Tz(e);case kt.INK:return new j1(e);case kt.POLYGON:return new Pz(e);case kt.HIGHLIGHT:return new P2(e);case kt.UNDERLINE:return new Rz(e);case kt.SQUIGGLY:return new Iz(e);case kt.STRIKEOUT:return new Mz(e);case kt.STAMP:return new T2(e);case kt.FILEATTACHMENT:return new Lz(e);default:return new At(e)}}}var Ll,Qd,Jd,Sp,sb;const k1=class k1{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){E(this,Sp);E(this,Ll,null);E(this,Qd,!1);E(this,Jd,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return k1._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;u(this,Ll)||A(this,Ll,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&C(this,Sp,sb).call(this,t),(n=u(this,Jd))==null||n.popup.updateEdited(e)}resetEdited(){var e;u(this,Ll)&&(C(this,Sp,sb).call(this,u(this,Ll).rect),(e=u(this,Jd))==null||e.popup.resetEdited(),A(this,Ll,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Nc||(i.tabIndex=vm);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof nb){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:l,height:c}=yo(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(g>0||w>0){const b=`calc(${g}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;a.borderRadius=b}else if(this instanceof S2){const b=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=b}switch(t.borderStyle.style){case uh.SOLID:a.borderStyle="solid";break;case uh.DASHED:a.borderStyle="dashed";break;case uh.BEVELED:we("Unimplemented border style: beveled");break;case uh.INSET:we("Unimplemented border style: inset");break;case uh.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(A(this,Qd,!0),a.borderColor=le.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const d=le.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:f,pageX:p,pageY:m}=r.rawDims;a.left=`${100*(d[0]-p)/h}%`,a.top=`${100*(d[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*l/h}%`,a.height=`${100*c/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:a}=yo(this.data.rect);let l,c;e%180===0?(l=100*i/n,c=100*a/r):(l=100*a/n,c=100*i/r),t.style.width=`${l}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],a=i[0],l=i.slice(1);r.target.style[n]=uj[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:uj[`${a}_rgb`](l)})};return je(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const a=n[r];if(a){const l={detail:{[r]:i},target:e};a(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,w,v,b]=e.subarray(2,6);if(r===g&&i===w&&t===v&&n===b)return}const{style:a}=this.container;let l;if(u(this,Qd)){const{borderColor:g,borderWidth:w}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=r-t,d=i-n,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=h.createElement("defs");f.append(p);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let g=2,w=e.length;g<w;g+=8){const v=e[g],b=e[g+1],x=e[g+2],S=e[g+3],j=h.createElement("rect"),N=(x-t)/c,k=(i-b)/d,P=(v-x)/c,I=(b-S)/d;j.setAttribute("x",N),j.setAttribute("y",k),j.setAttribute("width",P),j.setAttribute("height",I),m.append(j),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${k}" width="${P}" height="${I}"/>`)}u(this,Qd)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,t=A(this,Jd,new nb({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Qe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:l}of r){if(i===-1||a===t)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Sc.has(d)){we(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:d})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&Sc.has(r)&&n.push({id:a,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ll=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Sp=new WeakSet,sb=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:d,height:h}=yo(e);t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*d/i}%`,t.height=`${100*h/a}%`):this.setRotation(r)};let At=k1;var gn,Go,b2,_2;class w2 extends At{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,gn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action),i=!0):t.attachment?(C(this,gn,b2).call(this,r,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(C(this,gn,_2).call(this,r,t.setOCGState),i=!0):t.dest?(this._bindLink(r,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&C(this,gn,Go).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),C(this,gn,Go).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=r.get(i);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),C(this,gn,Go).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),C(this,gn,Go).call(this),!this._fieldObjects){we('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:a,include:l}=n,c=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)p.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===l&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const g=p.defaultValue||"";d.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=p.defaultValue===p.exportValues;d.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=p.defaultValue||"";d.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Sc.has(y)){we(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}gn=new WeakSet,Go=function(){this.container.setAttribute("data-internal-link","")},b2=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(n.content,n.filename,r),!1},C(this,gn,Go).call(this)},_2=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),C(this,gn,Go).call(this)};class wz extends At{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Nc extends At{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ps.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var l;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,n,r){var i,a,l;for(const[c,d]of n)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,r),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":le.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||yz,i=e.style;let a;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Hx*r))||1,f=d/h;a=Math.min(r,c(f/Hx))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(d/Hx))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=le.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class bz extends Nc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Sc.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=vm,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";n.value=h.userValue=m,h.formattedValue=null});let f=p=>{const{formattedValue:m}=h;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",m=>{var g;if(h.focused)return;const{target:y}=m;h.userValue&&(y.value=h.userValue),h.lastCommittedValue=y.value,h.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(g){h.userValue=g.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),g.target.value=h.userValue},formattedValue(g){const{formattedValue:w}=g.detail;h.formattedValue=w,w!=null&&g.target!==document.activeElement&&(g.target.value=w),e.setValue(t,{formattedValue:w})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var x;const{charLimit:w}=g.detail,{target:v}=g;if(w===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",w);let b=h.userValue;!b||b.length<=w||(b=b.slice(0,w),v.value=h.userValue=b,e.setValue(t,{value:b}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),n.addEventListener("keydown",m=>{var w;h.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:g}=m.target;h.lastCommittedValue!==g&&(h.lastCommittedValue=g,h.userValue=g,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,n.addEventListener("blur",m=>{var g,w;if(!h.focused||!m.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(h.focused=!1);const{value:y}=m.target;h.userValue=y,h.lastCommittedValue!==y&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",m=>{var j;h.lastCommittedValue=null;const{data:y,target:g}=m,{value:w,selectionStart:v,selectionEnd:b}=g;let x=v,S=b;switch(m.inputType){case"deleteWordBackward":{const N=w.substring(0,v).match(/\w*[^\w]*$/);N&&(x-=N[0].length);break}case"deleteWordForward":{const N=w.substring(v).match(/^[^\w]*\w*/);N&&(S+=N[0].length);break}case"deleteContentBackward":v===b&&(x-=1);break;case"deleteContentForward":v===b&&(S+=1);break}m.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:y||"",willCommit:!1,selStart:x,selEnd:S}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class _z extends Nc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Sz extends Nc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Sc.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=vm,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,n)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class S2 extends Nc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Sc.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=vm,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=a===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const p=h&&f.id===n;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Az extends w2{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class jz extends Nc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Sc.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=vm;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const p of r.options)p.selected=p.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,n.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=h=>{const f=h?"value":"textContent",{options:p,multiple:m}=r;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=l(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(p){a==null||a();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of r.options)g.selected=y.has(g.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(p){r.multiple=!0},remove(p){const m=r.options,y=p.detail.remove;m[y].selected=!1,r.remove(y),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:d(p)}),c=l(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(p){const{index:m,displayValue:y,exportValue:g}=p.detail.insert,w=r.children[m],v=document.createElement("option");v.textContent=y,v.value=g,w?w.before(v):r.append(v),e.setValue(t,{value:l(!0),items:d(p)}),c=l(!1)},items(p){const{items:m}=p.detail;for(;r.length!==0;)r.remove(0);for(const y of m){const{displayValue:g,exportValue:w}=y,v=document.createElement("option");v.textContent=g,v.value=w,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(p)}),c=l(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var m;const f=l(!0),p=l(!1);e.setValue(t,{value:f}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class nb extends At{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:At._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Ez({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${v1}${n}`).join(",")),this.container}}var Zd,Yv,Qv,eu,Dl,xt,Mi,tu,Ap,jp,su,Li,ar,Di,Ep,Oi,Cp,Ol,Fl,Xe,kg,rb,A2,j2,E2,C2,Pg,Tg,ib;class Ez{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:a,richText:l,parent:c,rect:d,parentRect:h,open:f}){E(this,Xe);E(this,Zd,C(this,Xe,E2).bind(this));E(this,Yv,C(this,Xe,ib).bind(this));E(this,Qv,C(this,Xe,Tg).bind(this));E(this,eu,C(this,Xe,Pg).bind(this));E(this,Dl,null);E(this,xt,null);E(this,Mi,null);E(this,tu,null);E(this,Ap,null);E(this,jp,null);E(this,su,null);E(this,Li,!1);E(this,ar,null);E(this,Di,null);E(this,Ep,null);E(this,Oi,null);E(this,Cp,null);E(this,Ol,null);E(this,Fl,!1);var p;A(this,xt,e),A(this,Cp,r),A(this,Mi,a),A(this,Oi,l),A(this,jp,c),A(this,Dl,t),A(this,Ep,d),A(this,su,h),A(this,Ap,n),A(this,tu,w1.toDateObject(i)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",u(this,eu)),m.addEventListener("mouseenter",u(this,Qv)),m.addEventListener("mouseleave",u(this,Yv)),m.classList.add("popupTriggerArea");for(const m of n)(p=m.container)==null||p.addEventListener("keydown",u(this,Zd));u(this,xt).hidden=!0,f&&C(this,Xe,Pg).call(this)}render(){if(u(this,ar))return;const e=A(this,ar,document.createElement("div"));if(e.className="popup",u(this,Dl)){const i=e.style.outlineColor=le.makeHexColor(...u(this,Dl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=le.makeHexColor(...u(this,Dl).map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=u(this,Cp),e.append(t),u(this,tu)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,tu).valueOf()})),t.append(i)}const r=u(this,Xe,kg);if(r)x2.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(u(this,Mi));e.append(i)}u(this,xt).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,a=r.length;i<a;++i){const l=r[i];n.append(document.createTextNode(l)),i<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;u(this,Ol)||A(this,Ol,{contentsObj:u(this,Mi),richText:u(this,Oi)}),e&&A(this,Di,null),t&&(A(this,Oi,C(this,Xe,j2).call(this,t)),A(this,Mi,null)),(n=u(this,ar))==null||n.remove(),A(this,ar,null)}resetEdited(){var e;u(this,Ol)&&({contentsObj:xs(this,Mi)._,richText:xs(this,Oi)._}=u(this,Ol),A(this,Ol,null),(e=u(this,ar))==null||e.remove(),A(this,ar,null),A(this,Di,null))}forceHide(){A(this,Fl,this.isVisible),u(this,Fl)&&(u(this,xt).hidden=!0)}maybeShow(){u(this,Fl)&&(u(this,ar)||C(this,Xe,Tg).call(this),A(this,Fl,!1),u(this,xt).hidden=!1)}get isVisible(){return u(this,xt).hidden===!1}}Zd=new WeakMap,Yv=new WeakMap,Qv=new WeakMap,eu=new WeakMap,Dl=new WeakMap,xt=new WeakMap,Mi=new WeakMap,tu=new WeakMap,Ap=new WeakMap,jp=new WeakMap,su=new WeakMap,Li=new WeakMap,ar=new WeakMap,Di=new WeakMap,Ep=new WeakMap,Oi=new WeakMap,Cp=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,Xe=new WeakSet,kg=function(){const e=u(this,Oi),t=u(this,Mi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Oi).html||null},rb=function(){var e,t,n;return((n=(t=(e=u(this,Xe,kg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},A2=function(){var e,t,n;return((n=(t=(e=u(this,Xe,kg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},j2=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,Xe,A2),fontSize:u(this,Xe,rb)?`calc(${u(this,Xe,rb)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},E2=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Li))&&C(this,Xe,Pg).call(this)},C2=function(){if(u(this,Di)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=u(this,jp);let a=!!u(this,su),l=a?u(this,su):u(this,Ep);for(const y of u(this,Ap))if(!l||le.intersect(y.data.rect,l)!==null){l=y.data.rect,a=!0;break}const c=le.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=a?l[2]-l[0]+5:0,f=c[0]+h,p=c[1];A(this,Di,[100*(f-r)/t,100*(p-i)/n]);const{style:m}=u(this,xt);m.left=`${u(this,Di)[0]}%`,m.top=`${u(this,Di)[1]}%`},Pg=function(){A(this,Li,!u(this,Li)),u(this,Li)?(C(this,Xe,Tg).call(this),u(this,xt).addEventListener("click",u(this,eu)),u(this,xt).addEventListener("keydown",u(this,Zd))):(C(this,Xe,ib).call(this),u(this,xt).removeEventListener("click",u(this,eu)),u(this,xt).removeEventListener("keydown",u(this,Zd)))},Tg=function(){u(this,ar)||this.render(),this.isVisible?u(this,Li)&&u(this,xt).classList.add("focused"):(C(this,Xe,C2).call(this),u(this,xt).hidden=!1,u(this,xt).style.zIndex=parseInt(u(this,xt).style.zIndex)+1e3)},ib=function(){u(this,xt).classList.remove("focused"),!(u(this,Li)||!this.isVisible)&&(u(this,xt).hidden=!0,u(this,xt).style.zIndex=parseInt(u(this,xt).style.zIndex)-1e3)};class N2 extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Np;class Cz extends At{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Np,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=yo(t.rect),i=this.svgFactory.create(n,r,!0),a=A(this,Np,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Np)}addHighlightArea(){this.container.classList.add("highlightArea")}}Np=new WeakMap;var kp;class Nz extends At{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,kp,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=yo(t.rect),i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,l=A(this,kp,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",r-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,kp)}addHighlightArea(){this.container.classList.add("highlightArea")}}kp=new WeakMap;var Pp;class kz extends At{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Pp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=yo(t.rect),i=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,l=A(this,Pp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",r/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",r/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pp=new WeakMap;var Tp;class k2 extends At{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Tp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i}}=this;if(!n)return this.container;const{width:a,height:l}=yo(t),c=this.svgFactory.create(a,l,!0);let d=[];for(let f=0,p=n.length;f<p;f+=2){const m=n[f]-t[0],y=t[3]-n[f+1];d.push(`${m},${y}`)}d=d.join(" ");const h=A(this,Tp,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Tp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tp=new WeakMap;class Pz extends k2{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Tz extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Rp,$l,Ip,ab;class j1 extends At{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Ip);E(this,Rp,null);E(this,$l,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xe.HIGHLIGHT:xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:d}=C(this,Ip,ab).call(this,n,t),h=this.svgFactory.create(c,d,!0),f=A(this,Rp,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let p=0,m=r.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);u(this,$l).push(y),y.setAttribute("points",r[p].join(",")),f.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,a=u(this,Rp);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let l=0,c=u(this,$l).length;l<c;l++)u(this,$l)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:d}=C(this,Ip,ab).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return u(this,$l)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rp=new WeakMap,$l=new WeakMap,Ip=new WeakSet,ab=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class P2 extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Rz extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Iz extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Mz extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class T2 extends At{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Mp,Lp,ob;class Lz extends At{constructor(t){var r;super(t,{isRenderable:!0});E(this,Lp);E(this,Mp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",C(this,Lp,ob).bind(this)),A(this,Mp,r);const{isMac:i}=Ps.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&C(this,Lp,ob).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mp=new WeakMap,Lp=new WeakSet,ob=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Dp,Ul,Bl,Op,Ac,R2,lb;class Dz{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:l}){E(this,Ac);E(this,Dp,null);E(this,Ul,null);E(this,Bl,new Map);E(this,Op,null);this.div=e,A(this,Dp,t),A(this,Ul,n),A(this,Op,l||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return u(this,Bl).size>0}async render(e){var a;const{annotations:t}=e,n=this.div;bc(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new A1,annotationStorage:e.annotationStorage||new _1,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===kt.POPUP;if(c){const f=r.get(l.id);if(!f)continue;i.elements=f}else{const{width:f,height:p}=yo(l.rect);if(f<=0||p<=0)continue}i.data=l;const d=xz.create(i);if(!d.isRenderable)continue;if(!c&&l.popupRef){const f=r.get(l.popupRef);f?f.push(d):r.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await C(this,Ac,R2).call(this,h,l.id),d._isEditable&&(u(this,Bl).set(d.data.id,d),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(d))}C(this,Ac,lb).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,bc(t,{rotation:e.rotation}),C(this,Ac,lb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Bl).values())}getEditableAnnotation(e){return u(this,Bl).get(e)}}Dp=new WeakMap,Ul=new WeakMap,Bl=new WeakMap,Op=new WeakMap,Ac=new WeakSet,R2=async function(e,t){var a,l;const n=e.firstChild||e,r=n.id=`${v1}${t}`,i=await((a=u(this,Op))==null?void 0:a.getAriaAttributes(r));if(i)for(const[c,d]of i)n.setAttribute(c,d);this.div.append(e),(l=u(this,Dp))==null||l.moveElementInDOM(this.div,e,n,!1)},lb=function(){if(!u(this,Ul))return;const e=this.div;for(const[t,n]of u(this,Ul)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:i}=r;i?i.nodeName==="CANVAS"?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):r.append(n)}u(this,Ul).clear()};const Ym=/\r\n?|\n/g;var or,rn,Fp,zl,an,Nt,I2,M2,L2,Rg,Zi,Ig,Mg,D2,db,O2;const Ze=class Ze extends pt{constructor(t){super({...t,name:"freeTextEditor"});E(this,Nt);E(this,or);E(this,rn,"");E(this,Fp,`${this.id}-editor`);E(this,zl,null);E(this,an);A(this,or,t.color||Ze._defaultColor||pt._defaultLineColor),A(this,an,t.fontSize||Ze._defaultFontSize)}static get _keyboardManager(){const t=Ze.prototype,n=a=>a.isEmpty(),r=_c.TRANSLATE_SMALL,i=_c.TRANSLATE_BIG;return je(this,"_keyboardManager",new gm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){pt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Re.FREETEXT_SIZE:Ze._defaultFontSize=n;break;case Re.FREETEXT_COLOR:Ze._defaultColor=n;break}}updateParams(t,n){switch(t){case Re.FREETEXT_SIZE:C(this,Nt,I2).call(this,n);break;case Re.FREETEXT_COLOR:C(this,Nt,M2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Re.FREETEXT_SIZE,Ze._defaultFontSize],[Re.FREETEXT_COLOR,Ze._defaultColor||pt._defaultLineColor]]}get propertiesToUpdate(){return[[Re.FREETEXT_SIZE,u(this,an)],[Re.FREETEXT_COLOR,u(this,or)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ze._internalPadding*t,-(Ze._internalPadding+u(this,an))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,zl,new AbortController);const t=this._uiManager.combinedSignal(u(this,zl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Fp)),this._isDraggable=!0,(t=u(this,zl))==null||t.abort(),A(this,zl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,rn),n=A(this,rn,C(this,Nt,L2).call(this).trimEnd());if(t===n)return;const r=i=>{if(A(this,rn,i),!i){this.remove();return}C(this,Nt,Mg).call(this),this._uiManager.rebuild(this),C(this,Nt,Rg).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),C(this,Nt,Rg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ze._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Fp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,an)}px * var(--scale-factor))`,r.color=u(this,or),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Tv(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(l[0]-p)/h,g=n+this.height-(l[1]-m)/f;break;case 90:y=t+(l[0]-p)/h,g=n-(l[1]-m)/f,[c,d]=[d,-c];break;case 180:y=t-this.width+(l[0]-p)/h,g=n-(l[1]-m)/f,[c,d]=[-c,-d];break;case 270:y=t+(l[0]-p-this.height*f)/h,g=n+(l[1]-m-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(y*i,g*a,c,d)}else this.setAt(t*i,n*a,this.width*i,this.height*a);C(this,Nt,Mg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,w;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=C(y=Ze,Zi,db).call(y,n.getData("text")||"").replaceAll(Ym,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Ym,"")),v!==this.editorDiv){let b=h;for(const x of this.editorDiv.childNodes){if(x===v){b=f;continue}b.push(C(g=Ze,Zi,Ig).call(g,x))}}h.push(c.nodeValue.slice(0,d).replaceAll(Ym,""))}else if(c===this.editorDiv){let v=h,b=0;for(const x of this.editorDiv.childNodes)b++===d&&(v=f),v.push(C(w=Ze,Zi,Ig).call(w,x))}A(this,rn,`${h.join(`
`)}${i}${f.join(`
`)}`),C(this,Nt,Mg).call(this);const p=new Range;let m=h.reduce((v,b)=>v+b.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(m<=b){p.setStart(v,m),p.setEnd(v,m);break}m-=b}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var l;let i=null;if(t instanceof N2){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:f,id:p,popupRef:m},textContent:y,textPosition:g,parent:{page:{pageNumber:w}}}=t;if(!y||y.length===0)return null;i=t={annotationType:xe.FREETEXT,color:Array.from(d),fontSize:c,value:y.join(`
`),position:g,pageIndex:w-1,rect:h.slice(0),rotation:f,id:p,deleted:!1,popupRef:m}}const a=await super.deserialize(t,n,r);return A(a,an,t.fontSize),A(a,or,le.makeHexColor(...t.color)),A(a,rn,C(l=Ze,Zi,db).call(l,t.value)),a.annotationElementId=t.id||null,a._initialData=i,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ze._internalPadding*this.parentScale,r=this.getRect(n,n),i=pt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,or)),a={annotationType:xe.FREETEXT,color:i,fontSize:u(this,an),value:C(this,Nt,D2).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!C(this,Nt,O2).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${u(this,an)}px * var(--scale-factor))`,r.color=u(this,or),n.replaceChildren();for(const a of u(this,rn).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const i=Ze._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:u(this,rn)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};or=new WeakMap,rn=new WeakMap,Fp=new WeakMap,zl=new WeakMap,an=new WeakMap,Nt=new WeakSet,I2=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-u(this,an))*this.parentScale),A(this,an,i),C(this,Nt,Rg).call(this)},r=u(this,an);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M2=function(t){const n=i=>{A(this,or,this.editorDiv.style.color=i)},r=u(this,or);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L2=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(C(r=Ze,Zi,Ig).call(r,i)),n=i);return t.join(`
`)},Rg=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Zi=new WeakSet,Ig=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ym,"")},Mg=function(){if(this.editorDiv.replaceChildren(),!!u(this,rn))for(const t of u(this,rn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},D2=function(){return u(this,rn).replaceAll(""," ")},db=function(t){return t.replaceAll(" ","")},O2=function(t){const{value:n,fontSize:r,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a},E(Ze,Zi),ue(Ze,"_freeTextDefaultContent",""),ue(Ze,"_internalPadding",0),ue(Ze,"_defaultColor",null),ue(Ze,"_defaultFontSize",10),ue(Ze,"_type","freetext"),ue(Ze,"_editorType",xe.FREETEXT);let cb=Ze;class se{toSVGPath(){Qe("Abstract method `toSVGPath` must be implemented.")}get box(){Qe("Abstract getter `box` must be implemented.")}serialize(e,t){Qe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l]*r,a[l+1]=n+e[l+1]*i;return a}static _rescaleAndSwap(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l+1]*r,a[l+1]=n+e[l]*i;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+a)/6,(n+i)/2,(r+a)/2]}}ue(se,"PRECISION",1e-4);var on,lr,nu,ru,Vr,Ae,Hl,Vl,$p,Up,iu,au,qa,Bp,Jv,Zv,Ot,Th,F2,$2,U2,B2,z2,H2;const yi=class yi{constructor({x:e,y:t},n,r,i,a,l=0){E(this,Ot);E(this,on);E(this,lr,[]);E(this,nu);E(this,ru);E(this,Vr,[]);E(this,Ae,new Float32Array(18));E(this,Hl);E(this,Vl);E(this,$p);E(this,Up);E(this,iu);E(this,au);E(this,qa,[]);A(this,on,n),A(this,au,i*r),A(this,ru,a),u(this,Ae).set([NaN,NaN,NaN,NaN,e,t],6),A(this,nu,l),A(this,Up,u(yi,Bp)*r),A(this,$p,u(yi,Zv)*r),A(this,iu,r),u(this,qa).push(e,t)}isEmpty(){return isNaN(u(this,Ae)[8])}add({x:e,y:t}){var I;A(this,Hl,e),A(this,Vl,t);const[n,r,i,a]=u(this,on);let[l,c,d,h]=u(this,Ae).subarray(8,12);const f=e-d,p=t-h,m=Math.hypot(f,p);if(m<u(this,$p))return!1;const y=m-u(this,Up),g=y/m,w=g*f,v=g*p;let b=l,x=c;l=d,c=h,d+=w,h+=v,(I=u(this,qa))==null||I.push(e,t);const S=-v/y,j=w/y,N=S*u(this,au),k=j*u(this,au);return u(this,Ae).set(u(this,Ae).subarray(2,8),0),u(this,Ae).set([d+N,h+k],4),u(this,Ae).set(u(this,Ae).subarray(14,18),12),u(this,Ae).set([d-N,h-k],16),isNaN(u(this,Ae)[6])?(u(this,Vr).length===0&&(u(this,Ae).set([l+N,c+k],2),u(this,Vr).push(NaN,NaN,NaN,NaN,(l+N-n)/i,(c+k-r)/a),u(this,Ae).set([l-N,c-k],14),u(this,lr).push(NaN,NaN,NaN,NaN,(l-N-n)/i,(c-k-r)/a)),u(this,Ae).set([b,x,l,c,d,h],6),!this.isEmpty()):(u(this,Ae).set([b,x,l,c,d,h],6),Math.abs(Math.atan2(x-c,b-l)-Math.atan2(v,w))<Math.PI/2?([l,c,d,h]=u(this,Ae).subarray(2,6),u(this,Vr).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/i,((c+h)/2-r)/a),[l,c,b,x]=u(this,Ae).subarray(14,18),u(this,lr).push(NaN,NaN,NaN,NaN,((b+l)/2-n)/i,((x+c)/2-r)/a),!0):([b,x,l,c,d,h]=u(this,Ae).subarray(0,6),u(this,Vr).push(((b+5*l)/6-n)/i,((x+5*c)/6-r)/a,((5*l+d)/6-n)/i,((5*c+h)/6-r)/a,((l+d)/2-n)/i,((c+h)/2-r)/a),[d,h,l,c,b,x]=u(this,Ae).subarray(12,18),u(this,lr).push(((b+5*l)/6-n)/i,((x+5*c)/6-r)/a,((5*l+d)/6-n)/i,((5*c+h)/6-r)/a,((l+d)/2-n)/i,((c+h)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Vr),t=u(this,lr);if(isNaN(u(this,Ae)[6])&&!this.isEmpty())return C(this,Ot,F2).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);C(this,Ot,U2).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return C(this,Ot,$2).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,a){return new V2(e,t,n,r,i,a)}getOutlines(){var f;const e=u(this,Vr),t=u(this,lr),n=u(this,Ae),[r,i,a,l]=u(this,on),c=new Float32Array((((f=u(this,qa))==null?void 0:f.length)??0)+2);for(let p=0,m=c.length-2;p<m;p+=2)c[p]=(u(this,qa)[p]-r)/a,c[p+1]=(u(this,qa)[p+1]-i)/l;if(c[c.length-2]=(u(this,Hl)-r)/a,c[c.length-1]=(u(this,Vl)-i)/l,isNaN(n[6])&&!this.isEmpty())return C(this,Ot,B2).call(this,c);const d=new Float32Array(u(this,Vr).length+24+u(this,lr).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}h=C(this,Ot,H2).call(this,d,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[p+m],d[h+1]=t[p+m+1],h+=2}return C(this,Ot,z2).call(this,d,h),this.newFreeDrawOutline(d,c,u(this,on),u(this,iu),u(this,nu),u(this,ru))}};on=new WeakMap,lr=new WeakMap,nu=new WeakMap,ru=new WeakMap,Vr=new WeakMap,Ae=new WeakMap,Hl=new WeakMap,Vl=new WeakMap,$p=new WeakMap,Up=new WeakMap,iu=new WeakMap,au=new WeakMap,qa=new WeakMap,Bp=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,Ot=new WeakSet,Th=function(){const e=u(this,Ae).subarray(4,6),t=u(this,Ae).subarray(16,18),[n,r,i,a]=u(this,on);return[(u(this,Hl)+(e[0]-t[0])/2-n)/i,(u(this,Vl)+(e[1]-t[1])/2-r)/a,(u(this,Hl)+(t[0]-e[0])/2-n)/i,(u(this,Vl)+(t[1]-e[1])/2-r)/a]},F2=function(){const[e,t,n,r]=u(this,on),[i,a,l,c]=C(this,Ot,Th).call(this);return`M${(u(this,Ae)[2]-e)/n} ${(u(this,Ae)[3]-t)/r} L${(u(this,Ae)[4]-e)/n} ${(u(this,Ae)[5]-t)/r} L${i} ${a} L${l} ${c} L${(u(this,Ae)[16]-e)/n} ${(u(this,Ae)[17]-t)/r} L${(u(this,Ae)[14]-e)/n} ${(u(this,Ae)[15]-t)/r} Z`},$2=function(e){const t=u(this,lr);e.push(`L${t[4]} ${t[5]} Z`)},U2=function(e){const[t,n,r,i]=u(this,on),a=u(this,Ae).subarray(4,6),l=u(this,Ae).subarray(16,18),[c,d,h,f]=C(this,Ot,Th).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/i} L${c} ${d} L${h} ${f} L${(l[0]-t)/r} ${(l[1]-n)/i}`)},B2=function(e){const t=u(this,Ae),[n,r,i,a]=u(this,on),[l,c,d,h]=C(this,Ot,Th).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(f,e,u(this,on),u(this,iu),u(this,nu),u(this,ru))},z2=function(e,t){const n=u(this,lr);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},H2=function(e,t){const n=u(this,Ae).subarray(4,6),r=u(this,Ae).subarray(16,18),[i,a,l,c]=u(this,on),[d,h,f,p]=C(this,Ot,Th).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/l,(n[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/c],t),t+=24},E(yi,Bp,8),E(yi,Jv,2),E(yi,Zv,u(yi,Bp)+u(yi,Jv));let Mv=yi;var ou,Wl,Fi,zp,ln,Hp,_t,ey,W2;class V2 extends se{constructor(t,n,r,i,a,l){super();E(this,ey);E(this,ou);E(this,Wl,new Float32Array(4));E(this,Fi);E(this,zp);E(this,ln);E(this,Hp);E(this,_t);A(this,_t,t),A(this,ln,n),A(this,ou,r),A(this,Hp,i),A(this,Fi,a),A(this,zp,l),this.lastPoint=[NaN,NaN],C(this,ey,W2).call(this,l);const[c,d,h,f]=u(this,Wl);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-d)/f;for(let p=0,m=n.length;p<m;p+=2)n[p]=(n[p]-c)/h,n[p+1]=(n[p+1]-d)/f}toSVGPath(){const t=[`M${u(this,_t)[4]} ${u(this,_t)[5]}`];for(let n=6,r=u(this,_t).length;n<r;n+=6){if(isNaN(u(this,_t)[n])){t.push(`L${u(this,_t)[n+4]} ${u(this,_t)[n+5]}`);continue}t.push(`C${u(this,_t)[n]} ${u(this,_t)[n+1]} ${u(this,_t)[n+2]} ${u(this,_t)[n+3]} ${u(this,_t)[n+4]} ${u(this,_t)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],a){const l=r-t,c=i-n;let d,h;switch(a){case 0:d=se._rescale(u(this,_t),t,i,l,-c),h=se._rescale(u(this,ln),t,i,l,-c);break;case 90:d=se._rescaleAndSwap(u(this,_t),t,n,l,c),h=se._rescaleAndSwap(u(this,ln),t,n,l,c);break;case 180:d=se._rescale(u(this,_t),r,n,-l,c),h=se._rescale(u(this,ln),r,n,-l,c);break;case 270:d=se._rescaleAndSwap(u(this,_t),r,i,-l,-c),h=se._rescaleAndSwap(u(this,ln),r,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return u(this,Wl)}newOutliner(t,n,r,i,a,l=0){return new Mv(t,n,r,i,a,l)}getNewOutline(t,n){const[r,i,a,l]=u(this,Wl),[c,d,h,f]=u(this,ou),p=a*h,m=l*f,y=r*h+c,g=i*f+d,w=this.newOutliner({x:u(this,ln)[0]*p+y,y:u(this,ln)[1]*m+g},u(this,ou),u(this,Hp),t,u(this,zp),n??u(this,Fi));for(let v=2;v<u(this,ln).length;v+=2)w.add({x:u(this,ln)[v]*p+y,y:u(this,ln)[v+1]*m+g});return w.getOutlines()}}ou=new WeakMap,Wl=new WeakMap,Fi=new WeakMap,zp=new WeakMap,ln=new WeakMap,Hp=new WeakMap,_t=new WeakMap,ey=new WeakSet,W2=function(t){const n=u(this,_t);let r=n[4],i=n[5],a=r,l=i,c=r,d=i,h=r,f=i;const p=t?Math.max:Math.min;for(let y=6,g=n.length;y<g;y+=6){if(isNaN(n[y]))a=Math.min(a,n[y+4]),l=Math.min(l,n[y+5]),c=Math.max(c,n[y+4]),d=Math.max(d,n[y+5]),f<n[y+5]?(h=n[y+4],f=n[y+5]):f===n[y+5]&&(h=p(h,n[y+4]));else{const w=le.bezierBoundingBox(r,i,...n.slice(y,y+6));a=Math.min(a,w[0]),l=Math.min(l,w[1]),c=Math.max(c,w[2]),d=Math.max(d,w[3]),f<w[3]?(h=w[2],f=w[3]):f===w[3]&&(h=p(h,w[2]))}r=n[y+4],i=n[y+5]}const m=u(this,Wl);m[0]=a-u(this,Fi),m[1]=l-u(this,Fi),m[2]=c-a+2*u(this,Fi),m[3]=d-l+2*u(this,Fi),this.lastPoint=[h,f]};var Vp,Wp,Ga,cr,Rs,q2,Lg,G2,K2,hb;class ub{constructor(e,t=0,n=0,r=!0){E(this,Rs);E(this,Vp);E(this,Wp);E(this,Ga,[]);E(this,cr,[]);let i=1/0,a=-1/0,l=1/0,c=-1/0;const h=10**-4;for(const{x:v,y:b,width:x,height:S}of e){const j=Math.floor((v-t)/h)*h,N=Math.ceil((v+x+t)/h)*h,k=Math.floor((b-t)/h)*h,P=Math.ceil((b+S+t)/h)*h,I=[j,k,P,!0],T=[N,k,P,!1];u(this,Ga).push(I,T),i=Math.min(i,j),a=Math.max(a,N),l=Math.min(l,k),c=Math.max(c,P)}const f=a-i+2*n,p=c-l+2*n,m=i-n,y=l-n,g=u(this,Ga).at(r?-1:-2),w=[g[0],g[2]];for(const v of u(this,Ga)){const[b,x,S]=v;v[0]=(b-m)/f,v[1]=(x-y)/p,v[2]=(S-y)/p}A(this,Vp,new Float32Array([m,y,f,p])),A(this,Wp,w)}getOutlines(){u(this,Ga).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,Ga))t[3]?(e.push(...C(this,Rs,hb).call(this,t)),C(this,Rs,G2).call(this,t)):(C(this,Rs,K2).call(this,t),e.push(...C(this,Rs,hb).call(this,t)));return C(this,Rs,q2).call(this,e)}}Vp=new WeakMap,Wp=new WeakMap,Ga=new WeakMap,cr=new WeakMap,Rs=new WeakSet,q2=function(e){const t=[],n=new Set;for(const a of e){const[l,c,d]=a;t.push([l,c,a],[l,d,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],d=t[a+1][2];c.push(d),d.push(c),n.add(c),n.add(d)}const r=[];let i;for(;n.size>0;){const a=n.values().next().value;let[l,c,d,h,f]=a;n.delete(a);let p=l,m=c;for(i=[l,d],r.push(i);;){let y;if(n.has(h))y=h;else if(n.has(f))y=f;else break;n.delete(y),[l,c,d,h,f]=y,p!==l&&(i.push(p,m,l,m===c?c:d),p=l),m=m===c?d:c}i.push(p,m)}return new Oz(r,u(this,Vp),u(this,Wp))},Lg=function(e){const t=u(this,cr);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:r=i-1}return r+1},G2=function([,e,t]){const n=C(this,Rs,Lg).call(this,e);u(this,cr).splice(n,0,[e,t])},K2=function([,e,t]){const n=C(this,Rs,Lg).call(this,e);for(let r=n;r<u(this,cr).length;r++){const[i,a]=u(this,cr)[r];if(i!==e)break;if(i===e&&a===t){u(this,cr).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,a]=u(this,cr)[r];if(i!==e)break;if(i===e&&a===t){u(this,cr).splice(r,1);return}}},hb=function(e){const[t,n,r]=e,i=[[t,n,r]],a=C(this,Rs,Lg).call(this,r);for(let l=0;l<a;l++){const[c,d]=u(this,cr)[l];for(let h=0,f=i.length;h<f;h++){const[,p,m]=i[h];if(!(d<=p||m<=c)){if(p>=c){if(m>d)i[h][1]=d;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=c,m>d&&i.push([t,d,m])}}}return i};var qp,lu;class Oz extends se{constructor(t,n,r){super();E(this,qp);E(this,lu);A(this,lu,t),A(this,qp,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of u(this,lu)){let[r,i]=n;t.push(`M${r} ${i}`);for(let a=2;a<n.length;a+=2){const l=n[a],c=n[a+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],a){const l=[],c=r-t,d=i-n;for(const h of u(this,lu)){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*c,f[p+1]=i-h[p+1]*d;l.push(f)}return l}get box(){return u(this,qp)}get classNamesForOutlining(){return["highlightOutline"]}}qp=new WeakMap,lu=new WeakMap;class fb extends Mv{newFreeDrawOutline(e,t,n,r,i,a){return new Fz(e,t,n,r,i,a)}}class Fz extends V2{newOutliner(e,t,n,r,i,a=0){return new fb(e,t,n,r,i,a)}}var dr,ql,cu,It,Gp,du,Kp,Xp,Ka,ur,uu,Yp,Ke,pb,mb,gb,Ko,X2,wa;const Fs=class Fs{constructor({editor:e=null,uiManager:t=null}){E(this,Ke);E(this,dr,null);E(this,ql,null);E(this,cu);E(this,It,null);E(this,Gp,!1);E(this,du,!1);E(this,Kp,null);E(this,Xp);E(this,Ka,null);E(this,ur,null);E(this,uu);var n;e?(A(this,du,!1),A(this,uu,Re.HIGHLIGHT_COLOR),A(this,Kp,e)):(A(this,du,!0),A(this,uu,Re.HIGHLIGHT_DEFAULT_COLOR)),A(this,ur,(e==null?void 0:e._uiManager)||t),A(this,Xp,u(this,ur)._eventBus),A(this,cu,(e==null?void 0:e.color)||((n=u(this,ur))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(Fs,Yp)||A(Fs,Yp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return je(this,"_keyboardManager",new gm([[["Escape","mac+Escape"],Fs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fs.prototype._moveToPrevious],[["Home","mac+Home"],Fs.prototype._moveToBeginning],[["End","mac+End"],Fs.prototype._moveToEnd]]))}renderButton(){const e=A(this,dr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,ur)._signal;e.addEventListener("click",C(this,Ke,Ko).bind(this),{signal:t}),e.addEventListener("keydown",C(this,Ke,gb).bind(this),{signal:t});const n=A(this,ql,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,cu),e.append(n),e}renderMainDropdown(){const e=A(this,It,C(this,Ke,pb).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,dr)){C(this,Ke,Ko).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,Ke,mb).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,Ke,wa)){C(this,Ke,Ko).call(this,e);return}if(e.target===u(this,dr)){(t=u(this,It).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,It))==null?void 0:t.firstChild)||e.target===u(this,dr)){u(this,Ke,wa)&&this._hideDropdownFromKeyboard();return}u(this,Ke,wa)||C(this,Ke,Ko).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,Ke,wa)){C(this,Ke,Ko).call(this,e);return}(t=u(this,It).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Ke,wa)){C(this,Ke,Ko).call(this,e);return}(t=u(this,It).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,It))==null||e.classList.add("hidden"),(t=u(this,Ka))==null||t.abort(),A(this,Ka,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,du)){if(!u(this,Ke,wa)){(e=u(this,Kp))==null||e.unselect();return}this.hideDropdown(),u(this,dr).focus({preventScroll:!0,focusVisible:u(this,Gp)})}}updateColor(e){if(u(this,ql)&&(u(this,ql).style.backgroundColor=e),!u(this,It))return;const t=u(this,ur).highlightColors.values();for(const n of u(this,It).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,dr))==null||e.remove(),A(this,dr,null),A(this,ql,null),(t=u(this,It))==null||t.remove(),A(this,It,null)}};dr=new WeakMap,ql=new WeakMap,cu=new WeakMap,It=new WeakMap,Gp=new WeakMap,du=new WeakMap,Kp=new WeakMap,Xp=new WeakMap,Ka=new WeakMap,ur=new WeakMap,uu=new WeakMap,Yp=new WeakMap,Ke=new WeakSet,pb=function(){const e=document.createElement("div"),t=u(this,ur)._signal;e.addEventListener("contextmenu",Ar,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of u(this,ur).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",u(Fs,Yp)[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.setAttribute("aria-selected",r===u(this,cu)),i.addEventListener("click",C(this,Ke,mb).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",C(this,Ke,gb).bind(this),{signal:t}),e},mb=function(e,t){t.stopPropagation(),u(this,Xp).dispatch("switchannotationeditorparams",{source:this,type:u(this,uu),value:e})},gb=function(e){Fs._keyboardManager.exec(this,e)},Ko=function(e){if(u(this,Ke,wa)){this.hideDropdown();return}if(A(this,Gp,e.detail===0),u(this,Ka)||(A(this,Ka,new AbortController),window.addEventListener("pointerdown",C(this,Ke,X2).bind(this),{signal:u(this,ur).combinedSignal(u(this,Ka))})),u(this,It)){u(this,It).classList.remove("hidden");return}const t=A(this,It,C(this,Ke,pb).call(this));u(this,dr).append(t)},X2=function(e){var t;(t=u(this,It))!=null&&t.contains(e.target)||this.hideDropdown()},wa=function(){return u(this,It)&&!u(this,It).classList.contains("hidden")},E(Fs,Yp,null);let Lv=Fs;var hu,Qp,$i,Gl,fu,Bs,Jp,Zp,Kl,Mn,cn,Xt,pu,Ui,us,mu,Ln,em,ve,vb,Dg,Y2,Q2,J2,yb,Xo,Bn,qc,Z2,Og,Rh,eR,tR,sR,nR,rR;const Fe=class Fe extends pt{constructor(t){super({...t,name:"highlightEditor"});E(this,ve);E(this,hu,null);E(this,Qp,0);E(this,$i);E(this,Gl,null);E(this,fu,null);E(this,Bs,null);E(this,Jp,null);E(this,Zp,0);E(this,Kl,null);E(this,Mn,null);E(this,cn,null);E(this,Xt,!1);E(this,pu,null);E(this,Ui);E(this,us,null);E(this,mu,"");E(this,Ln);E(this,em,"");this.color=t.color||Fe._defaultColor,A(this,Ln,t.thickness||Fe._defaultThickness),A(this,Ui,t.opacity||Fe._defaultOpacity),A(this,$i,t.boxes||null),A(this,em,t.methodOfCreation||""),A(this,mu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(A(this,Xt,!0),C(this,ve,Dg).call(this,t),C(this,ve,Xo).call(this)):u(this,$i)&&(A(this,hu,t.anchorNode),A(this,Qp,t.anchorOffset),A(this,Jp,t.focusNode),A(this,Zp,t.focusOffset),C(this,ve,vb).call(this),C(this,ve,Xo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Fe.prototype;return je(this,"_keyboardManager",new gm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Xt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,Ln),methodOfCreation:u(this,em)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;pt.initialize(t,n),Fe._defaultColor||(Fe._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Re.HIGHLIGHT_DEFAULT_COLOR:Fe._defaultColor=n;break;case Re.HIGHLIGHT_THICKNESS:Fe._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,pu)}updateParams(t,n){switch(t){case Re.HIGHLIGHT_COLOR:C(this,ve,Y2).call(this,n);break;case Re.HIGHLIGHT_THICKNESS:C(this,ve,Q2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Re.HIGHLIGHT_DEFAULT_COLOR,Fe._defaultColor],[Re.HIGHLIGHT_THICKNESS,Fe._defaultThickness]]}get propertiesToUpdate(){return[[Re.HIGHLIGHT_COLOR,this.color||Fe._defaultColor],[Re.HIGHLIGHT_THICKNESS,u(this,Ln)||Fe._defaultThickness],[Re.HIGHLIGHT_FREE,u(this,Xt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(A(this,fu,new Lv({editor:this})),t.addColorPicker(u(this,fu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,ve,Rh).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,C(this,ve,Rh).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,ve,yb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,ve,Xo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?C(this,ve,yb).call(this):t&&(C(this,ve,Xo).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,l;const{drawLayer:n}=this.parent;let r;u(this,Xt)?(t=(t-this.rotation+360)%360,r=C(i=Fe,Bn,qc).call(i,u(this,Mn).box,t)):r=C(a=Fe,Bn,qc).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,cn),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(u(this,us),{bbox:C(l=Fe,Bn,qc).call(l,u(this,Bs).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,mu)&&(t.setAttribute("aria-label",u(this,mu)),t.setAttribute("role","mark")),u(this,Xt)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,ve,Z2).bind(this),{signal:this._uiManager._signal});const n=A(this,Kl,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Gl);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Tv(this,u(this,Kl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,us),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,us),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,ve,Og).call(this,!0);break;case 1:case 3:C(this,ve,Og).call(this,!1);break}}select(){var t;super.select(),u(this,us)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,us),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,us)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,us),{rootClass:{selected:!1}}),u(this,Xt)||C(this,ve,Og).call(this,!1))}get _mustFixPosition(){return!u(this,Xt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,cn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,us),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:a}){const{x:l,y:c,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),C(this,Bn,nR).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",vn,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Ar,{signal:p}),r.addEventListener("pointermove",C(this,Bn,sR).bind(this,t),{signal:p}),this._freeHighlight=new fb({x:i,y:a},[l,c,d,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var g,w,v,b;let i=null;if(t instanceof P2){const{data:{quadPoints:x,rect:S,rotation:j,id:N,color:k,opacity:P,popupRef:I},parent:{page:{pageNumber:T}}}=t;i=t={annotationType:xe.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:x,boxes:null,pageIndex:T-1,rect:S.slice(0),rotation:j,id:N,deleted:!1,popupRef:I}}else if(t instanceof j1){const{data:{inkLists:x,rect:S,rotation:j,id:N,color:k,borderStyle:{rawWidth:P},popupRef:I},parent:{page:{pageNumber:T}}}=t;i=t={annotationType:xe.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:x,boxes:null,pageIndex:T-1,rect:S.slice(0),rotation:j,id:N,deleted:!1,popupRef:I}}const{color:a,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,n,r);h.color=le.makeHexColor(...a),A(h,Ui,d||1),c&&A(h,Ln,t.thickness),h.annotationElementId=t.id||null,h._initialData=i;const[f,p]=h.pageDimensions,[m,y]=h.pageTranslation;if(l){const x=A(h,$i,[]);for(let S=0;S<l.length;S+=8)x.push({x:(l[S]-m)/f,y:1-(l[S+1]-y)/p,width:(l[S+2]-l[S])/f,height:(l[S+1]-l[S+5])/p});C(g=h,ve,vb).call(g),C(w=h,ve,Xo).call(w),h.rotate(h.rotation)}else if(c){A(h,Xt,!0);const x=c[0],S={x:x[0]-m,y:p-(x[1]-y)},j=new fb(S,[0,0,f,p],1,u(h,Ln)/2,!0,.001);for(let P=0,I=x.length;P<I;P+=2)S.x=x[P]-m,S.y=p-(x[P+1]-y),j.add(S);const{id:N,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);C(v=h,ve,Dg).call(v,{highlightOutlines:j.getOutlines(),highlightId:N,clipPathId:k}),C(b=h,ve,Xo).call(b)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=pt._colorManager.convert(this.color),i={annotationType:xe.HIGHLIGHT,color:r,opacity:u(this,Ui),thickness:u(this,Ln),quadPoints:C(this,ve,eR).call(this),outlines:C(this,ve,tR).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:C(this,ve,Rh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,ve,rR).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};hu=new WeakMap,Qp=new WeakMap,$i=new WeakMap,Gl=new WeakMap,fu=new WeakMap,Bs=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,Kl=new WeakMap,Mn=new WeakMap,cn=new WeakMap,Xt=new WeakMap,pu=new WeakMap,Ui=new WeakMap,us=new WeakMap,mu=new WeakMap,Ln=new WeakMap,em=new WeakMap,ve=new WeakSet,vb=function(){const t=new ub(u(this,$i),.001);A(this,Mn,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Mn).box;const n=new ub(u(this,$i),.0025,.001,this._uiManager.direction==="ltr");A(this,Bs,n.getOutlines());const{lastPoint:r}=u(this,Bs);A(this,pu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Dg=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var f,p;if(A(this,Mn,t),A(this,Bs,t.getNewOutline(u(this,Ln)/2+1.5,.0025)),n>=0)A(this,cn,n),A(this,Gl,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),A(this,us,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Bs).box,path:{d:u(this,Bs).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,cn),{bbox:C(f=Fe,Bn,qc).call(f,u(this,Mn).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,us),{bbox:C(p=Fe,Bn,qc).call(p,u(this,Bs).box,m),path:{d:u(this,Bs).toSVGPath()}})}const[a,l,c,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*y/m,this.height=d*m/y;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*y/m,this.height=d*m/y;break}}const{lastPoint:h}=u(this,Bs);A(this,pu,[(h[0]-a)/c,(h[1]-l)/d])},Y2=function(t){const n=(a,l)=>{var c,d;this.color=a,A(this,Ui,l),(c=this.parent)==null||c.drawLayer.updateProperties(u(this,cn),{root:{fill:a,"fill-opacity":l}}),(d=u(this,fu))==null||d.updateColor(a)},r=this.color,i=u(this,Ui);this.addCommands({cmd:n.bind(this,t,Fe._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Q2=function(t){const n=u(this,Ln),r=i=>{A(this,Ln,i),C(this,ve,J2).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},J2=function(t){if(!u(this,Xt))return;C(this,ve,Dg).call(this,{highlightOutlines:u(this,Mn).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},yb=function(){u(this,cn)===null||!this.parent||(this.parent.drawLayer.remove(u(this,cn)),A(this,cn,null),this.parent.drawLayer.remove(u(this,us)),A(this,us,null))},Xo=function(t=this.parent){u(this,cn)===null&&({id:xs(this,cn)._,clipPathId:xs(this,Gl)._}=t.drawLayer.draw({bbox:u(this,Mn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Ui)},rootClass:{highlight:!0,free:u(this,Xt)},path:{d:u(this,Mn).toSVGPath()}},!1,!0),A(this,us,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Xt)},bbox:u(this,Bs).box,path:{d:u(this,Bs).toSVGPath()}},u(this,Xt))),u(this,Kl)&&(u(this,Kl).style.clipPath=u(this,Gl)))},Bn=new WeakSet,qc=function([t,n,r,i],a){switch(a){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},Z2=function(t){Fe._keyboardManager.exec(this,t)},Og=function(t){if(!u(this,hu))return;const n=window.getSelection();t?n.setPosition(u(this,hu),u(this,Qp)):n.setPosition(u(this,Jp),u(this,Zp))},Rh=function(){return u(this,Xt)?this.rotation:0},eR=function(){if(u(this,Xt))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,a=u(this,$i),l=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:f,height:p}of a){const m=d*t+r,y=(1-h)*n+i;l[c]=l[c+4]=m,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=m+f*t,l[c+5]=l[c+7]=y-p*n,c+=8}return l},tR=function(t){return u(this,Mn).serialize(t,C(this,ve,Rh).call(this))},sR=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},nR=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},rR=function(t){const{color:n}=this._initialData;return t.color.some((r,i)=>r!==n[i])},E(Fe,Bn),ue(Fe,"_defaultColor",null),ue(Fe,"_defaultOpacity",1),ue(Fe,"_defaultThickness",12),ue(Fe,"_type","highlight"),ue(Fe,"_editorType",xe.HIGHLIGHT),ue(Fe,"_freeHighlightId",-1),ue(Fe,"_freeHighlight",null),ue(Fe,"_freeHighlightClipId","");let Dv=Fe;var Xl;class $z{constructor(){E(this,Xl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,Xl)[e]=t}toSVGProperties(){const e=u(this,Xl);return A(this,Xl,Object.create(null)),{root:e}}reset(){A(this,Xl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Qe("Not implemented")}}Xl=new WeakMap;var dn,gu,zt,Yl,Ql,Xa,Ya,Qa,Jl,Le,wb,bb,_b,Ih,iR,Fg,Mh,Gc;const re=class re extends pt{constructor(t){super(t);E(this,Le);E(this,dn,null);E(this,gu);ue(this,"_drawId",null);A(this,gu,t.mustBeCommitted||!1),t.drawOutlines&&(C(this,Le,wb).call(this,t),C(this,Le,Ih).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(n))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Qe("Not implemented")}static get typesMap(){Qe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(u(re,zt).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,a=i[n],l=c=>{var h;i.updateProperty(n,c);const d=u(this,dn).updateProperty(n,c);d&&C(this,Le,Mh).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,re._mergeSVGProperties(u(this,dn).getPathResizingSVGProperties(C(this,Le,Fg).call(this)),{bbox:C(this,Le,Gc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,re._mergeSVGProperties(u(this,dn).getPathResizedSVGProperties(C(this,Le,Fg).call(this)),{bbox:C(this,Le,Gc).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:C(this,Le,Gc).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,re._mergeSVGProperties(u(this,dn).getPathTranslatedSVGProperties(C(this,Le,Fg).call(this),this.parentDimensions),{bbox:C(this,Le,Gc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,gu)&&(A(this,gu,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,Le,_b).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Le,Ih).call(this),C(this,Le,Mh).call(this,u(this,dn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,Le,_b).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,Le,Ih).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,re._mergeSVGProperties({bbox:C(this,Le,Gc).call(this)},u(this,dn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Le,Mh).call(this,u(this,dn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,r,i,a){Qe("Not implemented")}static startDrawing(t,n,r,i){var w;const{target:a,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=i;if(u(re,Ya)&&u(re,Ya)!==h)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=a.getBoundingClientRect(),y=A(re,Yl,new AbortController),g=t.combinedSignal(y);if(u(re,Xa)||A(re,Xa,d),u(re,Ya)??A(re,Ya,h),window.addEventListener("pointerup",v=>{var b;u(re,Xa)===v.pointerId?this._endDraw(v):(b=u(re,Qa))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var b;u(re,Xa)===v.pointerId?this._currentParent.endDrawingSession():(b=u(re,Qa))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{u(re,Ya)===v.pointerType&&((u(re,Qa)||A(re,Qa,new Set)).add(v.pointerId),u(re,zt).isCancellable()&&(u(re,zt).removeLastElement(),u(re,zt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Ar,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{v.timeStamp===u(re,Jl)&&vn(v)},{signal:g}),t.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),u(re,zt)){t.drawLayer.updateProperties(this._currentDrawId,u(re,zt).startNew(l,c,p,m,f));return}n.updateUIForDefaultProperties(this),A(re,zt,this.createDrawerInstance(l,c,p,m,f)),A(re,Ql,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(re,Ql).toSVGProperties(),u(re,zt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(A(re,Jl,-1),!u(re,zt))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(u(re,Xa)===i){if(((a=u(re,Qa))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(re,zt).add(n,r)),A(re,Jl,t.timeStamp),vn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,A(re,zt,null),A(re,Ql,null),A(re,Ya,null),A(re,Jl,NaN)),u(re,Yl)&&(u(re,Yl).abort(),A(re,Yl,null),A(re,Xa,NaN),A(re,Qa,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,u(re,zt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(re,zt),i=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Re.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Re.DRAW_STEP),!u(re,zt).isEmpty()){const{pageDimensions:[r,i],scale:a}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(re,zt).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:u(re,Ql),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,a,l){Qe("Not implemented")}static async deserialize(t,n,r){var f,p;const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=n.viewport,d=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,n,r);return h.createDrawingOptions(t),C(f=h,Le,wb).call(f,{drawOutlines:d}),C(p=h,Le,Ih).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,r]=this.pageTranslation,[i,a]=this.pageDimensions;return u(this,dn).serialize([n,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};dn=new WeakMap,gu=new WeakMap,zt=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,Jl=new WeakMap,Le=new WeakSet,wb=function({drawOutlines:t,drawId:n,drawingOptions:r}){A(this,dn,t),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=C(this,Le,bb).call(this,t,this.parent),C(this,Le,Mh).call(this,t.box)},bb=function(t,n){const{id:r}=n.drawLayer.draw(re._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},_b=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Ih=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Le,bb).call(this,u(this,dn),t)}},iR=function([t,n,r,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[n,1-t,r*(l/a),i*(a/l)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(l/a),i*(a/l)];default:return[t,n,r,i]}},Fg=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-n,t,r*(a/l),i*(l/a)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(a/l),i*(l/a)];default:return[t,n,r,i]}},Mh=function(t){if([this.x,this.y,this.width,this.height]=C(this,Le,iR).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Gc=function(){const{x:t,y:n,width:r,height:i,rotation:a,parentRotation:l,parentDimensions:[c,d]}=this;switch((a*4+l)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(c/d),i*(d/c),r*(c/d)];case 5:return[1-n,t,r*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-n,i*(d/c),r*(c/d)];case 7:return[n-r*(c/d),1-t-i*(d/c),r*(c/d),i*(d/c)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(d/c),n,i*(d/c),r*(c/d)];case 13:return[1-n-r*(c/d),t-i*(d/c),r*(c/d),i*(d/c)];case 14:return[1-t,1-n-r*(c/d),i*(d/c),r*(c/d)];case 15:return[n,1-t,r*(c/d),i*(d/c)];default:return[t,n,r,i]}},ue(re,"_currentDrawId",-1),ue(re,"_currentParent",null),E(re,zt,null),E(re,Yl,null),E(re,Ql,null),E(re,Xa,NaN),E(re,Ya,null),E(re,Qa,null),E(re,Jl,NaN),ue(re,"_INNER_MARGIN",3);let xb=re;var Wr,Ht,Vt,Zl,vu,Ss,Yt,Dn,ec,tc,sc,yu,$g;class Uz{constructor(e,t,n,r,i,a){E(this,yu);E(this,Wr,new Float64Array(6));E(this,Ht);E(this,Vt);E(this,Zl);E(this,vu);E(this,Ss);E(this,Yt,"");E(this,Dn,0);E(this,ec,new Ov);E(this,tc);E(this,sc);A(this,tc,n),A(this,sc,r),A(this,Zl,i),A(this,vu,a),[e,t]=C(this,yu,$g).call(this,e,t);const l=A(this,Ht,[NaN,NaN,NaN,NaN,e,t]);A(this,Ss,[e,t]),A(this,Vt,[{line:l,points:u(this,Ss)}]),u(this,Wr).set(l,0)}updateProperty(e,t){e==="stroke-width"&&A(this,vu,t)}isEmpty(){return!u(this,Vt)||u(this,Vt).length===0}isCancellable(){return u(this,Ss).length<=10}add(e,t){[e,t]=C(this,yu,$g).call(this,e,t);const[n,r,i,a]=u(this,Wr).subarray(2,6),l=e-i,c=t-a;return Math.hypot(u(this,tc)*l,u(this,sc)*c)<=2?null:(u(this,Ss).push(e,t),isNaN(n)?(u(this,Wr).set([i,a,e,t],2),u(this,Ht).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Wr)[0])&&u(this,Ht).splice(6,6),u(this,Wr).set([n,r,i,a,e,t],0),u(this,Ht).push(...se.createBezierPoints(n,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,Ss).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){A(this,tc,n),A(this,sc,r),A(this,Zl,i),[e,t]=C(this,yu,$g).call(this,e,t);const a=A(this,Ht,[NaN,NaN,NaN,NaN,e,t]);A(this,Ss,[e,t]);const l=u(this,Vt).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),u(this,Vt).push({line:a,points:u(this,Ss)}),u(this,Wr).set(a,0),A(this,Dn,0),this.toSVGPath(),null}getLastElement(){return u(this,Vt).at(-1)}setLastElement(e){return u(this,Vt)?(u(this,Vt).push(e),A(this,Ht,e.line),A(this,Ss,e.points),A(this,Dn,0),{path:{d:this.toSVGPath()}}):u(this,ec).setLastElement(e)}removeLastElement(){if(!u(this,Vt))return u(this,ec).removeLastElement();u(this,Vt).pop(),A(this,Yt,"");for(let e=0,t=u(this,Vt).length;e<t;e++){const{line:n,points:r}=u(this,Vt)[e];A(this,Ht,n),A(this,Ss,r),A(this,Dn,0),this.toSVGPath()}return{path:{d:u(this,Yt)}}}toSVGPath(){const e=se.svgRound(u(this,Ht)[4]),t=se.svgRound(u(this,Ht)[5]);if(u(this,Ss).length===2)return A(this,Yt,`${u(this,Yt)} M ${e} ${t} Z`),u(this,Yt);if(u(this,Ss).length<=6){const r=u(this,Yt).lastIndexOf("M");A(this,Yt,`${u(this,Yt).slice(0,r)} M ${e} ${t}`),A(this,Dn,6)}if(u(this,Ss).length===4){const r=se.svgRound(u(this,Ht)[10]),i=se.svgRound(u(this,Ht)[11]);return A(this,Yt,`${u(this,Yt)} L ${r} ${i}`),A(this,Dn,12),u(this,Yt)}const n=[];u(this,Dn)===0&&(n.push(`M ${e} ${t}`),A(this,Dn,6));for(let r=u(this,Dn),i=u(this,Ht).length;r<i;r+=6){const[a,l,c,d,h,f]=u(this,Ht).slice(r,r+6).map(se.svgRound);n.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}return A(this,Yt,u(this,Yt)+n.join(" ")),A(this,Dn,u(this,Ht).length),u(this,Yt)}getOutlines(e,t,n,r){const i=u(this,Vt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,ec).build(u(this,Vt),e,t,n,u(this,Zl),u(this,vu),r),A(this,Wr,null),A(this,Ht,null),A(this,Vt,null),A(this,Yt,null),u(this,ec)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Wr=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,Zl=new WeakMap,vu=new WeakMap,Ss=new WeakMap,Yt=new WeakMap,Dn=new WeakMap,ec=new WeakMap,tc=new WeakMap,sc=new WeakMap,yu=new WeakSet,$g=function(e,t){return se._normalizePoint(e,t,u(this,tc),u(this,sc),u(this,Zl))};var As,tm,sm,un,qr,Gr,xu,wu,bu,Zt,pi,aR,oR,lR;const P1=class P1 extends se{constructor(){super(...arguments);E(this,Zt);E(this,As);E(this,tm,0);E(this,sm);E(this,un);E(this,qr);E(this,Gr);E(this,xu);E(this,wu);E(this,bu)}build(t,n,r,i,a,l,c){A(this,qr,n),A(this,Gr,r),A(this,xu,i),A(this,wu,a),A(this,bu,l),A(this,sm,c??0),A(this,un,t),C(this,Zt,oR).call(this)}setLastElement(t){return u(this,un).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,un).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,un)){if(t.push(`M${se.svgRound(n[4])} ${se.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${se.svgRound(n[10])} ${se.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[a,l,c,d,h,f]=n.subarray(r,r+6).map(se.svgRound);t.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}}return t.join("")}serialize([t,n,r,i],a){const l=[],c=[],[d,h,f,p]=C(this,Zt,aR).call(this);let m,y,g,w,v,b,x,S,j;switch(u(this,wu)){case 0:j=se._rescale,m=t,y=n+i,g=r,w=-i,v=t+d*r,b=n+(1-h-p)*i,x=t+(d+f)*r,S=n+(1-h)*i;break;case 90:j=se._rescaleAndSwap,m=t,y=n,g=r,w=i,v=t+h*r,b=n+d*i,x=t+(h+p)*r,S=n+(d+f)*i;break;case 180:j=se._rescale,m=t+r,y=n,g=-r,w=i,v=t+(1-d-f)*r,b=n+h*i,x=t+(1-d)*r,S=n+(h+p)*i;break;case 270:j=se._rescaleAndSwap,m=t+r,y=n+i,g=-r,w=-i,v=t+(1-h-p)*r,b=n+(1-d-f)*i,x=t+(1-h)*r,S=n+(1-d)*i;break}for(const{line:N,points:k}of u(this,un))l.push(j(N,m,y,g,w,a?new Array(N.length):null)),c.push(j(k,m,y,g,w,a?new Array(k.length):null));return{lines:l,points:c,rect:[v,b,x,S]}}static deserialize(t,n,r,i,a,{paths:{lines:l,points:c},rotation:d,thickness:h}){const f=[];let p,m,y,g,w;switch(d){case 0:w=se._rescale,p=-t/r,m=n/i+1,y=1/r,g=-1/i;break;case 90:w=se._rescaleAndSwap,p=-n/i,m=-t/r,y=1/i,g=1/r;break;case 180:w=se._rescale,p=t/r+1,m=-n/i,y=-1/r,g=1/i;break;case 270:w=se._rescaleAndSwap,p=n/i+1,m=t/r+1,y=-1/i,g=-1/r;break}if(!l){l=[];for(const b of c){const x=b.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const S=new Float32Array(3*(x-2));l.push(S);let[j,N,k,P]=b.subarray(0,4);S.set([NaN,NaN,NaN,NaN,j,N],0);for(let I=4;I<x;I+=2){const T=b[I],M=b[I+1];S.set(se.createBezierPoints(j,N,k,P,T,M),(I-2)*3),[j,N,k,P]=[k,P,T,M]}}}for(let b=0,x=l.length;b<x;b++)f.push({line:w(l[b].map(S=>S??NaN),p,m,y,g),points:w(c[b].map(S=>S??NaN),p,m,y,g)});const v=new P1;return v.build(f,r,i,1,d,h,a),v}get box(){return u(this,As)}updateProperty(t,n){return t==="stroke-width"?C(this,Zt,lR).call(this,n):null}updateParentDimensions([t,n],r){const[i,a]=C(this,Zt,pi).call(this);A(this,qr,t),A(this,Gr,n),A(this,xu,r);const[l,c]=C(this,Zt,pi).call(this),d=l-i,h=c-a,f=u(this,As);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(t){return A(this,tm,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,As).map(se.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,As);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,As);let r=0,i=0,a=0,l=0,c=0,d=0;switch(u(this,tm)){case 90:i=n/t,a=-t/n,c=t;break;case 180:r=-1,l=-1,c=t,d=n;break;case 270:i=-n/t,a=t/n,d=n;break;default:return""}return`matrix(${r} ${i} ${a} ${l} ${se.svgRound(c)} ${se.svgRound(d)})`}getPathResizingSVGProperties([t,n,r,i]){const[a,l]=C(this,Zt,pi).call(this),[c,d,h,f]=u(this,As);if(Math.abs(h-a)<=se.PRECISION||Math.abs(f-l)<=se.PRECISION){const w=t+r/2-(c+h/2),v=n+i/2-(d+f/2);return{path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const p=(r-2*a)/(h-2*a),m=(i-2*l)/(f-2*l),y=h/r,g=f/i;return{path:{"transform-origin":`${se.svgRound(c)} ${se.svgRound(d)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${se.svgRound(a)} ${se.svgRound(l)}) scale(${p} ${m}) translate(${se.svgRound(-a)} ${se.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[a,l]=C(this,Zt,pi).call(this),c=u(this,As),[d,h,f,p]=c;if(c[0]=t,c[1]=n,c[2]=r,c[3]=i,Math.abs(f-a)<=se.PRECISION||Math.abs(p-l)<=se.PRECISION){const v=t+r/2-(d+f/2),b=n+i/2-(h+p/2);for(const{line:x,points:S}of u(this,un))se._translate(x,v,b,x),se._translate(S,v,b,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*a)/(f-2*a),y=(i-2*l)/(p-2*l),g=-m*(d+a)+t+a,w=-y*(h+l)+n+l;if(m!==1||y!==1||g!==0||w!==0)for(const{line:v,points:b}of u(this,un))se._rescale(v,g,w,m,y,v),se._rescale(b,g,w,m,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,a]=r,l=u(this,As),c=t-l[0],d=n-l[1];if(u(this,qr)===i&&u(this,Gr)===a)for(const{line:h,points:f}of u(this,un))se._translate(h,c,d,h),se._translate(f,c,d,f);else{const h=u(this,qr)/i,f=u(this,Gr)/a;A(this,qr,i),A(this,Gr,a);for(const{line:p,points:m}of u(this,un))se._rescale(p,c,d,h,f,p),se._rescale(m,c,d,h,f,m);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${se.svgRound(t)} ${se.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,As);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${se.svgRound(t[0])} ${se.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};As=new WeakMap,tm=new WeakMap,sm=new WeakMap,un=new WeakMap,qr=new WeakMap,Gr=new WeakMap,xu=new WeakMap,wu=new WeakMap,bu=new WeakMap,Zt=new WeakSet,pi=function(t=u(this,bu)){const n=u(this,sm)+t/2*u(this,xu);return u(this,wu)%180===0?[n/u(this,qr),n/u(this,Gr)]:[n/u(this,Gr),n/u(this,qr)]},aR=function(){const[t,n,r,i]=u(this,As),[a,l]=C(this,Zt,pi).call(this,0);return[t+a,n+l,r-2*a,i-2*l]},oR=function(){const t=A(this,As,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,un)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6){const[h,f]=i.subarray(c,c+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],f),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],f)}continue}let a=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,p,m,y,g]=i.subarray(c,c+6);le.bezierBoundingBox(a,l,h,f,p,m,y,g,t),a=y,l=g}}const[n,r]=C(this,Zt,pi).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-r)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+r)),t[2]-=t[0],t[3]-=t[1]},lR=function(t){const[n,r]=C(this,Zt,pi).call(this);A(this,bu,t);const[i,a]=C(this,Zt,pi).call(this),[l,c]=[i-n,a-r],d=u(this,As);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d};let Ov=P1;var _u;const T1=class T1 extends $z{constructor(t){super();E(this,_u);A(this,_u,t),super.updateProperties({fill:"none",stroke:pt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=u(this,_u).realScale),super.updateSVGProperty(t,n)}clone(){const t=new T1(u(this,_u));return t.updateAll(this),t}};_u=new WeakMap;let Sb=T1;var ty,cR;const od=class od extends xb{constructor(t){super({...t,name:"inkEditor"});E(this,ty);this._willKeepAspectRatio=!0}static initialize(t,n){pt.initialize(t,n),this._defaultDrawingOptions=new Sb(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return je(this,"typesMap",new Map([[Re.INK_THICKNESS,"stroke-width"],[Re.INK_COLOR,"stroke"],[Re.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,a){return new Uz(t,n,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,a,l){return Ov.deserialize(t,n,r,i,a,l)}static async deserialize(t,n,r){let i=null;if(t instanceof j1){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y},parent:{page:{pageNumber:g}}}=t;i=t={annotationType:xe.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:l},boxes:null,pageIndex:g-1,rect:c.slice(0),rotation:d,id:h,deleted:!1,popupRef:y}}const a=await super.deserialize(t,n,r);return a.annotationElementId=t.id||null,a._initialData=i,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=od.getDefaultDrawingOptions({stroke:le.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:xe.INK,color:pt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?d:this.annotationElementId&&!C(this,ty,cR).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};ty=new WeakSet,cR=function(t){const{color:n,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==n[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},ue(od,"_type","ink"),ue(od,"_editorType",xe.INK),ue(od,"_defaultDrawingOptions",null);let Ab=od;var ht,Qt,Ja,Bi,Za,Su,Kr,Xr,hn,Au,Oe,Lh,Dh,Ug,Eb,Bg,Cb,zg,dR;const Jh=class Jh extends pt{constructor(t){super({...t,name:"stampEditor"});E(this,Oe);E(this,ht,null);E(this,Qt,null);E(this,Ja,null);E(this,Bi,null);E(this,Za,null);E(this,Su,"");E(this,Kr,null);E(this,Xr,null);E(this,hn,!1);E(this,Au,!1);A(this,Bi,t.bitmapUrl),A(this,Za,t.bitmapFile)}static initialize(t,n){pt.initialize(t,n)}static get supportedTypes(){return je(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return je(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(xe.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;u(this,Qt)&&(A(this,ht,null),this._uiManager.imageManager.deleteId(u(this,Qt)),(t=u(this,Kr))==null||t.remove(),A(this,Kr,null),u(this,Xr)&&(clearTimeout(u(this,Xr)),A(this,Xr,null))),super.remove()}rebuild(){if(!this.parent){u(this,Qt)&&C(this,Oe,Ug).call(this);return}super.rebuild(),this.div!==null&&(u(this,Qt)&&u(this,Kr)===null&&C(this,Oe,Ug).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,Ja)||u(this,ht)||u(this,Bi)||u(this,Za)||u(this,Qt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,ht)?C(this,Oe,Eb).call(this):C(this,Oe,Ug).call(this),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(t*r,n*i,this.width*r,this.height*i)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Xr)!==null&&clearTimeout(u(this,Xr)),A(this,Xr,setTimeout(()=>{A(this,Xr,null),C(this,Oe,Cb).call(this)},200))}copyCanvas(t,n,r=!1){var m;t||(t=224);const{width:i,height:a}=u(this,ht),l=new S0;let c=u(this,ht),d=i,h=a,f=null;if(n){if(i>n||a>n){const P=Math.min(n/i,n/a);d=Math.floor(i*P),h=Math.floor(a*P)}f=document.createElement("canvas");const y=f.width=Math.ceil(d*l.sx),g=f.height=Math.ceil(h*l.sy);u(this,hn)||(c=C(this,Oe,Bg).call(this,y,g));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",b="#42414d");const x=15,S=x*l.sx,j=x*l.sy,N=new OffscreenCanvas(S*2,j*2),k=N.getContext("2d");k.fillStyle=v,k.fillRect(0,0,S*2,j*2),k.fillStyle=b,k.fillRect(0,0,S,j),k.fillRect(S,j,S,j),w.fillStyle=w.createPattern(N,"repeat"),w.fillRect(0,0,y,g),w.drawImage(c,0,0,c.width,c.height,0,0,y,g)}let p=null;if(r){let y,g;if(l.symmetric&&c.width<t&&c.height<t)y=c.width,g=c.height;else if(c=u(this,ht),i>t||a>t){const b=Math.min(t/i,t/a);y=Math.floor(i*b),g=Math.floor(a*b),u(this,hn)||(c=C(this,Oe,Bg).call(this,y,g))}const v=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,y,g),p={width:y,height:g,data:v.getImageData(0,0,y,g).data}}return{canvas:f,width:d,height:h,imageData:p}}getImageForAltText(){return u(this,Kr)}static async deserialize(t,n,r){var g;let i=null;if(t instanceof T2){const{data:{rect:w,rotation:v,id:b,structParent:x,popupRef:S},container:j,parent:{page:{pageNumber:N}}}=t,k=j.querySelector("canvas"),P=r.imageManager.getFromCanvas(j.id,k);k.remove();const I=((g=await n._structTree.getAriaAttributes(`${v1}${b}`))==null?void 0:g.get("aria-label"))||"";i=t={annotationType:xe.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:N-1,rect:w.slice(0),rotation:v,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:x,popupRef:S}}const a=await super.deserialize(t,n,r),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=t;h&&r.imageManager.isValidId(h)?(A(a,Qt,h),c&&A(a,ht,c)):A(a,Bi,d),A(a,hn,f);const[m,y]=a.pageDimensions;return a.width=(l[2]-l[0])/m,a.height=(l[3]-l[1])/y,a.annotationElementId=t.id||null,p&&(a.altTextData=p),a._initialData=i,A(a,Au,!!i),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:xe.STAMP,bitmapId:u(this,Qt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,hn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=C(this,Oe,zg).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=C(this,Oe,dR).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const l=u(this,hn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(u(this,Qt)))n.stamps.set(u(this,Qt),{area:l,serialized:r}),r.bitmap=C(this,Oe,zg).call(this,!1);else if(u(this,hn)){const c=n.stamps.get(u(this,Qt));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=C(this,Oe,zg).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ht=new WeakMap,Qt=new WeakMap,Ja=new WeakMap,Bi=new WeakMap,Za=new WeakMap,Su=new WeakMap,Kr=new WeakMap,Xr=new WeakMap,hn=new WeakMap,Au=new WeakMap,Oe=new WeakSet,Lh=function(t,n=!1){if(!t){this.remove();return}A(this,ht,t.bitmap),n||(A(this,Qt,t.id),A(this,hn,t.isSvg)),t.file&&A(this,Su,t.file.name),C(this,Oe,Eb).call(this)},Dh=function(){if(A(this,Ja,null),this._uiManager.enableWaiting(!1),!!u(this,Kr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ht)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ht)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ug=function(){if(u(this,Qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Qt)).then(r=>C(this,Oe,Lh).call(this,r,!0)).finally(()=>C(this,Oe,Dh).call(this));return}if(u(this,Bi)){const r=u(this,Bi);A(this,Bi,null),this._uiManager.enableWaiting(!0),A(this,Ja,this._uiManager.imageManager.getFromUrl(r).then(i=>C(this,Oe,Lh).call(this,i)).finally(()=>C(this,Oe,Dh).call(this)));return}if(u(this,Za)){const r=u(this,Za);A(this,Za,null),this._uiManager.enableWaiting(!0),A(this,Ja,this._uiManager.imageManager.getFromFile(r).then(i=>C(this,Oe,Lh).call(this,i)).finally(()=>C(this,Oe,Dh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Jh.supportedTypesStr;const n=this._uiManager._signal;A(this,Ja,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Oe,Lh).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>C(this,Oe,Dh).call(this))),t.click()},Eb=function(){var f;const{div:t}=this;let{width:n,height:r}=u(this,ht);const[i,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*i,r=this.height*a;else if(n>l*i||r>l*a){const p=Math.min(l*i/n,l*a/r);n*=p,r*=p}const[c,d]=this.parentDimensions;this.setDims(n*c/i,r*d/a),this._uiManager.enableWaiting(!1);const h=A(this,Kr,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/i,this.height=r/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,Oe,Cb).call(this),u(this,Au)||(this.parent.addUndoableEditor(this),A(this,Au,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Su)&&h.setAttribute("aria-label",u(this,Su))},Bg=function(t,n){const{width:r,height:i}=u(this,ht);let a=r,l=i,c=u(this,ht);for(;a>2*t||l>2*n;){const d=a,h=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(c,0,0,d,h,0,0,a,l),c=f.transferToImageBitmap()}return c},Cb=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,a=new S0,l=Math.ceil(r*t*a.sx),c=Math.ceil(i*n*a.sy),d=u(this,Kr);if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=u(this,hn)?u(this,ht):C(this,Oe,Bg).call(this,l,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)},zg=function(t){if(t){if(u(this,hn)){const i=this._uiManager.imageManager.getSvgUrl(u(this,Qt));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,ht),n.getContext("2d").drawImage(u(this,ht),0,0),n.toDataURL()}if(u(this,hn)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*ko.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*ko.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(u(this,ht),0,0,u(this,ht).width,u(this,ht).height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(u(this,ht))},dR=function(t){var l;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},ue(Jh,"_type","stamp"),ue(Jh,"_editorType",xe.STAMP);let jb=Jh;var nc,ju,Yr,eo,zi,On,to,Eu,rc,hr,Hi,hs,Vi,ie,so,ct,uR,Tr,kb,Pb,Hg;const Zn=class Zn{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:h}){E(this,ct);E(this,nc);E(this,ju,!1);E(this,Yr,null);E(this,eo,null);E(this,zi,null);E(this,On,new Map);E(this,to,!1);E(this,Eu,!1);E(this,rc,!1);E(this,hr,null);E(this,Hi,null);E(this,hs,null);E(this,Vi,null);E(this,ie);const f=[...u(Zn,so).values()];if(!Zn._initialized){Zn._initialized=!0;for(const p of f)p.initialize(h,e)}e.registerEditorTypes(f),A(this,ie,e),this.pageIndex=t,this.div=n,A(this,nc,i),A(this,Yr,a),this.viewport=d,A(this,hs,c),this.drawLayer=l,this._structTree=r,u(this,ie).addLayer(this)}get isEmpty(){return u(this,On).size===0}get isInvisible(){return this.isEmpty&&u(this,ie).getMode()===xe.NONE}updateToolbar(e){u(this,ie).updateToolbar(e)}updateMode(e=u(this,ie).getMode()){switch(C(this,ct,Hg).call(this),e){case xe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(Zn,so).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,hs))==null?void 0:t.div)}setEditingState(e){u(this,ie).setEditingState(e)}addCommands(e){u(this,ie).addCommands(e)}cleanUndoStack(e){u(this,ie).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Yr))==null||t.div.classList.toggle("disabled",!e)}async enable(){A(this,rc,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of u(this,On).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,ie).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!u(this,Yr)){A(this,rc,!1);return}const t=u(this,Yr).getEditableAnnotations();for(const n of t){if(n.hide(),u(this,ie).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,rc,!1)}disable(){var r;A(this,Eu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of u(this,On).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(u(this,Yr)){const i=u(this,Yr).getEditableAnnotations();for(const a of i){const{id:l}=a.data;if(u(this,ie).isDeletedAnnotationElement(l))continue;let c=t.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(l),c&&(u(this,ie).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}C(this,ct,Hg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of u(Zn,so).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Eu,!1)}getEditableAnnotation(e){var t;return((t=u(this,Yr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ie).getActive()!==e&&u(this,ie).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,hs))!=null&&e.div&&!u(this,Vi)){A(this,Vi,new AbortController);const t=u(this,ie).combinedSignal(u(this,Vi));u(this,hs).div.addEventListener("pointerdown",C(this,ct,uR).bind(this),{signal:t}),u(this,hs).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,hs))!=null&&e.div&&u(this,Vi)&&(u(this,Vi).abort(),A(this,Vi,null),u(this,hs).div.classList.remove("highlighting"))}enableClick(){if(u(this,eo))return;A(this,eo,new AbortController);const e=u(this,ie).combinedSignal(u(this,eo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,eo))==null||e.abort(),A(this,eo,null)}attach(e){u(this,On).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ie).isDeletedAnnotationElement(t)&&u(this,ie).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,On).delete(e.id),(t=u(this,nc))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,Eu)&&e.annotationElementId&&u(this,ie).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ie).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ie).addDeletedAnnotationElement(e.annotationElementId),pt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ie).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,rc)),u(this,ie).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,zi)&&(e._focusEventsAllowed=!1,A(this,zi,setTimeout(()=>{A(this,zi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ie)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,nc))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,ie).getId()}combinedSignal(e){return u(this,ie).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,ct,Tr))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,ie).updateToolbar(e),u(this,ie).updateMode(e);const{offsetX:n,offsetY:r}=C(this,ct,Pb).call(this),i=this.getNextId(),a=C(this,ct,kb).call(this,{parent:this,id:i,x:n,y:r,uiManager:u(this,ie),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=u(Zn,so).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ie)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=C(this,ct,kb).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,ie),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(C(this,ct,Pb).call(this),!0)}setSelected(e){u(this,ie).setSelected(e)}toggleSelected(e){u(this,ie).toggleSelected(e)}unselect(e){u(this,ie).unselect(e)}pointerup(e){var n;const{isMac:t}=Ps.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,to)&&(A(this,to,!1),!((n=u(this,ct,Tr))!=null&&n.isDrawer&&u(this,ct,Tr).supportMultipleDrawings))){if(!u(this,ju)){A(this,ju,!0);return}if(u(this,ie).getMode()===xe.STAMP){u(this,ie).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(u(this,ie).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),u(this,to)){A(this,to,!1);return}const{isMac:t}=Ps.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(A(this,to,!0),(r=u(this,ct,Tr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=u(this,ie).getActive();A(this,ju,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),u(this,hr)){u(this,ct,Tr).startDrawing(this,u(this,ie),!1,e);return}u(this,ie).setCurrentDrawingSession(this),A(this,hr,new AbortController);const t=u(this,ie).combinedSignal(u(this,hr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(A(this,Hi,null),this.commitOrRemove())},{signal:t}),u(this,ct,Tr).startDrawing(this,u(this,ie),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&A(this,Hi,t);return}u(this,Hi)&&setTimeout(()=>{var t;(t=u(this,Hi))==null||t.focus(),A(this,Hi,null)},0)}endDrawingSession(e=!1){return u(this,hr)?(u(this,ie).setCurrentDrawingSession(null),u(this,hr).abort(),A(this,hr,null),A(this,Hi,null),u(this,ct,Tr).endDrawing(e)):null}findNewParent(e,t,n){const r=u(this,ie).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,hr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,hr)&&u(this,ct,Tr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ie).getActive())==null?void 0:e.parent)===this&&(u(this,ie).commitOrRemove(),u(this,ie).setActiveEditor(null)),u(this,zi)&&(clearTimeout(u(this,zi)),A(this,zi,null));for(const n of u(this,On).values())(t=u(this,nc))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,On).clear(),u(this,ie).removeLayer(this)}render({viewport:e}){this.viewport=e,bc(this.div,e);for(const t of u(this,ie).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ie).commitOrRemove(),C(this,ct,Hg).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,bc(this.div,{rotation:n}),t!==n)for(const r of u(this,On).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ie).viewParameters.realScale}};nc=new WeakMap,ju=new WeakMap,Yr=new WeakMap,eo=new WeakMap,zi=new WeakMap,On=new WeakMap,to=new WeakMap,Eu=new WeakMap,rc=new WeakMap,hr=new WeakMap,Hi=new WeakMap,hs=new WeakMap,Vi=new WeakMap,ie=new WeakMap,so=new WeakMap,ct=new WeakSet,uR=function(e){u(this,ie).unselectAll();const{target:t}=e;if(t===u(this,hs).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,hs).div.contains(t)){const{isMac:n}=Ps.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,ie).showAllEditors("highlight",!0,!0),u(this,hs).div.classList.add("free"),this.toggleDrawing(),Dv.startHighlighting(this,u(this,ie).direction==="ltr",{target:u(this,hs).div,x:e.x,y:e.y}),u(this,hs).div.addEventListener("pointerup",()=>{u(this,hs).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ie)._signal}),e.preventDefault()}},Tr=function(){return u(Zn,so).get(u(this,ie).getMode())},kb=function(e){const t=u(this,ct,Tr);return t?new t.prototype.constructor(e):null},Pb=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+r),d=(i+l)/2-e,h=(a+c)/2-t,[f,p]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:p}},Hg=function(){for(const e of u(this,On).values())e.isEmpty()&&e.remove()},ue(Zn,"_initialized",!1),E(Zn,so,new Map([cb,Ab,jb,Dv].map(e=>[e._editorType,e])));let Nb=Zn;var fr,nm,js,ic,sy,hR,ai,Rb,fR,Ib;const ls=class ls{constructor({pageIndex:e}){E(this,ai);E(this,fr,null);E(this,nm,0);E(this,js,new Map);E(this,ic,new Map);this.pageIndex=e}setParent(e){if(!u(this,fr)){A(this,fr,e);return}if(u(this,fr)!==e){if(u(this,js).size>0)for(const t of u(this,js).values())t.remove(),e.append(t);A(this,fr,e)}}static get _svgFactory(){return je(this,"_svgFactory",new A1)}draw(e,t=!1,n=!1){const r=xs(this,nm)._++,i=C(this,ai,Rb).call(this),a=ls._svgFactory.createElement("defs");i.append(a);const l=ls._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,ic).set(r,l);const d=n?C(this,ai,fR).call(this,a,c):null,h=ls._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),u(this,js).set(r,i),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=xs(this,nm)._++,r=C(this,ai,Rb).call(this),i=ls._svgFactory.createElement("defs");r.append(i);const a=ls._svgFactory.createElement("path");i.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const f=ls._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=ls._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=ls._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const d=ls._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,js).set(n,r),n}finalizeDraw(e,t){u(this,ic).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:n,bbox:r,rootClass:i,path:a}=t,l=typeof e=="number"?u(this,js).get(e):e;if(l){if(n&&C(this,ai,Ib).call(this,l,n),r&&C(c=ls,sy,hR).call(c,l,r),i){const{classList:d}=l;for(const[h,f]of Object.entries(i))d.toggle(h,f)}if(a){const h=l.firstChild.firstChild;C(this,ai,Ib).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const n=u(this,js).get(e);n&&(u(t,fr).append(n),u(this,js).delete(e),u(t,js).set(e,n))}remove(e){u(this,ic).delete(e),u(this,fr)!==null&&(u(this,js).get(e).remove(),u(this,js).delete(e))}destroy(){A(this,fr,null);for(const e of u(this,js).values())e.remove();u(this,js).clear(),u(this,ic).clear()}};fr=new WeakMap,nm=new WeakMap,js=new WeakMap,ic=new WeakMap,sy=new WeakSet,hR=function(e,[t,n,r,i]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},ai=new WeakSet,Rb=function(){const e=ls._svgFactory.create(1,1,!0);return u(this,fr).append(e),e.setAttribute("aria-hidden",!0),e},fR=function(e,t){const n=ls._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=ls._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},Ib=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},E(ls,sy);let Tb=ls;globalThis.pdfjsTestingUtils={HighlightOutliner:ub};me.AbortException;me.AnnotationEditorLayer;me.AnnotationEditorParamsType;me.AnnotationEditorType;me.AnnotationEditorUIManager;me.AnnotationLayer;me.AnnotationMode;me.ColorPicker;me.DOMSVGFactory;me.DrawLayer;me.FeatureTest;var Bz=me.GlobalWorkerOptions;me.ImageKind;me.InvalidPDFException;me.MissingPDFException;me.OPS;me.OutputScale;me.PDFDataRangeTransport;me.PDFDateString;me.PDFWorker;me.PasswordResponses;me.PermissionFlag;me.PixelsPerInch;me.RenderingCancelledException;me.TextLayer;me.TouchManager;me.UnexpectedResponseException;me.Util;me.VerbosityLevel;me.XfaLayer;me.build;me.createValidAbsoluteUrl;me.fetchData;var zz=me.getDocument;me.getFilenameFromUrl;me.getPdfFilenameFromUrl;me.getXfaPageViewport;me.isDataScheme;me.isPdfFile;me.noContextMenu;me.normalizeUnicode;me.setLayerDimensions;me.shadow;me.stopEvent;var Hz=me.version;Bz.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Hz}/pdf.worker.min.js`;async function Vz(s){try{const e=await s.arrayBuffer(),t=await zz({data:e}).promise;let n="";for(let r=1;r<=t.numPages;r++){const l=(await(await t.getPage(r)).getTextContent()).items.map(c=>c.str).join(" ");n+=l+`

`}return n.trim()}catch(e){throw console.error("Error extracting text from PDF:",e),new Error("Failed to extract text from PDF. The PDF might be image-based or corrupted.")}}function hj(){const{id:s}=by(),e=ns(),{user:t}=Cn(),{toast:n}=Fo(),r=!!s,[i,a]=_.useState(!1),[l,c]=_.useState(!1),[d,h]=_.useState({title:"",slug:"",excerpt:"",content:"",cover_url:"",status:"draft",is_featured:!1}),[f,p]=_.useState([]),[m,y]=_.useState([]),[g,w]=_.useState(""),[v,b]=_.useState(!1),[x,S]=_.useState([]),[j,N]=_.useState(!1);_.useEffect(()=>{I(),r&&P()},[s]);const k=async R=>{try{const{data:O,error:H}=await V.rpc("get_article_files_with_urls",{p_article_id:R});if(H)throw H;S(O||[])}catch(O){console.error("Error fetching article files:",O)}},P=async()=>{var R;try{const{data:O,error:H}=await V.from("articles").select(`
          *,
          article_tags(tag_id, tags(*))
        `).eq("id",s).single();if(H)throw H;h(O),p(((R=O.article_tags)==null?void 0:R.map(Q=>Q.tags))||[]),await k(O.id)}catch(O){console.error("Error fetching article:",O),n({title:"Error",description:"Failed to load article",variant:"destructive"})}},I=async()=>{try{const{data:R,error:O}=await V.from("tags").select("*").order("name");if(O)throw O;y(R||[])}catch(R){console.error("Error fetching tags:",R)}},T=R=>R.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").slice(0,100),M=R=>{h(O=>({...O,title:R,slug:T(R)}))},U=async R=>{if(R){if(!["image/jpeg","image/png","image/webp"].includes(R.type)){n({title:"Error",description:"Only JPEG, PNG, and WebP images are allowed",variant:"destructive"});return}if(R.size>5*1024*1024){n({title:"Error",description:"Image must be less than 5MB",variant:"destructive"});return}b(!0);try{const O=R.name.split(".").pop(),H=`${Date.now()}-${Math.random().toString(36).substring(2)}.${O}`,Q=`covers/${t==null?void 0:t.id}/${H}`,{error:ae}=await V.storage.from("article-images").upload(Q,R);if(ae)throw ae;const{data:pe}=V.storage.from("article-images").getPublicUrl(Q);h(Ie=>({...Ie,cover_url:pe.publicUrl})),n({title:"Success",description:"Image uploaded successfully"})}catch(O){console.error("Error uploading image:",O),n({title:"Error",description:"Failed to upload image",variant:"destructive"})}finally{b(!1)}}},z=async R=>{if(R){if(R.type!=="application/pdf"){n({title:"Error",description:"Only PDF files are allowed",variant:"destructive"});return}if(R.size>20*1024*1024){n({title:"Error",description:"File must be less than 20MB",variant:"destructive"});return}N(!0);try{const H=`${Date.now()}-${R.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`,Q=`pdfs/${d.id||"temp"}/${H}`,{error:ae}=await V.storage.from("article-files").upload(Q,R);if(ae)throw ae;const pe={article_id:d.id,file_name:R.name,storage_path:Q,content_type:R.type,file_size_bytes:R.size,uploaded_by:t==null?void 0:t.id,is_primary:x.length===0},{data:Ie,error:Ee}=await V.from("article_files").insert([pe]).select().single();if(Ee)throw Ee;S(G=>[...G,Ie]),n({title:"Success",description:"PDF uploaded successfully"})}catch(O){console.error("Error uploading PDF:",O),n({title:"Error",description:"Failed to upload PDF",variant:"destructive"})}finally{N(!1)}}},B=async R=>{try{const{error:O}=await V.from("article_files").delete().eq("id",R);if(O)throw O;S(H=>H.filter(Q=>Q.id!==R)),n({title:"Success",description:"File deleted successfully"})}catch(O){console.error("Error deleting file:",O),n({title:"Error",description:"Failed to delete file",variant:"destructive"})}},J=async R=>{try{await V.from("article_files").update({is_primary:!1}).eq("article_id",d.id);const{error:O}=await V.from("article_files").update({is_primary:!0}).eq("id",R);if(O)throw O;S(H=>H.map(Q=>({...Q,is_primary:Q.id===R}))),n({title:"Success",description:"Primary file updated"})}catch(O){console.error("Error updating primary file:",O),n({title:"Error",description:"Failed to update primary file",variant:"destructive"})}},F=async(R=!1)=>{if(!d.title){n({title:"Error",description:"Title is required",variant:"destructive"});return}let O=d.content;if(!O&&x.length>0){const H=x.find(Q=>Q.is_primary)||x[0];if(H)try{c(!0),n({title:"Extracting PDF text",description:"Please wait while we extract text from your PDF..."});const{data:Q,error:ae}=await V.storage.from("article-files").download(H.storage_path);if(ae)throw ae;O=await Vz(new File([Q],H.file_name)),n({title:"Text extracted",description:"PDF text has been extracted and will be used as article content"})}catch(Q){console.error("Error extracting PDF text:",Q),n({title:"Error",description:"Failed to extract text from PDF. Please provide content manually.",variant:"destructive"});return}}if(!O){n({title:"Error",description:"Content is required. Please provide content or upload a PDF file.",variant:"destructive"});return}c(!0);try{const H={...d,content:O,status:R?"published":"draft",published_at:R&&!d.published_at?new Date().toISOString():d.published_at,author:t==null?void 0:t.id};let Q;if(r){const{data:ae,error:pe}=await V.from("articles").update(H).eq("id",s).select().single();if(pe)throw pe;Q=ae}else{const{data:ae,error:pe}=await V.from("articles").insert(H).select().single();if(pe)throw pe;Q=ae}if(r&&await V.from("article_tags").delete().eq("article_id",Q.id),f.length>0){const ae=f.map(Ie=>({article_id:Q.id,tag_id:Ie.id})),{error:pe}=await V.from("article_tags").insert(ae);if(pe)throw pe}if(!r&&x.length>0){const{error:ae}=await V.from("article_files").update({article_id:Q.id}).is("article_id",null);if(ae)throw ae}await V.rpc("log_article_action",{p_article_id:Q.id,p_action:r?"update":"create"}),n({title:"Success",description:`Article ${r?"updated":"created"} successfully`}),r||e(`/admin/articles/${Q.id}/edit`)}catch(H){console.error("Error saving article:",H),n({title:"Error",description:"Failed to save article",variant:"destructive"})}finally{c(!1)}},W=async()=>{if(g.trim())try{const{data:R,error:O}=await V.from("tags").insert({name:g.trim()}).select().single();if(O)throw O;y(H=>[...H,R]),p(H=>[...H,R]),w("")}catch(R){console.error("Error creating tag:",R),n({title:"Error",description:"Failed to create tag",variant:"destructive"})}},D=R=>{p(O=>O.find(H=>H.id===R.id)?O.filter(H=>H.id!==R.id):[...O,R])};return i?o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:r?"Edit Article":"Create New Article"}),o.jsx("p",{className:"text-muted-foreground",children:r?"Update your article content":"Write a new article for your blog"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx($,{variant:"outline",asChild:!0,children:o.jsxs("a",{href:`/articles/${d.slug}`,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(_o,{className:"w-4 h-4 mr-2"}),"Preview"]})}),o.jsxs($,{variant:"outline",onClick:()=>F(!1),disabled:l,children:[o.jsx(EN,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),o.jsx($,{onClick:()=>F(!0),disabled:l,children:d.status==="published"?"Update":"Publish"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Basic Information"})}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"title",children:"Title *"}),o.jsx(Z,{id:"title",value:d.title,onChange:R=>M(R.target.value),placeholder:"Enter article title"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"slug",children:"Slug"}),o.jsx(Z,{id:"slug",value:d.slug,onChange:R=>h(O=>({...O,slug:R.target.value})),placeholder:"url-friendly-slug"})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"excerpt",children:"Excerpt"}),o.jsx(Zs,{id:"excerpt",value:d.excerpt,onChange:R=>h(O=>({...O,excerpt:R.target.value})),placeholder:"Brief description of the article",rows:3})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(mT,{id:"featured",checked:d.is_featured,onCheckedChange:R=>h(O=>({...O,is_featured:R}))}),o.jsx(oe,{htmlFor:"featured",children:"Featured article"})]})]})]}),o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Cover Image"})}),o.jsxs(te,{children:[d.cover_url?o.jsxs("div",{className:"space-y-4",children:[o.jsx("img",{src:d.cover_url,alt:"Cover",className:"w-full max-w-md h-48 object-cover rounded-lg"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs($,{variant:"outline",onClick:()=>{var R;return(R=document.getElementById("image-upload"))==null?void 0:R.click()},disabled:v,children:[o.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Change Image"]}),o.jsxs($,{variant:"destructive",onClick:()=>h(R=>({...R,cover_url:""})),children:[o.jsx(Ao,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]}):o.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[o.jsx(Zr,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a cover image"}),o.jsx($,{onClick:()=>{var R;return(R=document.getElementById("image-upload"))==null?void 0:R.click()},disabled:v,children:"Choose File"})]}),o.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:R=>{var O;return((O=R.target.files)==null?void 0:O[0])&&U(R.target.files[0])},className:"hidden"})]})]}),o.jsxs(K,{children:[o.jsx(ze,{children:o.jsxs(He,{children:["Content ",x.length===0?"*":"(optional if PDF uploaded)"]})}),o.jsxs(te,{children:[o.jsx(Zs,{value:d.content,onChange:R=>h(O=>({...O,content:R.target.value})),placeholder:x.length>0?"Write your article content here, or leave blank to use extracted PDF text...":"Write your article content here...",rows:20,className:"font-mono"}),x.length>0&&!d.content&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Content will be automatically extracted from your uploaded PDF file."})]})]}),o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Tags"})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{value:g,onChange:R=>w(R.target.value),placeholder:"Add new tag",onKeyPress:R=>R.key==="Enter"&&W()}),o.jsx($,{onClick:W,disabled:!g.trim(),children:o.jsx(ni,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(R=>o.jsx(be,{variant:f.find(O=>O.id===R.id)?"default":"secondary",className:"cursor-pointer",onClick:()=>D(R),children:R.name},R.id))})]})})]}),o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Documents & Attachments (PDF)"})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[o.jsx(Zr,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload PDF documents to attach to this article"}),o.jsx("input",{type:"file",accept:".pdf,application/pdf",onChange:R=>{var H;const O=(H=R.target.files)==null?void 0:H[0];O&&z(O)},className:"hidden",id:"pdf-upload",disabled:j}),o.jsx("label",{htmlFor:"pdf-upload",children:o.jsx($,{variant:"outline",disabled:j,asChild:!0,children:o.jsx("span",{children:j?"Uploading...":"Choose PDF File"})})}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Maximum file size: 20 MB"})]}),x.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-medium",children:"Uploaded Files"}),x.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ws,{className:"h-8 w-8 text-red-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:R.file_name}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.file_size_bytes<1024*1024?`${Math.round(R.file_size_bytes/1024)} KB`:`${(R.file_size_bytes/(1024*1024)).toFixed(1)} MB`,"  PDF Document",R.is_primary&&o.jsx(be,{variant:"secondary",className:"ml-2 text-xs",children:"Primary"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!R.is_primary&&o.jsx($,{variant:"outline",size:"sm",onClick:()=>J(R.id),children:"Set Primary"}),o.jsxs($,{variant:"outline",size:"sm",onClick:()=>window.open(R.signed_url,"_blank"),children:[o.jsx(_o,{className:"h-4 w-4 mr-2"}),"Preview"]}),o.jsx($,{variant:"destructive",size:"sm",onClick:()=>B(R.id),children:o.jsx(Ao,{className:"h-4 w-4"})})]})]},R.id))]})]})})]})]})]})}function Wz(){const[s,e]=_.useState([]),[t,n]=_.useState([]),[r,i]=_.useState(!0),[a,l]=_.useState(""),[c,d]=_.useState(!1);T_();const[h,f]=_.useState(1),[p,m]=_.useState(!0),[y,g]=_.useState(!1),{toast:w}=Fo(),v=10;_.useEffect(()=>{b()},[]);const b=async(I=1,T=!1)=>{try{const M=(I-1)*v,U=M+v-1,{data:z,error:B}=await V.from("articles").select(`
          *,
          author_profile:profiles!articles_author_fkey(full_name)
        `,{count:"exact"}).eq("status","published").order("published_at",{ascending:!1}).range(M,U);if(B)throw B;e(T?J=>[...J,...z||[]]:z||[]),m(((z==null?void 0:z.length)||0)===v),f(I)}catch(M){console.error("Error fetching articles:",M),w({title:"Error",description:"Failed to load articles",variant:"destructive"})}finally{i(!1),g(!1)}},x=async I=>{if(!I.trim()){n([]),d(!1),f(1),m(!0),b(1,!1);return}d(!0),f(1),m(!1);try{const{data:T,error:M}=await V.rpc("search_articles",{q:I.trim(),lim:50});if(M)throw M;n(T||[])}catch(T){console.error("Error searching articles:",T),w({title:"Search Error",description:"Failed to search articles",variant:"destructive"})}finally{d(!1)}},S=I=>{I.preventDefault(),x(a)},j=I=>{l(I),I.trim()||(n([]),d(!1),f(1),m(!0),b(1,!1))},N=()=>{!y&&p&&!c&&(g(!0),b(h+1,!0))},k=t.length>0?t:s,P=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r?o.jsx("div",{className:"min-h-screen bg-background",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})}):o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"max-w-2xl mx-auto mb-8",children:[o.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Z,{type:"text",placeholder:"Search articles...",value:a,onChange:I=>j(I.target.value),className:"pl-10"})]}),o.jsx($,{type:"submit",disabled:c,children:c?"Searching...":"Search"})]}),t.length>0&&o.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Found ",t.length," result",t.length!==1?"s":"",' for "',a,'"']})]}),k.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ws,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-2xl font-semibold mb-2",children:a?"No articles found":"No articles published yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:a?"Try adjusting your search terms or browse all articles.":"Check back later for new content."}),a&&o.jsx($,{onClick:()=>{l(""),n([]),d(!1),f(1),m(!0),b(1,!1)},children:"View All Articles"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-8",children:k.map(I=>{var T;return o.jsx(K,{className:"group hover:shadow-lg transition-shadow duration-200 overflow-hidden",children:o.jsx(te,{className:"p-0",children:o.jsxs("div",{className:"md:flex",children:[o.jsx("div",{className:"md:w-1/3",children:I.cover_url?o.jsx("div",{className:"aspect-video md:aspect-square overflow-hidden",children:o.jsx("img",{src:I.cover_url,alt:I.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"})}):I.pdf_url?o.jsx("div",{className:"aspect-video md:aspect-square bg-red-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ws,{className:"h-16 w-16 mx-auto mb-2 text-red-500"}),o.jsx("p",{className:"text-sm font-medium text-red-700",children:"PDF Document"})]})}):o.jsx("div",{className:"aspect-video md:aspect-square bg-muted flex items-center justify-center",children:o.jsx(Ws,{className:"h-16 w-16 text-muted-foreground"})})}),o.jsxs("div",{className:"md:w-2/3 p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[I.is_featured&&o.jsx(be,{variant:"default",children:"Featured"}),I.pdf_url&&o.jsx(be,{variant:"secondary",className:"bg-red-100 text-red-800",children:"PDF Article"}),"rank"in I&&o.jsxs(be,{variant:"secondary",children:["Match: ",I.rank.toFixed(1)]})]}),o.jsx("h3",{className:"text-2xl font-bold mb-3 group-hover:text-primary transition-colors",children:o.jsx(Ns,{to:`/articles/${I.slug}`,children:I.title})}),I.excerpt&&o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3 text-lg leading-relaxed",children:I.excerpt}),I.pdf_url&&o.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-lg border border-red-200",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[o.jsx(Ws,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"PDF Document Available"})]}),I.pdf_title&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:I.pdf_title}),I.pdf_file_size&&o.jsxs("p",{className:"text-xs text-red-500",children:[(I.pdf_file_size/1024/1024).toFixed(1)," MB"]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(So,{className:"h-4 w-4"}),"author_profile"in I&&((T=I.author_profile)!=null&&T.full_name)?I.author_profile.full_name:"ViaEstate Team"]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Yi,{className:"h-4 w-4"}),P(I.published_at||I.created_at)]})]}),o.jsxs(Ns,{to:`/articles/${I.slug}`,className:"inline-flex items-center text-primary hover:text-primary/80 font-medium",children:[I.pdf_url&&!I.content?"View PDF":"Read More",o.jsx(_N,{className:"h-4 w-4 ml-1"})]})]})]})]})})},I.id)})}),p&&!c&&!r&&o.jsx("div",{className:"text-center mt-8",children:o.jsx($,{onClick:N,disabled:y,variant:"outline",size:"lg",children:y?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"}),"Loading..."]}):"Load More Articles"})})]}),k.length>0&&!a&&o.jsx("div",{className:"text-center mt-8",children:o.jsxs("p",{className:"text-muted-foreground",children:["Showing ",k.length," article",k.length!==1?"s":""]})})]})})}function qz(){var b;const{slug:s}=by(),[e,t]=_.useState(null),[n,r]=_.useState([]),[i,a]=_.useState(!0),[l,c]=_.useState(""),[d,h]=_.useState(!1),{toast:f}=Fo();_.useEffect(()=>{s&&p()},[s]);const p=async()=>{try{const{data:x,error:S}=await V.from("articles").select(`
          *,
          author_profile:profiles!articles_author_fkey(full_name)
        `).eq("slug",s).eq("status","published").single();if(S)throw S;t(x),await m(x.id)}catch(x){console.error("Error fetching article:",x),f({title:"Error",description:"Article not found or not published",variant:"destructive"})}finally{a(!1)}},m=async x=>{try{const{data:S,error:j}=await V.rpc("get_article_files_with_urls",{p_article_id:x});if(j)throw j;r(S||[])}catch(S){console.error("Error fetching article files:",S)}},y=async x=>{try{c(x.signed_url||""),h(!0)}catch(S){console.error("Error generating PDF preview:",S),f({title:"Error",description:"Failed to load PDF preview",variant:"destructive"})}},g=x=>{if(x.signed_url){const S=document.createElement("a");S.href=x.signed_url,S.download=x.file_name,S.target="_blank",document.body.appendChild(S),S.click(),document.body.removeChild(S),f({title:"Download Started",description:`Downloading ${x.file_name}`})}},w=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),v=x=>x<1024?`${x} B`:x<1024*1024?`${Math.round(x/1024)} KB`:`${(x/(1024*1024)).toFixed(1)} MB`;return i?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{showFilters:!0}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})]}):e?o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"mb-6",children:o.jsx($,{variant:"ghost",asChild:!0,className:"mb-4",children:o.jsxs(Ns,{to:"/articles",children:[o.jsx(r0,{className:"h-4 w-4 mr-2"}),"Back to Articles"]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.is_featured&&o.jsx(be,{variant:"default",className:"text-sm",children:"Featured Article"}),o.jsx(be,{variant:"secondary",className:"text-sm",children:"Published"})]}),o.jsx("h1",{className:"text-4xl font-bold mb-4 leading-tight",children:e.title}),o.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:e.excerpt}),o.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground border-b border-border pb-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(So,{className:"h-4 w-4"}),o.jsxs("span",{children:["By ",((b=e.author_profile)==null?void 0:b.full_name)||"ViaEstate Team"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yi,{className:"h-4 w-4"}),o.jsx("span",{children:w(e.published_at||e.created_at)})]})]})]}),e.cover_url&&o.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:o.jsx("img",{src:e.cover_url,alt:e.title,className:"w-full max-h-96 object-cover rounded-lg shadow-lg"})}),e.content&&o.jsx("div",{className:"max-w-4xl mx-auto mb-12",children:o.jsx("div",{className:"prose prose-lg max-w-none",children:o.jsx("div",{className:"text-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:e.content.replace(/\n/g,"<br>")}})})}),e.pdf_url&&o.jsx("div",{className:"max-w-4xl mx-auto mb-12",children:o.jsx(K,{children:o.jsxs(te,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[o.jsx(Ws,{className:"h-6 w-6 text-red-500"}),"PDF Document"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs($,{variant:"outline",onClick:()=>window.open(e.pdf_url,"_blank"),children:[o.jsx(_o,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),o.jsxs($,{variant:"outline",onClick:()=>{const x=document.createElement("a");x.href=e.pdf_url,x.download=e.pdf_title||e.title+".pdf",x.target="_blank",document.body.appendChild(x),x.click(),document.body.removeChild(x)},children:[o.jsx(yA,{className:"h-4 w-4 mr-2"}),"Download"]})]})]}),o.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:o.jsx("iframe",{src:e.pdf_url,className:"w-full h-[600px] border-0",title:`PDF: ${e.pdf_title||e.title}`})}),e.pdf_title&&o.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Document: ",e.pdf_title,e.pdf_file_size&&o.jsxs("span",{className:"ml-2",children:[" ",(e.pdf_file_size/1024/1024).toFixed(1)," MB"]})]})]})})}),n.length>0&&o.jsx("div",{className:"max-w-4xl mx-auto mb-12",children:o.jsx(K,{children:o.jsxs(te,{className:"p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[o.jsx(Ws,{className:"h-6 w-6"}),"Additional Documents"]}),o.jsx("div",{className:"space-y-4",children:n.map(x=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ws,{className:"h-8 w-8 text-red-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:x.file_name}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[v(x.file_size_bytes),"  PDF Document",x.is_primary&&o.jsx(be,{variant:"secondary",className:"ml-2 text-xs",children:"Primary"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs($u,{open:d&&l===x.signed_url,onOpenChange:h,children:[o.jsx(Nv,{asChild:!0,children:o.jsxs($,{variant:"outline",size:"sm",onClick:()=>y(x),children:[o.jsx(_o,{className:"h-4 w-4 mr-2"}),"Preview"]})}),o.jsxs(yc,{className:"max-w-4xl max-h-[90vh]",children:[o.jsx(xc,{children:o.jsx(wc,{children:x.file_name})}),o.jsx("div",{className:"w-full h-[70vh]",children:o.jsx("iframe",{src:l,className:"w-full h-full border-0 rounded",title:`Preview of ${x.file_name}`})})]})]}),o.jsxs($,{variant:"outline",size:"sm",onClick:()=>g(x),children:[o.jsx(yA,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},x.id))})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto text-center",children:o.jsxs("div",{className:"border-t border-border pt-8",children:[o.jsx("p",{className:"text-muted-foreground mb-4",children:"Enjoyed this article? Check out more content on our blog."}),o.jsx($,{asChild:!0,children:o.jsxs(Ns,{to:"/articles",children:[o.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Browse All Articles"]})})]})})]})}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{showFilters:!0}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ws,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Article Not Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"The article you're looking for doesn't exist or has been removed."}),o.jsx($,{asChild:!0,children:o.jsxs(Ns,{to:"/articles",children:[o.jsx(r0,{className:"h-4 w-4 mr-2"}),"Back to Articles"]})})]})})]})}const Gz=()=>{const{user:s,profile:e}=Cn(),[t,n]=_.useState([]),[r,i]=_.useState(!0),[a,l]=_.useState(""),[c,d]=_.useState(!1),[h,f]=_.useState({title:"",content:""});_.useEffect(()=>{p()},[]);const p=async()=>{try{let g=V.from("forum_posts").select(`
          *,
          profiles:user_id (
            full_name,
            role
          )
        `).eq("status","approved").order("created_at",{ascending:!1});a&&(g=g.or(`title.ilike.%${a}%,content.ilike.%${a}%`));const{data:w,error:v}=await g;if(v)throw v;n(w||[])}catch(g){De({title:"Error fetching posts",description:g.message,variant:"destructive"})}finally{i(!1)}},m=async g=>{if(g.preventDefault(),!s){De({title:"Please sign in",description:"You need to be logged in to create a post.",variant:"destructive"});return}try{const{error:w}=await V.from("forum_posts").insert({title:h.title,content:h.content,user_id:s.id,status:"pending"});if(w)throw w;De({title:"Post submitted!",description:"Your post has been submitted for review and will be published soon."}),f({title:"",content:""}),d(!1)}catch(w){De({title:"Error creating post",description:w.message,variant:"destructive"})}},y=g=>{const w=new Date(g),b=Math.floor((new Date().getTime()-w.getTime())/1e3);return b<60?"Just now":b<3600?`${Math.floor(b/60)} minutes ago`:b<86400?`${Math.floor(b/3600)} hours ago`:b<2592e3?`${Math.floor(b/86400)} days ago`:w.toLocaleDateString()};return o.jsx("div",{className:"min-h-screen bg-background",children:o.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs($u,{open:c,onOpenChange:d,children:[o.jsx(Nv,{asChild:!0,children:o.jsxs($,{children:[o.jsx(ni,{className:"h-4 w-4 mr-2"}),"New Post"]})}),o.jsxs(yc,{className:"max-w-2xl",children:[o.jsxs(xc,{children:[o.jsx(wc,{children:"Create New Post"}),o.jsx(xP,{children:"Share your thoughts, ask questions, or start a discussion with the community. Your post will be reviewed before being published."})]}),o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"post-title",children:"Title *"}),o.jsx(Z,{id:"post-title",placeholder:"What's your post about?",value:h.title,onChange:g=>f({...h,title:g.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(oe,{htmlFor:"post-content",children:"Content *"}),o.jsx(Zs,{id:"post-content",placeholder:"Share your thoughts...",rows:6,value:h.content,onChange:g=>f({...h,content:g.target.value}),required:!0})]}),!s&&o.jsx("div",{className:"bg-muted p-4 rounded-lg",children:o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Please ",o.jsx("span",{className:"text-primary font-semibold",children:"sign in"})," to create a post."]})}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx($,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),o.jsx($,{type:"submit",disabled:!s,children:"Submit for Review"})]})]})]})]}),o.jsx(K,{className:"mb-8",children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"relative",children:[o.jsx(Ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Z,{placeholder:"Search forum posts...",value:a,onChange:g=>l(g.target.value),className:"pl-10"})]})})}),r?o.jsx("div",{className:"space-y-4",children:[...Array(5)].map((g,w)=>o.jsx(K,{className:"animate-pulse",children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-6 bg-muted rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-full"}),o.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})})},w))}):t.length===0?o.jsx(K,{children:o.jsxs(te,{className:"p-12 text-center",children:[o.jsx(a0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No posts found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:a?"Try adjusting your search terms or browse all posts.":"Be the first to start a discussion in our community!"}),!a&&o.jsxs($,{onClick:()=>d(!0),children:[o.jsx(ni,{className:"h-4 w-4 mr-2"}),"Create First Post"]})]})}):o.jsx("div",{className:"space-y-6",children:t.map(g=>{var w,v;return o.jsxs(K,{className:"hover:shadow-lg transition-shadow",children:[o.jsx(ze,{children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{children:[o.jsx(He,{className:"text-xl mb-2",children:g.title}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(So,{className:"h-4 w-4"}),o.jsx("span",{children:((w=g.profiles)==null?void 0:w.full_name)||"Anonymous"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(i0,{className:"h-4 w-4"}),o.jsx("span",{children:y(g.created_at)})]}),((v=g.profiles)==null?void 0:v.role)&&o.jsx(be,{variant:"outline",children:g.profiles.role==="broker"?"Professional":"Community Member"})]})]})})}),o.jsx(te,{children:o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:g.content})})]},g.id)})})]})})},Kz=()=>{const{user:s,profile:e}=Cn(),t=ns(),{toast:n}=Fo(),[r,i]=_.useState([]),[a,l]=_.useState([]),[c,d]=_.useState([]),[h,f]=_.useState(!0);_.useEffect(()=>{if(!s){t("/login");return}if(e&&e.role!=="broker"){t("/dashboard");return}e&&p()},[s,e,t]);const p=async()=>{try{const{data:w,error:v}=await V.from("properties").select("*").eq("owner_id",s==null?void 0:s.id).order("created_at",{ascending:!1});if(v)throw v;const{data:b,error:x}=await V.from("property_requests").select("*").eq("status","open").order("created_at",{ascending:!1});if(x)throw x;const{data:S,error:j}=await V.from("property_requests").select("*").eq("claimed_by",s==null?void 0:s.id).order("created_at",{ascending:!1});if(j)throw j;i(w||[]),l(b||[]),d(S||[])}catch(w){console.error("Error fetching agent data:",w),n({title:"Error",description:"Failed to load agent data.",variant:"destructive"})}finally{f(!1)}},m=async w=>{try{const{error:v}=await V.from("property_requests").update({status:"claimed",claimed_by:s==null?void 0:s.id,claimed_at:new Date().toISOString()}).eq("id",w).eq("status","open");if(v)throw v;n({title:"Request Claimed",description:"You have successfully claimed this property request."}),p()}catch(v){console.error("Error claiming request:",v),n({title:"Error",description:v.message||"Failed to claim request. It may have been claimed by another agent.",variant:"destructive"})}},y=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(w),g=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return!s||e&&e.role!=="broker"?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx(K,{className:"w-96",children:o.jsxs(te,{className:"p-8 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be logged in as a broker to access this panel."}),o.jsx($,{onClick:()=>t("/login"),children:"Sign In"})]})})}):h?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"text-center",children:"Loading agent panel..."})})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Agent Panel"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your properties and claim new customer requests"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"My Properties"}),o.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),o.jsx(Xi,{className:"h-8 w-8 text-primary"})]})})}),o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Open Requests"}),o.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),o.jsx(i0,{className:"h-8 w-8 text-orange-500"})]})})}),o.jsx(K,{children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Claimed Requests"}),o.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),o.jsx(md,{className:"h-8 w-8 text-green-500"})]})})})]}),o.jsxs(Fy,{defaultValue:"properties",className:"space-y-6",children:[o.jsxs(pm,{className:"grid w-full grid-cols-3",children:[o.jsx(es,{value:"properties",children:"My Properties"}),o.jsx(es,{value:"requests",children:"Available Requests"}),o.jsx(es,{value:"claimed",children:"My Claimed Requests"})]}),o.jsx(Cs,{value:"properties",children:o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"My Properties"})}),o.jsx(te,{children:r.length>0?o.jsx("div",{className:"space-y-4",children:r.map(w=>o.jsx(K,{className:"p-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:w.title}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Qi,{className:"h-4 w-4"}),w.city,", ",w.country]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(gd,{className:"h-4 w-4"}),y(w.price)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Yi,{className:"h-4 w-4"}),g(w.created_at)]})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:w.description})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(be,{variant:w.status==="published"?"default":"secondary",children:w.status}),o.jsx($,{size:"sm",variant:"outline",children:"Edit"})]})]})},w.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Xi,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"No properties listed yet. Start by adding a property!"}),o.jsx($,{className:"mt-4",onClick:()=>t("/list-property"),children:"Add Property"})]})})]})}),o.jsx(Cs,{value:"requests",children:o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"Available Property Requests"})}),o.jsx(te,{children:a.length>0?o.jsx("div",{className:"space-y-4",children:a.map(w=>o.jsx(K,{className:"p-4 border-l-4 border-l-orange-500",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:w.title}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(So,{className:"h-4 w-4"}),w.customer_name]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Qi,{className:"h-4 w-4"}),w.city,", ",w.country]}),w.estimated_price&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(gd,{className:"h-4 w-4"}),y(w.estimated_price)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Yi,{className:"h-4 w-4"}),g(w.created_at)]})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.description}),o.jsx(be,{variant:"secondary",className:"mt-2",children:w.property_type})]}),o.jsx($,{onClick:()=>m(w.id),className:"ml-4",children:"Claim Request"})]})},w.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(i0,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"No open property requests available at the moment."})]})})]})}),o.jsx(Cs,{value:"claimed",children:o.jsxs(K,{children:[o.jsx(ze,{children:o.jsx(He,{children:"My Claimed Requests"})}),o.jsx(te,{children:c.length>0?o.jsx("div",{className:"space-y-4",children:c.map(w=>o.jsx(K,{className:"p-4 border-l-4 border-l-green-500",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:w.title}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(So,{className:"h-4 w-4"}),w.customer_name]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Qi,{className:"h-4 w-4"}),w.city,", ",w.country]}),w.estimated_price&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(gd,{className:"h-4 w-4"}),y(w.estimated_price)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Yi,{className:"h-4 w-4"}),"Claimed: ",g(w.claimed_at)]})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.description}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx(be,{variant:"secondary",children:w.property_type}),o.jsx(be,{variant:"default",children:w.status})]})]}),o.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[o.jsx($,{size:"sm",variant:"outline",children:"Contact Customer"}),o.jsx($,{size:"sm",children:"Mark Complete"})]})]})},w.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(md,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"No claimed requests yet. Check the available requests to get started!"})]})})]})})]})]})]})},Xz=()=>{const s=[{icon:o.jsx(z_,{className:"h-6 w-6"}),title:"Digital Marketing",description:"We promote your listings across our social media platforms and targeted channels."},{icon:o.jsx(bo,{className:"h-6 w-6"}),title:"Property Listings",description:"We publish your business properties on our exclusive ViaEstate platform, where potential buyers and investors actively search."},{icon:o.jsx(wf,{className:"h-6 w-6"}),title:"Lead Generation",description:"We connect brokers directly to new, verified leads and customers."},{icon:o.jsx(h4,{className:"h-6 w-6"}),title:"Performance Statistics",description:"We provide detailed insights and analytics on how your properties perform online."}],e=["Connecting people and properties","Smart digital marketing","Data-driven insights","Professional property showcase"];return o.jsx("div",{className:"min-h-screen bg-background",children:o.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:o.jsxs("span",{className:"text-3xl font-bold",children:[o.jsx("span",{className:"text-muted-foreground",children:"Via"}),o.jsx("span",{className:"text-primary",children:"Estate"})]})}),o.jsx(be,{className:"mb-4 bg-primary/10 text-primary hover:bg-primary/20",children:"About ViaEstate"}),o.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold mb-6",children:["About ",o.jsx("span",{className:"text-primary",children:"Us"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"ViaEstate was founded in Karlstad, Sweden, in 2025 with a clear vision, to make it easier for real estate businesses and private sellers to connect across Europe."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-16",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Our Mission"}),o.jsx("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:"We act as the bridge between brokers, private clients, and potential buyers by offering digital visibility, marketing expertise, and data-driven insights."}),o.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Our goal is simple: to help real estate businesses grow, reach more clients, and showcase their properties in the most professional and appealing way possible."})]}),o.jsx("div",{className:"relative",children:o.jsxs(K,{className:"p-8 bg-gradient-subtle border-primary/20",children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center",children:o.jsx(CN,{className:"h-8 w-8 text-primary-foreground"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold",children:"Founded 2025"}),o.jsx("p",{className:"text-muted-foreground",children:"Karlstad, Sweden"})]})]}),o.jsx("div",{className:"space-y-3",children:e.map((t,n)=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(md,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"text-sm",children:t})]},n))})]})})]}),o.jsxs("div",{className:"mb-16",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Our Services"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"We specialize in connecting people and properties through smart digital marketing and exposure."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.map((t,n)=>o.jsx(K,{className:"p-6 hover:shadow-elegant transition-smooth",children:o.jsx(te,{className:"p-0",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center text-primary flex-shrink-0",children:t.icon}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.description})]})]})})},n))})]}),o.jsx(K,{className:"p-8 bg-gradient-primary text-primary-foreground",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary-foreground/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(wf,{className:"h-8 w-8 text-primary-foreground"})}),o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"New Feature for Private Clients"}),o.jsx("p",{className:"text-lg text-primary-foreground/90 max-w-4xl mx-auto leading-relaxed mb-6",children:"Our platform also allows private individuals to list their own properties. From there, brokers can claim and assist these listings  helping private sellers get professional support to close their deals faster."}),o.jsx("p",{className:"text-lg text-primary-foreground/90 max-w-3xl mx-auto",children:"This feature creates new opportunities for both sides  private clients gain professional help, and brokers gain new potential listings."})]})})]})})})},Yz=()=>{const s=oi();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(qs,{}),o.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:o.jsxs("div",{className:"text-center space-y-6 max-w-md mx-auto px-4",children:[o.jsx(f4,{className:"h-16 w-16 text-primary mx-auto"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-6xl font-bold text-primary",children:"404"}),o.jsx("h2",{className:"text-2xl font-semibold",children:"Page Not Found"}),o.jsx("p",{className:"text-muted-foreground",children:"Sorry, the page you're looking for doesn't exist or has been moved."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx($,{asChild:!0,size:"lg",className:"w-full",children:o.jsxs(Ns,{to:"/",children:[o.jsx(lc,{className:"h-4 w-4 mr-2"}),"Return to Home"]})}),o.jsx($,{asChild:!0,variant:"outline",size:"lg",className:"w-full",children:o.jsx(Ns,{to:"/properties",children:"Browse Properties"})})]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Path attempted: ",o.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:s.pathname})]})]})})]})},Qz=()=>o.jsx(oF,{children:o.jsxs(UL,{children:[o.jsx(oT,{}),o.jsxs(TL,{children:[o.jsx(yt,{path:"/",element:o.jsx(ZU,{})}),o.jsx(yt,{path:"/login",element:o.jsx(mB,{})}),o.jsx(yt,{path:"/auth/callback",element:o.jsx(gB,{})}),o.jsx(yt,{path:"/properties",element:o.jsx(VA,{})}),o.jsx(yt,{path:"/properties/:id",element:o.jsx(VA,{})}),o.jsx(yt,{path:"/articles",element:o.jsx(Wz,{})}),o.jsx(yt,{path:"/articles/:slug",element:o.jsx(qz,{})}),o.jsx(yt,{path:"/about",element:o.jsx(Xz,{})}),o.jsx(yt,{path:"/forum",element:o.jsx(Gz,{})}),o.jsx(yt,{path:"/packages",element:o.jsx(bB,{})}),o.jsx(yt,{path:"/dashboard",element:o.jsx(Nr,{children:o.jsx(LB,{})})}),o.jsx(yt,{path:"/panel",element:o.jsx(Nr,{children:o.jsx(qA,{})})}),o.jsx(yt,{path:"/list-property",element:o.jsx(Nr,{children:o.jsx(yB,{})})}),o.jsx(yt,{path:"/submit-property",element:o.jsx(Nr,{children:o.jsx(wB,{})})}),o.jsx(yt,{path:"/edit-property/:id",element:o.jsx(Nr,{children:o.jsx(DB,{})})}),o.jsx(yt,{path:"/admin",element:o.jsx(Nr,{allowedRoles:["admin"],children:o.jsx(qA,{})})}),o.jsx(yt,{path:"/admin/articles",element:o.jsx(Nr,{allowedRoles:["admin"],children:o.jsx(OB,{})})}),o.jsx(yt,{path:"/admin/articles/new",element:o.jsx(Nr,{allowedRoles:["admin"],children:o.jsx(hj,{})})}),o.jsx(yt,{path:"/admin/articles/:id/edit",element:o.jsx(Nr,{allowedRoles:["admin"],children:o.jsx(hj,{})})}),o.jsx(yt,{path:"/agent-panel",element:o.jsx(Nr,{allowedRoles:["broker","admin"],children:o.jsx(Kz,{})})}),o.jsx(yt,{path:"*",element:o.jsx(Yz,{})})]})]})});CC(document.getElementById("root")).render(o.jsx(Qz,{}));
